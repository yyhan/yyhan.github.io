<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YFHan的博客</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yyhan.github.io/"/>
  <updated>2017-06-28T17:01:46.023Z</updated>
  <id>https://yyhan.github.io/</id>
  
  <author>
    <name>YFHan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>OpenSSL 生成证书</title>
    <link href="https://yyhan.github.io/2017/06/29/OpenSSL-%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6/"/>
    <id>https://yyhan.github.io/2017/06/29/OpenSSL-生成证书/</id>
    <published>2017-06-28T16:22:07.000Z</published>
    <updated>2017-06-28T17:01:46.023Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x751F;&#x6210;&#x6839;&#x8BC1;&#x4E66;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;"><a href="#&#x751F;&#x6210;&#x6839;&#x8BC1;&#x4E66;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;" class="headerlink" title="&#x751F;&#x6210;&#x6839;&#x8BC1;&#x4E66;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;"></a>&#x751F;&#x6210;&#x6839;&#x8BC1;&#x4E66;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;</h1><p>1&#x3001;&#x751F;&#x6210;&#x6839;&#x8BC1;&#x4E66;RSA&#x5BC6;&#x94A5;&#x5BF9;</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl genrsa -out ca.key 2048</div></pre></td></tr></table></figure>
<p>2&#x3001;&#x751F;&#x6210;&#x81EA;&#x7B7E;&#x540D;&#x6839;&#x8BC1;&#x4E66;</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -x509 -days 365 -key a.key -out a.csr</div></pre></td></tr></table></figure>
<p>3&#x3001;&#x8F6C;&#x6362;&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#xFF08;&#x975E;&#x5FC5;&#x987B;&#xFF09;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -<span class="keyword">in</span> ca.csr -out ca.crt</div></pre></td></tr></table></figure></p>
<p>4&#x3001;&#x751F;&#x6210;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;RSA&#x5BC6;&#x94A5;&#x5BF9;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl genrsa -out server.key 2048</div></pre></td></tr></table></figure></p>
<p>5&#x3001;&#x751F;&#x6210;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;&#x8BF7;&#x6C42;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -sha256 -key server.key -out server.csr</div></pre></td></tr></table></figure></p>
<p>6&#x3001;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x8BC1;&#x4E66;&#x7B7E;&#x540D;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -req -<span class="keyword">in</span> server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 30 -sha256 -extfile v3.ext</div></pre></td></tr></table></figure></p>
<p><code>v3.ext</code> &#x6307;&#x5B9A;&#x57DF;&#x540D;&#x7B49;&#x4FE1;&#x606F;<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">authorityKeyIdentifier=keyid,issuer</div><div class="line">basicConstraints=CA:FALSE</div><div class="line">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</div><div class="line">subjectAltName = @alt_names</div><div class="line"></div><div class="line">[alt_names]</div><div class="line">DNS.1 = it.jubaopay.com</div><div class="line">DNS.2 = b.jubaopay.com</div><div class="line">DNS.3 = oa.jubaopay.com</div></pre></td></tr></table></figure></p>
<p>&#x8C37;&#x6B4C;&#x6D4F;&#x89C8;&#x5668;&#x4F7F;&#x7528;<code>SAN (Subject Alternative Name)</code>&#x66FF;&#x4EE3;&#x4E86;<code>CN</code>&#x6765;&#x9A8C;&#x8BC1;&#x57DF;&#x540D;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x8981;&#x8FD9;&#x6837;&#x641E;</p>
<p>7&#x3001;&#x8F6C;&#x6362;&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#xFF08;&#x975E;&#x5FC5;&#x987B;&#xFF09;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -<span class="keyword">in</span> nginxCert.pem -out nginx.crt</div></pre></td></tr></table></figure></p>
<h1 id="&#x5E38;&#x7528;&#x547D;&#x4EE4;"><a href="#&#x5E38;&#x7528;&#x547D;&#x4EE4;" class="headerlink" title="&#x5E38;&#x7528;&#x547D;&#x4EE4;"></a>&#x5E38;&#x7528;&#x547D;&#x4EE4;</h1><h2 id="&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#x8F6C;&#x6362;"><a href="#&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#x8F6C;&#x6362;" class="headerlink" title="&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#x8F6C;&#x6362;"></a>&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#x8F6C;&#x6362;</h2><p>&#x8F6C;&#x6362;&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#xFF08;<code>pem -&gt; crt</code>&#xFF09;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -<span class="keyword">in</span> server.pem -out server.crt</div></pre></td></tr></table></figure></p>
<p>&#x8F6C;&#x6362;&#x8BC1;&#x4E66;&#x683C;&#x5F0F;&#xFF08;<code>pem -&gt; key</code>&#xFF09;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl rsa -<span class="keyword">in</span> server.pem -out server.key</div></pre></td></tr></table></figure></p>
<h2 id="&#x67E5;&#x770B;&#x8BC1;&#x4E66;&#x5185;&#x5BB9;"><a href="#&#x67E5;&#x770B;&#x8BC1;&#x4E66;&#x5185;&#x5BB9;" class="headerlink" title="&#x67E5;&#x770B;&#x8BC1;&#x4E66;&#x5185;&#x5BB9;"></a>&#x67E5;&#x770B;&#x8BC1;&#x4E66;&#x5185;&#x5BB9;</h2><p>&#x67E5;&#x770B;<code>crt</code>&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -text -<span class="keyword">in</span> server.crt -noout</div></pre></td></tr></table></figure></p>
<p>&#x67E5;&#x770B;<code>csr</code>&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -text -<span class="keyword">in</span> server.csr -noout</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x751F;&amp;#x6210;&amp;#x6839;&amp;#x8BC1;&amp;#x4E66;&amp;#x548C;&amp;#x670D;&amp;#x52A1;&amp;#x5668;&amp;#x8BC1;&amp;#x4E66;&quot;&gt;&lt;a href=&quot;#&amp;#x751F;&amp;#x6210;&amp;#x6839;&amp;#x8BC1;
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="openssl" scheme="https://yyhan.github.io/tags/openssl/"/>
    
      <category term="https" scheme="https://yyhan.github.io/tags/https/"/>
    
      <category term="ca" scheme="https://yyhan.github.io/tags/ca/"/>
    
      <category term="证书" scheme="https://yyhan.github.io/tags/%E8%AF%81%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>CryptoJS 使用示例</title>
    <link href="https://yyhan.github.io/2017/06/27/CryptoJS-%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    <id>https://yyhan.github.io/2017/06/27/CryptoJS-使用示例/</id>
    <published>2017-06-27T15:51:37.000Z</published>
    <updated>2017-06-27T16:17:57.210Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x89E3;&#x7801;"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x89E3;&#x7801;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x89E3;&#x7801;"></a>&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x89E3;&#x7801;</h1><p>&#x6240;&#x6709;&#x7684;&#x7F16;&#x89E3;&#x7801;&#x5668;&#xFF0C;&#x90FD;&#x6709;<code>stringify(wordArray)</code>&#x548C;<code>parse(str)</code>&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;<code>stringify</code>&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5C06;<code>WordArray</code>&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;&#x76F8;&#x5E94;&#x7F16;&#x7801;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>parse</code>&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x89E3;&#x7801;&#x76EE;&#x6807;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>WordArray</code>&#x5BF9;&#x8C61;&#x3002;</p>
<h2 id="Base64"><a href="#Base64" class="headerlink" title="Base64"></a>Base64</h2><p>&#x5C06;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;Base64&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x8F6C;&#x6362;&#x4E3A;<code>WordArray</code>&#x5BF9;&#x8C61;&#xFF0C;&#x518D;&#x8F6C;&#x6362;&#x4E3A;Base64&#x5B57;&#x7B26;&#x4E32;&#x3002;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Base64 &#x57FA;&#x672C;&#x4F7F;&#x7528;</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> plainTxt = <span class="string">&quot;hello base64&quot;</span>; <span class="comment">// &#x6D4B;&#x8BD5;&#x5B57;&#x7B26;&#x4E32;</span></div><div class="line"><span class="keyword">var</span> plainTxtToWA = CryptoJS.enc.Utf8.parse(plainTxt); <span class="comment">// &#x8F6C;&#x6362;&#x4E3A; WordArray</span></div><div class="line"><span class="keyword">var</span> base64Str = CryptoJS.enc.Base64.stringify(base64TestStrToWordArray); <span class="comment">// &#x8F6C;&#x6362;&#x4E3A;base64&#x5B57;&#x7B26;&#x4E32;</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(plainTxt);</div><div class="line"><span class="built_in">console</span>.log(plainTxtToWA);</div><div class="line"><span class="built_in">console</span>.log(base64Str);</div></pre></td></tr></table></figure></p>
<h1 id="&#x6458;&#x8981;&#x7B97;&#x6CD5;"><a href="#&#x6458;&#x8981;&#x7B97;&#x6CD5;" class="headerlink" title="&#x6458;&#x8981;&#x7B97;&#x6CD5;"></a>&#x6458;&#x8981;&#x7B97;&#x6CD5;</h1><h2 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> plainTxt = <span class="string">&quot;hello world&quot;</span>;</div><div class="line"><span class="keyword">var</span> md5Res = CryptoJS.MD5(plainTxt); <span class="comment">// MD5&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x4E2A; CryptoJS.lib.WordArray &#x5BF9;&#x8C61;</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(md5Res.toString()); <span class="comment">// WordArray.toString() &#x9ED8;&#x8BA4;&#x8F6C;&#x6362;&#x4E3A;hex&#x5B57;&#x7B26;&#x4E32;</span></div><div class="line"><span class="built_in">console</span>.log(md5Res.toString(CryptoJS.enc.Hex)); <span class="comment">// md5 &#x7ED3;&#x679C;&#x8F6C;&#x4E3A;hex&#x5B57;&#x7B26;&#x4E32;</span></div><div class="line"><span class="built_in">console</span>.log(md5Res.toString(CryptoJS.enc.Base64)); <span class="comment">// md5 &#x7ED3;&#x679C;&#x8F6C;&#x4E3A;base64&#x5B57;&#x7B26;&#x4E32;</span></div></pre></td></tr></table></figure>
<h1 id="&#x52A0;&#x89E3;&#x5BC6;"><a href="#&#x52A0;&#x89E3;&#x5BC6;" class="headerlink" title="&#x52A0;&#x89E3;&#x5BC6;"></a>&#x52A0;&#x89E3;&#x5BC6;</h1><h2 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ciphertext = CryptoJS.AES.encrypt(</div><div class="line">    <span class="string">&apos;plain text&apos;</span>, <span class="comment">// &#x9700;&#x8981;&#x52A0;&#x5BC6;&#x7684;&#x660E;&#x6587;</span></div><div class="line">    <span class="string">&apos;secret key&apos;</span>, <span class="comment">// &#x52A0;&#x5BC6;&#x5BC6;&#x94A5;</span></div><div class="line">    {</div><div class="line">        <span class="attr">mode</span>: CBC, <span class="comment">// AES&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;, &#x9ED8;&#x8BA4; CBC</span></div><div class="line">        padding: Pkcs7, <span class="comment">// &#x586B;&#x5145;&#x65B9;&#x5F0F;, &#x9ED8;&#x8BA4; Pkcs7</span></div><div class="line">        iv: <span class="literal">null</span>  <span class="comment">// AES &#x5411;&#x91CF;</span></div><div class="line">    }</div><div class="line">);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x7F16;&amp;#x89E3;&amp;#x7801;&quot;&gt;&lt;a href=&quot;#&amp;#x5B57;&amp;#x7B26;&amp;#x4E32;&amp;#x7F16;&amp;#x89E3;&amp;#x7801;&quot; class=&quot;headerlink&quot; tit
    
    </summary>
    
      <category term="javascript" scheme="https://yyhan.github.io/categories/javascript/"/>
    
    
      <category term="CryptoJS" scheme="https://yyhan.github.io/tags/CryptoJS/"/>
    
      <category term="AES" scheme="https://yyhan.github.io/tags/AES/"/>
    
      <category term="BASE64" scheme="https://yyhan.github.io/tags/BASE64/"/>
    
      <category term="MD5" scheme="https://yyhan.github.io/tags/MD5/"/>
    
      <category term="SHA" scheme="https://yyhan.github.io/tags/SHA/"/>
    
  </entry>
  
  <entry>
    <title>CryptoJS 使用指南</title>
    <link href="https://yyhan.github.io/2017/06/27/CryptoJS-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <id>https://yyhan.github.io/2017/06/27/CryptoJS-使用指南/</id>
    <published>2017-06-27T14:12:56.000Z</published>
    <updated>2017-06-27T16:40:32.020Z</updated>
    
    <content type="html"><![CDATA[<p>CryptoJS &#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;JavaScript&#x6807;&#x51C6;&#x5BC6;&#x7801;&#x5B66;&#x5E93;&#x3002;</p>
<h1 id="Node-js-install"><a href="#Node-js-install" class="headerlink" title="Node.js(install)"></a>Node.js(install)</h1><p>&#x4F9D;&#x8D56;&#xFF1A;</p>
<ul class="ui list">
<li>Node.js</li>
<li>npm</li>
</ul>
<p>&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install crypto-js</div></pre></td></tr></table></figure></p>
<h1 id="&#x4F7F;&#x7528;&#x793A;&#x4F8B;"><a href="#&#x4F7F;&#x7528;&#x793A;&#x4F8B;" class="headerlink" title="&#x4F7F;&#x7528;&#x793A;&#x4F8B;"></a>&#x4F7F;&#x7528;&#x793A;&#x4F8B;</h1><h2 id="ES6-&#x4E2D;&#x4F7F;&#x7528;"><a href="#ES6-&#x4E2D;&#x4F7F;&#x7528;" class="headerlink" title="ES6 &#x4E2D;&#x4F7F;&#x7528;"></a>ES6 &#x4E2D;&#x4F7F;&#x7528;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sha256 <span class="keyword">from</span> <span class="string">&apos;crypto-js/sha256&apos;</span>;</div><div class="line"><span class="keyword">import</span> hmacSHA512 <span class="keyword">from</span> <span class="string">&apos;crypto-js/hmac-sha512&apos;</span>;</div><div class="line"><span class="keyword">import</span> Base64 <span class="keyword">from</span> <span class="string">&apos;crypto-js/enc-base64&apos;</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> message, nonce, path, privateKey; <span class="comment">// ...</span></div><div class="line"><span class="keyword">const</span> hashDigest = sha256(nonce + message);</div><div class="line"><span class="keyword">const</span> hmacDigest = Base64.stringify(hmacSHA512(path + hashDigest, privateKey));</div></pre></td></tr></table></figure>
<h2 id="&#x5728;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;&#x4E2D;&#x4F7F;&#x7528;"><a href="#&#x5728;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;&#x4E2D;&#x4F7F;&#x7528;" class="headerlink" title="&#x5728;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;&#x4E2D;&#x4F7F;&#x7528;"></a>&#x5728;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;&#x4E2D;&#x4F7F;&#x7528;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> AES = <span class="built_in">require</span>(<span class="string">&quot;crypto-js/aes&quot;</span>);</div><div class="line"><span class="keyword">var</span> SHA256 = <span class="built_in">require</span>(<span class="string">&quot;crypto-js/sha256&quot;</span>);</div><div class="line">...</div><div class="line">console.log(SHA256(<span class="string">&quot;Message&quot;</span>));</div></pre></td></tr></table></figure>
<h2 id="&#x5BFC;&#x5165;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;"><a href="#&#x5BFC;&#x5165;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;" class="headerlink" title="&#x5BFC;&#x5165;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;"></a>&#x5BFC;&#x5165;&#x6240;&#x6709;&#x7684;&#x6A21;&#x5757;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> CryptoJS = <span class="built_in">require</span>(<span class="string">&quot;crypto-js&quot;</span>);</div><div class="line"><span class="built_in">console</span>.log(CryptoJS.HmacSHA1(<span class="string">&quot;Message&quot;</span>, <span class="string">&quot;Key&quot;</span>));</div></pre></td></tr></table></figure>
<h2 id="&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;"><a href="#&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;" class="headerlink" title="&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;"></a>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;path-to/bower_components/crypto-js/crypto-js.js&quot;</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> encrypted = CryptoJS.AES(...);</div><div class="line">    <span class="keyword">var</span> encrypted = CryptoJS.SHA256(...);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="&#x6587;&#x672C;&#x52A0;&#x89E3;&#x5BC6;"><a href="#&#x6587;&#x672C;&#x52A0;&#x89E3;&#x5BC6;" class="headerlink" title="&#x6587;&#x672C;&#x52A0;&#x89E3;&#x5BC6;"></a>&#x6587;&#x672C;&#x52A0;&#x89E3;&#x5BC6;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> CryptoJS = <span class="built_in">require</span>(<span class="string">&quot;crypto-js&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Encrypt</span></div><div class="line"><span class="keyword">var</span> ciphertext = CryptoJS.AES.encrypt(<span class="string">&apos;my message&apos;</span>, <span class="string">&apos;secret key 123&apos;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Decrypt</span></div><div class="line"><span class="keyword">var</span> bytes  = CryptoJS.AES.decrypt(ciphertext.toString(), <span class="string">&apos;secret key 123&apos;</span>);</div><div class="line"><span class="keyword">var</span> plaintext = bytes.toString(CryptoJS.enc.Utf8);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(plaintext);</div></pre></td></tr></table></figure>
<h2 id="&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x52A0;&#x89E3;&#x5BC6;"><a href="#&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x52A0;&#x89E3;&#x5BC6;" class="headerlink" title="&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x52A0;&#x89E3;&#x5BC6;"></a>&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x52A0;&#x89E3;&#x5BC6;</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> CryptoJS = <span class="built_in">require</span>(<span class="string">&quot;crypto-js&quot;</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> data = [{<span class="attr">id</span>: <span class="number">1</span>}, {<span class="attr">id</span>: <span class="number">2</span>}]</div><div class="line"></div><div class="line"><span class="comment">// Encrypt</span></div><div class="line"><span class="keyword">var</span> ciphertext = CryptoJS.AES.encrypt(<span class="built_in">JSON</span>.stringify(data), <span class="string">&apos;secret key 123&apos;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Decrypt</span></div><div class="line"><span class="keyword">var</span> bytes  = CryptoJS.AES.decrypt(ciphertext.toString(), <span class="string">&apos;secret key 123&apos;</span>);</div><div class="line"><span class="keyword">var</span> decryptedData = <span class="built_in">JSON</span>.parse(bytes.toString(CryptoJS.enc.Utf8));</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(decryptedData);</div></pre></td></tr></table></figure>
<h2 id="&#x5E93;&#x547D;&#x540D;&#x7A7A;&#x95F4;"><a href="#&#x5E93;&#x547D;&#x540D;&#x7A7A;&#x95F4;" class="headerlink" title="&#x5E93;&#x547D;&#x540D;&#x7A7A;&#x95F4;"></a>&#x5E93;&#x547D;&#x540D;&#x7A7A;&#x95F4;</h2><h3 id="Base"><a href="#Base" class="headerlink" title="Base"></a>Base</h3><p>&#x539F;&#x578B;&#x7EE7;&#x627F;&#x7684;&#x57FA;&#x7840;&#x5BF9;&#x8C61;&#x3002;CryptoJS&#x5E93;&#x4E2D;&#xFF0C;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x5957;&#x7EE7;&#x627F;&#x673A;&#x5236;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.lib.Base</div></pre></td></tr></table></figure></p>
<h3 id="WordArray"><a href="#WordArray" class="headerlink" title="WordArray"></a>WordArray</h3><p>&#x4E00;&#x4E2A;32&#x4F4D;&#x5B57;&#x7684;&#x6570;&#x7EC4;&#x3002;&#x7EE7;&#x627F;<code>Base</code>&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.lib.WordArray</div></pre></td></tr></table></figure></p>
<p>&#x8F6C;&#x6362;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> string = wordArray + <span class="string">&apos;&apos;</span>;</div><div class="line"><span class="keyword">var</span> string = wordArray.toString();</div><div class="line"><span class="keyword">var</span> string = wordArray.toString(CryptoJS.enc.Utf8);</div></pre></td></tr></table></figure></p>
<p><code>toString()</code>&#x65B9;&#x6CD5;&#x6709;&#x4E00;&#x4E2A;<code>encoder</code>&#x53C2;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>CryptoJS.enc.Hex</code>&#x3002;</p>
<h3 id="BufferedBlockAlgorithm"><a href="#BufferedBlockAlgorithm" class="headerlink" title="BufferedBlockAlgorithm"></a>BufferedBlockAlgorithm</h3><p>&#x7F13;&#x51B2;&#x5757;&#x7B97;&#x6CD5;&#x62BD;&#x8C61;&#x6A21;&#x677F;&#x3002;&#x7EE7;&#x627F;<code>Base</code>&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.lib.BufferedBlockAlgorithm</div></pre></td></tr></table></figure></p>
<h3 id="Hasher"><a href="#Hasher" class="headerlink" title="Hasher"></a>Hasher</h3><p>hash&#x7B97;&#x6CD5;&#x62BD;&#x8C61;&#x6A21;&#x677F;&#x3002;&#x7EE7;&#x627F;<code>BufferedBlockAlgorithm</code>&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.lib.Hasher</div></pre></td></tr></table></figure></p>
<h2 id="&#x7F16;&#x7801;&#x5668;"><a href="#&#x7F16;&#x7801;&#x5668;" class="headerlink" title="&#x7F16;&#x7801;&#x5668;"></a>&#x7F16;&#x7801;&#x5668;</h2><h3 id="Hex"><a href="#Hex" class="headerlink" title="Hex"></a>Hex</h3><p>&#x63D0;&#x4F9B;16&#x8FDB;&#x5236;&#x7F16;&#x89E3;&#x7801;&#x652F;&#x6301;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.enc.Hex</div></pre></td></tr></table></figure></p>
<h3 id="Latin1"><a href="#Latin1" class="headerlink" title="Latin1"></a>Latin1</h3><p><code>ISO 8859-1</code>&#xFF0C;&#x6B63;&#x5F0F;&#x7F16;&#x53F7;&#x4E3A;<code>ISO/IEC 8859-1:1998</code>&#xFF0C;&#x53C8;&#x79F0;<code>Latin-1</code>&#x6216;<code>&#x201C;&#x897F;&#x6B27;&#x8BED;&#x8A00;&#x201D;</code>&#xFF0C;&#x662F;&#x56FD;&#x9645;&#x6807;&#x51C6;&#x5316;&#x7EC4;&#x7EC7;&#x5185;<code>ISO/IEC 8859</code>&#x7684;&#x7B2C;&#x4E00;&#x4E2A;<code>8&#x4F4D;&#x5B57;&#x7B26;&#x96C6;</code>&#x3002;&#x5B83;&#x4EE5;ASCII&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x5728;&#x7A7A;&#x7F6E;&#x7684;<code>0xA0-0xFF</code>&#x7684;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x52A0;&#x5165;96&#x4E2A;&#x5B57;&#x6BCD;&#x53CA;&#x7B26;&#x53F7;&#xFF0C;&#x85C9;&#x4EE5;&#x4F9B;&#x4F7F;&#x7528;&#x9644;&#x52A0;&#x7B26;&#x53F7;&#x7684;&#x62C9;&#x4E01;&#x5B57;&#x6BCD;&#x8BED;&#x8A00;&#x4F7F;&#x7528;&#x3002;<a href="https://zh.wikipedia.org/wiki/ISO/IEC_8859-1" target="_blank" rel="external">&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;</a>&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.enc.Hex</div></pre></td></tr></table></figure></p>
<h3 id="Utf8"><a href="#Utf8" class="headerlink" title="Utf8"></a>Utf8</h3><p>&#x63D0;&#x4F9B;UTF-8&#x7F16;&#x89E3;&#x7801;&#x652F;&#x6301;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CryptoJS.enc.Utf8</div></pre></td></tr></table></figure></p>
<h1 id="&#x6A21;&#x5757;&#x5217;&#x8868;"><a href="#&#x6A21;&#x5757;&#x5217;&#x8868;" class="headerlink" title="&#x6A21;&#x5757;&#x5217;&#x8868;"></a>&#x6A21;&#x5757;&#x5217;&#x8868;</h1><h2 id="&#x6838;&#x5FC3;&#x6A21;&#x5757;"><a href="#&#x6838;&#x5FC3;&#x6A21;&#x5757;" class="headerlink" title="&#x6838;&#x5FC3;&#x6A21;&#x5757;"></a>&#x6838;&#x5FC3;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/core</code></li>
<li><code>crypto-js/x64-core</code></li>
<li><code>crypto-js/lib-typedarrays</code></li>
</ul>
<h2 id="&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6A21;&#x5757;"><a href="#&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6A21;&#x5757;" class="headerlink" title="&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6A21;&#x5757;"></a>&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/md5</code></li>
<li><code>crypto-js/sha1</code></li>
<li><code>crypto-js/sha256</code></li>
<li><code>crypto-js/sha224</code></li>
<li><code>crypto-js/sha512</code></li>
<li><code>crypto-js/sha384</code></li>
<li><code>crypto-js/sha3</code></li>
<li><code>crypto-js/ripemd160</code></li>
</ul>
<h2 id="HMAC&#x7B97;&#x6CD5;&#x6A21;&#x5757;"><a href="#HMAC&#x7B97;&#x6CD5;&#x6A21;&#x5757;" class="headerlink" title="HMAC&#x7B97;&#x6CD5;&#x6A21;&#x5757;"></a>HMAC&#x7B97;&#x6CD5;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/hmac-md5</code></li>
<li><code>crypto-js/hmac-sha1</code></li>
<li><code>crypto-js/hmac-sha256</code></li>
<li><code>crypto-js/hmac-sha224</code></li>
<li><code>crypto-js/hmac-sha512</code></li>
<li><code>crypto-js/hmac-sha384</code></li>
<li><code>crypto-js/hmac-sha3</code></li>
<li><code>crypto-js/hmac-ripemd160</code></li>
</ul>
<h2 id="PBKDF2&#x7B97;&#x6CD5;"><a href="#PBKDF2&#x7B97;&#x6CD5;" class="headerlink" title="PBKDF2&#x7B97;&#x6CD5;"></a>PBKDF2&#x7B97;&#x6CD5;</h2><ul class="ui list">
<li><code>crypto-js/pbkdf2</code></li>
</ul>
<h2 id="&#x52A0;&#x89E3;&#x5BC6;&#x6A21;&#x5757;"><a href="#&#x52A0;&#x89E3;&#x5BC6;&#x6A21;&#x5757;" class="headerlink" title="&#x52A0;&#x89E3;&#x5BC6;&#x6A21;&#x5757;"></a>&#x52A0;&#x89E3;&#x5BC6;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/aes</code></li>
<li><code>crypto-js/tripledes</code></li>
<li><code>crypto-js/rc4</code></li>
<li><code>crypto-js/rabbit</code></li>
<li><code>crypto-js/rabbit-legacy</code></li>
<li><code>crypto-js/evpkdf</code></li>
</ul>
<h2 id="&#x683C;&#x5F0F;&#x5316;&#x6A21;&#x5757;"><a href="#&#x683C;&#x5F0F;&#x5316;&#x6A21;&#x5757;" class="headerlink" title="&#x683C;&#x5F0F;&#x5316;&#x6A21;&#x5757;"></a>&#x683C;&#x5F0F;&#x5316;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/format-openssl</code></li>
<li><code>crypto-js/format-hex</code></li>
</ul>
<h2 id="&#x7F16;&#x89E3;&#x7801;&#x6A21;&#x5757;"><a href="#&#x7F16;&#x89E3;&#x7801;&#x6A21;&#x5757;" class="headerlink" title="&#x7F16;&#x89E3;&#x7801;&#x6A21;&#x5757;"></a>&#x7F16;&#x89E3;&#x7801;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/enc-latin1</code></li>
<li><code>crypto-js/enc-utf8</code></li>
<li><code>crypto-js/enc-hex</code></li>
<li><code>crypto-js/enc-utf16</code></li>
<li><code>crypto-js/enc-base64</code></li>
</ul>
<h2 id="&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x6A21;&#x5757;"><a href="#&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x6A21;&#x5757;" class="headerlink" title="&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x6A21;&#x5757;"></a>&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/mode-cfb</code></li>
<li><code>crypto-js/mode-ctr</code></li>
<li><code>crypto-js/mode-ctr-gladman</code></li>
<li><code>crypto-js/mode-ofb</code></li>
<li><code>crypto-js/mode-ecb</code></li>
</ul>
<h2 id="&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x6A21;&#x5757;"><a href="#&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x6A21;&#x5757;" class="headerlink" title="&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x6A21;&#x5757;"></a>&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x6A21;&#x5757;</h2><ul class="ui list">
<li><code>crypto-js/pad-pkcs7</code></li>
<li><code>crypto-js/pad-ansix923</code></li>
<li><code>crypto-js/pad-iso10126</code></li>
<li><code>crypto-js/pad-iso97971</code></li>
<li><code>crypto-js/pad-zeropadding</code></li>
<li><code>crypto-js/pad-nopadding</code></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CryptoJS &amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5F00;&amp;#x6E90;&amp;#x7684;JavaScript&amp;#x6807;&amp;#x51C6;&amp;#x5BC6;&amp;#x7801;&amp;#x5B66;&amp;#x5E93;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;N
    
    </summary>
    
      <category term="javascript" scheme="https://yyhan.github.io/categories/javascript/"/>
    
    
      <category term="CryptoJS" scheme="https://yyhan.github.io/tags/CryptoJS/"/>
    
      <category term="AES" scheme="https://yyhan.github.io/tags/AES/"/>
    
      <category term="BASE64" scheme="https://yyhan.github.io/tags/BASE64/"/>
    
      <category term="MD5" scheme="https://yyhan.github.io/tags/MD5/"/>
    
      <category term="SHA" scheme="https://yyhan.github.io/tags/SHA/"/>
    
  </entry>
  
  <entry>
    <title>java AES使用</title>
    <link href="https://yyhan.github.io/2017/06/26/java-AES%E4%BD%BF%E7%94%A8/"/>
    <id>https://yyhan.github.io/2017/06/26/java-AES使用/</id>
    <published>2017-06-26T12:59:59.000Z</published>
    <updated>2017-06-26T15:02:46.303Z</updated>
    
    <content type="html"><![CDATA[<p>java&#x63D0;&#x4F9B;AES&#x7B97;&#x6CD5;&#x652F;&#x6301;&#x3002;&#x652F;&#x6301;&#x7684;&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x4E3A;&#xFF1A;<code>128, 192, &#x6216;256&#x4F4D;</code>&#x3002;&#x7531;&#x4E8E;&#x7F8E;&#x56FD;&#x8FDB;&#x51FA;&#x53E3;&#x9650;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;jre&#x53EA;&#x652F;&#x6301;<code>128</code>&#x4F4D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;16&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5BC6;&#x94A5;&#x3002;</p>
<p>&#x652F;&#x6301;&#x7684;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#xFF1A;</p>
<ul class="ui list">
<li>NONE</li>
<li>CBC</li>
<li>CCM</li>
<li>CFB, CFBx</li>
<li>CTR</li>
<li>CTS</li>
<li>ECB</li>
<li>GCM</li>
<li>OFB, OFBx</li>
<li>PCBC</li>
</ul>
<p>&#x652F;&#x6301;&#x7684;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul class="ui list">
<li>NoPadding</li>
<li>ISO10126Padding</li>
<li>OAEPPadding</li>
<li>PKCS1Padding</li>
<li>PKCS5Padding</li>
<li>SSL3Padding</li>
</ul>
<p>&#x5F53;&#x4F7F;&#x7528;<code>Cipher.getInstance(&quot;AES&quot;)</code>&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x83B7;&#x53D6;&#x7684;&#x662F;<code>AES/ECB/PKCS5Padding</code>&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x4F8B;&#x3002;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E2D;&#x8FD9;&#x91CC;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#xFF0C;&#x5EFA;&#x8BAE;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#x4E00;&#x5B9A;&#x8981;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x548C;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x3002;&#x82E5;&#x4E0D;&#x663E;&#x793A;&#x6307;&#x5B9A;&#xFF0C;&#x5728;&#x8DE8;&#x8BED;&#x8A00;&#x3001;&#x8DE8;&#x7C7B;&#x5E93;&#x6216;&#x8DE8;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5BB9;&#x6613;&#x8E29;&#x5751;&#x3002;</p>
<h1 id="java-aes&#x793A;&#x4F8B;"><a href="#java-aes&#x793A;&#x4F8B;" class="headerlink" title="java aes&#x793A;&#x4F8B;"></a>java aes&#x793A;&#x4F8B;</h1><p>java &#x7248;&#x672C; &#xFF1A; 1.8&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cloudin.commons.security;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.crypto.BadPaddingException;</div><div class="line"><span class="keyword">import</span> javax.crypto.Cipher;</div><div class="line"><span class="keyword">import</span> javax.crypto.IllegalBlockSizeException;</div><div class="line"><span class="keyword">import</span> javax.crypto.NoSuchPaddingException;</div><div class="line"><span class="keyword">import</span> javax.crypto.spec.IvParameterSpec;</div><div class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</div><div class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</div><div class="line"><span class="keyword">import</span> java.security.InvalidAlgorithmParameterException;</div><div class="line"><span class="keyword">import</span> java.security.InvalidKeyException;</div><div class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</div><div class="line"><span class="keyword">import</span> java.util.Base64;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by YFHan on 2017/4/4 0004.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AESHelper</span> </span>{</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#x7B97;&#x6CD5;&#x540D;&#x79F0;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String ALGORITHM_NAME =<span class="string">&quot;AES&quot;</span>;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * java aes &#x7B97;&#x6CD5;&#x9ED8;&#x8BA4;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_MODE = <span class="string">&quot;ECB&quot;</span>;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * java aes &#x7B97;&#x6CD5;&#x9ED8;&#x8BA4;&#x586B;&#x5145;&#x65B9;&#x5F0F;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PADDING = <span class="string">&quot;PKCS5Padding&quot;</span>;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * java aes &#x7B97;&#x6CD5;&#x9ED8;&#x8BA4;&#x7684;&#x5BC6;&#x7801;&#x5B9E;&#x4F8B;</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_CHIPHER_INSTANCE = <span class="string">&quot;AES/ECB/PKCS5Padding&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#x5BF9;&#x6307;&#x5B9A;&#x5185;&#x5BB9;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x79D8;&#x94A5;&#x8FDB;&#x884C;AES(128)&#x52A0;&#x5BC6;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x52A0;&#x5BC6;&#x540E;&#x7684;&#x5B57;&#x8282;&#x6570;&#x7EC4;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> content  &#x5F85;&#x52A0;&#x5BC6;&#x7684;&#x5185;&#x5BB9;</div><div class="line">     * <span class="doctag">@param</span> password &#x52A0;&#x5BC6;&#x79D8;&#x94A5;</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] encrypt(<span class="keyword">byte</span>[] content, <span class="keyword">byte</span>[] password) {</div><div class="line">        Cipher cp = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            SecretKeySpec skeySpec = <span class="keyword">new</span> SecretKeySpec(password, ALGORITHM_NAME);</div><div class="line">            cp = Cipher.getInstance(DEFAULT_CHIPHER_INSTANCE); <span class="comment">// &#x7B97;&#x6CD5;/&#x6A21;&#x5F0F;/&#x586B;&#x5145;</span></div><div class="line">            cp.init(Cipher.ENCRYPT_MODE, skeySpec, <span class="keyword">new</span> IvParameterSpec(<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>]));</div><div class="line">            <span class="keyword">return</span> cp.doFinal(content);</div><div class="line"></div><div class="line">        } <span class="keyword">catch</span> (NoSuchAlgorithmException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (NoSuchPaddingException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (InvalidKeyException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (BadPaddingException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (IllegalBlockSizeException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (InvalidAlgorithmParameterException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * &#x5BF9;&#x6307;&#x5B9A;&#x5185;&#x5BB9;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x79D8;&#x94A5;&#x8FDB;&#x884C;AES(128)&#x89E3;&#x5BC6;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x89E3;&#x5BC6;&#x540E;&#x7684;&#x5B57;&#x8282;&#x6570;&#x7EC4;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> content  &#x5F85;&#x89E3;&#x5BC6;&#x7684;&#x5185;&#x5BB9;</div><div class="line">     * <span class="doctag">@param</span> password &#x89E3;&#x5BC6;&#x79D8;&#x94A5;</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decrypt(<span class="keyword">byte</span>[] content, <span class="keyword">byte</span>[] password) {</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            SecretKeySpec skeySpec = <span class="keyword">new</span> SecretKeySpec(password, ALGORITHM_NAME);</div><div class="line">            Cipher cp = Cipher.getInstance(DEFAULT_CHIPHER_INSTANCE); <span class="comment">// &#x7B97;&#x6CD5;/&#x6A21;&#x5F0F;/&#x586B;&#x5145;</span></div><div class="line">            cp.init(Cipher.DECRYPT_MODE, skeySpec, <span class="keyword">new</span> IvParameterSpec(<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>]));</div><div class="line"></div><div class="line">            <span class="keyword">return</span> cp.doFinal(content);</div><div class="line">        } <span class="keyword">catch</span> (NoSuchAlgorithmException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (NoSuchPaddingException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (InvalidKeyException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (BadPaddingException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (IllegalBlockSizeException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        } <span class="keyword">catch</span> (InvalidAlgorithmParameterException e) {</div><div class="line">            e.printStackTrace();</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
<h1 id="&#x5E38;&#x89C1;&#x95EE;&#x9898;"><a href="#&#x5E38;&#x89C1;&#x95EE;&#x9898;" class="headerlink" title="&#x5E38;&#x89C1;&#x95EE;&#x9898;"></a>&#x5E38;&#x89C1;&#x95EE;&#x9898;</h1><h2 id="java-aes&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x9650;&#x5236;"><a href="#java-aes&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x9650;&#x5236;" class="headerlink" title="java aes&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x9650;&#x5236;"></a>java aes&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x9650;&#x5236;</h2><p>&#x7531;&#x4E8E;&#x7F8E;&#x56FD;&#x8FDB;&#x51FA;&#x53E3;&#x9650;&#x5236;&#xFF0C;jre&#x81EA;&#x5E26;&#x7684;aes&#x7B97;&#x6CD5;&#x9650;&#x5236;&#x4E86;&#x5BC6;&#x94A5;&#x957F;&#x5EA6;&#x4E3A;16&#x5B57;&#x8282;&#x3002;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x4F7F;&#x7528;JCE&#x65E0;&#x9650;&#x5236;&#x6743;&#x9650;&#x7B56;&#x7565;&#x7684;jar&#x5305;&#x8986;&#x76D6;jvm&#x81EA;&#x5E26;&#x7684;jar&#x5305;&#x3002;</p>
<p>&#x4E0B;&#x8F7D;&#x5730;&#x5740;: <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html</a></p>
<h2 id="java-&#x548C;-js&#x4E92;&#x76F8;&#x52A0;&#x89E3;&#x5BC6;&#x95EE;&#x9898;"><a href="#java-&#x548C;-js&#x4E92;&#x76F8;&#x52A0;&#x89E3;&#x5BC6;&#x95EE;&#x9898;" class="headerlink" title="java &#x548C; js&#x4E92;&#x76F8;&#x52A0;&#x89E3;&#x5BC6;&#x95EE;&#x9898;"></a>java &#x548C; js&#x4E92;&#x76F8;&#x52A0;&#x89E3;&#x5BC6;&#x95EE;&#x9898;</h2><p>java&#x548C;js&#x4E92;&#x76F8;&#x52A0;&#x89E3;&#x5BC6;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6307;&#x5B9A;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x548C;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#xFF0C;&#x4F1A;&#x5931;&#x8D25;&#x3002;&#x5728;js&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x4F7F;&#x7528;<a href="https://github.com/brix/crypto-js" target="_blank" rel="external">crypto-js</a>&#x5E93;&#x6765;&#x52A0;&#x89E3;&#x5BC6;&#x3002;&#x4F46;&#x662F;&#x8BE5;&#x7C7B;&#x5E93;&#x9ED8;&#x8BA4;&#x7684;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x662F;<code>CBC</code>&#xFF0C;&#x9ED8;&#x8BA4;&#x586B;&#x5145;&#x65B9;&#x5F0F;<code>PKCS7</code>&#xFF0C;&#x4E0E;java&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x5F0F;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</p>
<p>&#x5F88;&#x591A;&#x540C;&#x5B66;&#x5728;&#x4F7F;&#x7528;AES&#x7B97;&#x6CD5;&#x65F6;&#xFF0C;&#x4E0D;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x548C;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x5C31;&#x4F1A;&#x5C61;&#x5C61;&#x51FA;&#x9519;&#x3002;&#x95EE;&#x9898;&#x5C31;&#x51FA;&#x5728;java&#x548C;js&#xFF08;crypto-js&#xFF09;&#x9ED8;&#x8BA4;&#x7684;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x548C;&#x586B;&#x5145;&#x65B9;&#x5F0F;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x8FD9;&#x91CC;&#x53EA;&#x8981;&#x5C06;&#x4E24;&#x8005;&#x7684;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;&#x548C;&#x586B;&#x5145;&#x6307;&#x5B9A;&#x4E00;&#x6837;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x63A8;&#x8350;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;<br>js&#x91C7;&#x7528;<code>AES/CBC/ZeroPadding</code>&#x65B9;&#x5F0F;&#x52A0;&#x5BC6;&#x3002;&#x7531;&#x4E8E;java&#x6CA1;&#x6709;&#x63D0;&#x4F9B;<code>ZeroPadding</code>&#x586B;&#x5145;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>AES/CBC/NoPadding</code>&#x65B9;&#x5F0F;&#x89E3;&#x5BC6;&#xFF0C;&#x89E3;&#x5BC6;&#x540E;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x4F9D;&#x6B21;&#x5254;&#x9664;<code>0x00</code>&#x7684;&#x5B57;&#x8282;&#xFF0C;&#x9047;&#x5230;&#x975E;<code>0x00</code>&#x7684;&#x5B57;&#x8282;&#x65F6;&#x505C;&#x6B62;&#x3002;&#x5269;&#x4E0B;&#x7684;&#x5B57;&#x8282;&#x5C31;&#x662F;&#x89E3;&#x5BC6;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x539F;&#x59CB;&#x6587;&#x672C;&#x8F6C;byte&#x6570;&#x7EC4;&#x540E;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x4E0D;&#x80FD;&#x662F;<code>0x00</code>&#x3002;&#x5982;&#x679C;&#x662F;java&#x52A0;&#x5BC6;&#xFF0C;js&#x89E3;&#x5BC6;&#xFF0C;&#x5C06;&#x8FC7;&#x7A0B;&#x53CD;&#x8FC7;&#x6765;&#x5373;&#x53EF;&#x3002;</p>
<h1 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h1><ul class="ui list">
<li><a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html" target="_blank" rel="external">java&#x5BC6;&#x7801;&#x5B66;&#x4F53;&#x7CFB;&#x6807;&#x51C6;&#x7B97;&#x6CD5;&#x540D;&#x79F0;-jdk8</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html" target="_blank" rel="external">java &#x5BC6;&#x7801;&#x5B66;&#x4F53;&#x7CFB;&#x6307;&#x5357;</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/index.html" target="_blank" rel="external">java &#x5B89;&#x5168;&#x76F8;&#x5173;&#x6307;&#x5357;&#x7D22;&#x5F15;</a></li>
<li><a href="http://jaq.alibaba.com/community/art/show?articleid=209" target="_blank" rel="external">Android&#x5E94;&#x7528;&#x5B89;&#x5168;&#x5F00;&#x53D1;&#x4E4B;&#x6D45;&#x8C08;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#x7684;&#x5751;</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;java&amp;#x63D0;&amp;#x4F9B;AES&amp;#x7B97;&amp;#x6CD5;&amp;#x652F;&amp;#x6301;&amp;#x3002;&amp;#x652F;&amp;#x6301;&amp;#x7684;&amp;#x5BC6;&amp;#x94A5;&amp;#x957F;&amp;#x5EA6;&amp;#x4E3A;&amp;#xFF1A;&lt;c
    
    </summary>
    
      <category term="java" scheme="https://yyhan.github.io/categories/java/"/>
    
    
      <category term="AES" scheme="https://yyhan.github.io/tags/AES/"/>
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>hessian 2.0 序列化协议</title>
    <link href="https://yyhan.github.io/2017/06/18/hessian-2-0-%E5%BA%8F%E5%88%97%E5%8C%96%E5%8D%8F%E8%AE%AE/"/>
    <id>https://yyhan.github.io/2017/06/18/hessian-2-0-序列化协议/</id>
    <published>2017-06-18T03:05:53.000Z</published>
    <updated>2017-06-26T16:42:05.615Z</updated>
    
    <content type="html"><![CDATA[<p>Hessian 2.0 &#x5E8F;&#x5217;&#x5316;&#x534F;&#x8BAE;&#x7FFB;&#x8BD1;&#xFF0C;&#x539F;&#x6587;&#x94FE;&#x63A5;<a href="http://hessian.caucho.com/doc/hessian-serialization.html" target="_blank" rel="external">http://hessian.caucho.com/doc/hessian-serialization.html</a></p>
<h1 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h1><p>Hessian&#x662F;&#x4E00;&#x79CD;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x7684;&#x3001;&#x91C7;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x5E8F;&#x5217;&#x5316;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x88AB;&#x8BBE;&#x8BA1;&#x4E3A;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x4F20;&#x8F93;&#x7684;Web&#x670D;&#x52A1;&#x534F;&#x8BAE;&#x3002;</p>
<h1 id="&#x8BBE;&#x8BA1;&#x76EE;&#x6807;"><a href="#&#x8BBE;&#x8BA1;&#x76EE;&#x6807;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x76EE;&#x6807;"></a>&#x8BBE;&#x8BA1;&#x76EE;&#x6807;</h1><p>Hessian&#x662F;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x7D27;&#x51D1;&#x7684;&#xFF0C;&#x53EF;&#x8DE8;&#x8BED;&#x8A00;&#x79FB;&#x690D;&#x7684;&#x3002;</p>
<p>Hessian&#x534F;&#x8BAE;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x8BBE;&#x8BA1;&#x76EE;&#x6807;:</p>
<ul class="ui list">
<li>It must self-describe the serialized types, i.e. not require external schema or interface definitions.</li>
<li>It must be language-independent, including supporting scripting languages.</li>
<li>It must be readable or writable in a single pass.</li>
<li>It must be as compact as possible.</li>
<li>It must be simple so it can be effectively tested and implemented.</li>
<li>It must be as fast as possible.</li>
<li>It must support Unicode strings.</li>
<li>It must support 8-bit binary data without escaping or using attachments.</li>
<li>It must support encryption, compression, signature, and transaction context envelopes.</li>
</ul>
<h1 id="Hessian-&#x8BED;&#x6CD5;"><a href="#Hessian-&#x8BED;&#x6CD5;" class="headerlink" title="Hessian &#x8BED;&#x6CD5;"></a>Hessian &#x8BED;&#x6CD5;</h1><h2 id="&#x5E8F;&#x5217;&#x5316;&#x8BED;&#x6CD5;"><a href="#&#x5E8F;&#x5217;&#x5316;&#x8BED;&#x6CD5;" class="headerlink" title="&#x5E8F;&#x5217;&#x5316;&#x8BED;&#x6CD5;"></a>&#x5E8F;&#x5217;&#x5316;&#x8BED;&#x6CD5;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line">           # starting production</div><div class="line">top        ::= value</div><div class="line"></div><div class="line">           # 8-bit binary data split into 64k chunks</div><div class="line">binary     ::= x41 b1 b0 &lt;binary-data&gt; binary # non-final chunk</div><div class="line">           ::= &apos;B&apos; b1 b0 &lt;binary-data&gt;        # final chunk</div><div class="line">           ::= [x20-x2f] &lt;binary-data&gt;        # binary data of</div><div class="line">                                                 #  length 0-15</div><div class="line">           ::= [x34-x37] &lt;binary-data&gt;        # binary data of</div><div class="line">                                                 #  length 0-1023</div><div class="line"></div><div class="line">           # boolean true/false</div><div class="line">boolean    ::= &apos;T&apos;</div><div class="line">           ::= &apos;F&apos;</div><div class="line"></div><div class="line">           # definition for an object (compact map)</div><div class="line">class-def  ::= &apos;C&apos; string int string*</div><div class="line"></div><div class="line">           # time in UTC encoded as 64-bit long milliseconds since</div><div class="line">           #  epoch</div><div class="line">date       ::= x4a b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">           ::= x4b b3 b2 b1 b0       # minutes since epoch</div><div class="line"></div><div class="line">           # 64-bit IEEE double</div><div class="line">double     ::= &apos;D&apos; b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">           ::= x5b                   # 0.0</div><div class="line">           ::= x5c                   # 1.0</div><div class="line">           ::= x5d b0                # byte cast to double</div><div class="line">                                     #  (-128.0 to 127.0)</div><div class="line">           ::= x5e b1 b0             # short cast to double</div><div class="line">           ::= x5f b3 b2 b1 b0       # 32-bit float cast to double</div><div class="line"></div><div class="line">           # 32-bit signed integer</div><div class="line">int        ::= &apos;I&apos; b3 b2 b1 b0</div><div class="line">           ::= [x80-xbf]             # -x10 to x3f</div><div class="line">           ::= [xc0-xcf] b0          # -x800 to x7ff</div><div class="line">           ::= [xd0-xd7] b1 b0       # -x40000 to x3ffff</div><div class="line"></div><div class="line">           # list/vector</div><div class="line">list       ::= x55 type value* &apos;Z&apos;   # variable-length list</div><div class="line">	   ::= &apos;V&apos; type int value*   # fixed-length list</div><div class="line">           ::= x57 value* &apos;Z&apos;        # variable-length untyped list</div><div class="line">           ::= x58 int value*        # fixed-length untyped list</div><div class="line">	   ::= [x70-77] type value*  # fixed-length typed list</div><div class="line">	   ::= [x78-7f] value*       # fixed-length untyped list</div><div class="line"></div><div class="line">           # 64-bit signed long integer</div><div class="line">long       ::= &apos;L&apos; b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">           ::= [xd8-xef]             # -x08 to x0f</div><div class="line">           ::= [xf0-xff] b0          # -x800 to x7ff</div><div class="line">           ::= [x38-x3f] b1 b0       # -x40000 to x3ffff</div><div class="line">           ::= x59 b3 b2 b1 b0       # 32-bit integer cast to long</div><div class="line"></div><div class="line">           # map/object</div><div class="line">map        ::= &apos;M&apos; type (value value)* &apos;Z&apos;  # key, value map pairs</div><div class="line">	   ::= &apos;H&apos; (value value)* &apos;Z&apos;       # untyped key, value</div><div class="line"></div><div class="line">           # null value</div><div class="line">null       ::= &apos;N&apos;</div><div class="line"></div><div class="line">           # Object instance</div><div class="line">object     ::= &apos;O&apos; int value*</div><div class="line">	   ::= [x60-x6f] value*</div><div class="line"></div><div class="line">           # value reference (e.g. circular trees and graphs)</div><div class="line">ref        ::= x51 int            # reference to nth map/list/object</div><div class="line"></div><div class="line">           # UTF-8 encoded character string split into 64k chunks</div><div class="line">string     ::= x52 b1 b0 &lt;utf8-data&gt; string  # non-final chunk</div><div class="line">           ::= &apos;S&apos; b1 b0 &lt;utf8-data&gt;         # string of length</div><div class="line">                                             #  0-65535</div><div class="line">           ::= [x00-x1f] &lt;utf8-data&gt;         # string of length</div><div class="line">                                             #  0-31</div><div class="line">           ::= [x30-x34] &lt;utf8-data&gt;         # string of length</div><div class="line">                                             #  0-1023</div><div class="line"></div><div class="line">           # map/list types for OO languages</div><div class="line">type       ::= string                        # type name</div><div class="line">           ::= int                           # type reference</div><div class="line"></div><div class="line">           # main production</div><div class="line">value      ::= null</div><div class="line">           ::= binary</div><div class="line">           ::= boolean</div><div class="line">           ::= class-def value</div><div class="line">           ::= date</div><div class="line">           ::= double</div><div class="line">           ::= int</div><div class="line">           ::= list</div><div class="line">           ::= long</div><div class="line">           ::= map</div><div class="line">           ::= object</div><div class="line">           ::= ref</div><div class="line">           ::= string</div></pre></td></tr></table></figure>
<h1 id="&#x5E8F;&#x5217;&#x5316;"><a href="#&#x5E8F;&#x5217;&#x5316;" class="headerlink" title="&#x5E8F;&#x5217;&#x5316;"></a>&#x5E8F;&#x5217;&#x5316;</h1><p>Hessian&#x7684;&#x5BF9;&#x8C61;&#x5E8F;&#x5217;&#x5316;&#x6709;8&#x4E2A;&#x539F;&#x59CB;&#x7C7B;&#x578B;:</p>
<ul class="ui list">
<li>raw binary data</li>
<li>boolean</li>
<li>64-bit millisecond date</li>
<li>64-bit double</li>
<li>32-bit int</li>
<li>64-bit long</li>
<li>null</li>
<li>UTF8-encoded string</li>
</ul>
<p>&#x5B83;&#x6709;3&#x4E2A;&#x9012;&#x5F52;&#x7C7B;&#x578B;:</p>
<ul class="ui list">
<li>list for lists and arrays</li>
<li>map for maps and dictionaries</li>
<li>object for objects</li>
</ul>
<p>&#x6700;&#x540E;&#xFF0C;&#x5B83;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x6784;&#x9020;:</p>
<ul class="ui list">
<li>ref for shared and circular object references.</li>
</ul>
<p>Hessian 2.0 &#x6709;&#x4E09;&#x4E2A;&#x5185;&#x7F6E;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x6620;&#x5C04;:</p>
<ul class="ui list">
<li>An object/list reference map.</li>
<li>An class definition reference map.</li>
<li>A type (class name) reference map.</li>
</ul>
<h2 id="&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;"><a href="#&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;" class="headerlink" title="&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;"></a>&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;</h2><p>&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">binary ::= b b1 b0 &lt;binary-data&gt; binary</div><div class="line">       ::= B b1 b0 &lt;binary-data&gt;</div><div class="line">       ::= [x20-x2f] &lt;binary-data&gt;</div></pre></td></tr></table></figure></p>
<p>&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x5757;&#x7F16;&#x7801;&#x3002;&#x516B;&#x8FDB;&#x5236; <code>0x42(&apos;B&apos;)</code>&#x7F16;&#x7801;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5757;&#xFF0C;<code>0x62(&apos;b&apos;)</code>&#x8868;&#x793A;&#x9664;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5757;&#x4EE5;&#x5916;&#x7684;&#x5757;&#x3002;&#x6BCF;&#x4E2A;&#x5757;&#x90FD;&#x6709;&#x4E00;&#x4E2A;16&#x4F4D;&#x7684;&#x957F;&#x5EA6;&#x503C;&#x3002;&#x957F;&#x5EA6;&#x503C;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>len = 256 * b1 + b0</p>
<h3 id="&#x538B;&#x7F29;&#x77ED;&#x4E8C;&#x8FDB;&#x5236;"><a href="#&#x538B;&#x7F29;&#x77ED;&#x4E8C;&#x8FDB;&#x5236;" class="headerlink" title="&#x538B;&#x7F29;&#x77ED;&#x4E8C;&#x8FDB;&#x5236;"></a>&#x538B;&#x7F29;&#x77ED;&#x4E8C;&#x8FDB;&#x5236;</h3><p>&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;15&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x91C7;&#x7528;&#x4E00;&#x4E2A;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x8868;&#x793A;&#x957F;&#x5EA6;&#xFF0C;&#x8BE5;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x53D6;&#x503C;&#x8303;&#x56F4;&#xFF1A;[x20-x2f]&#xFF0C;&#x957F;&#x5EA6;&#x503C;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>len = code - 0x20</p>
<h3 id="&#x4E8C;&#x8FDB;&#x5236;&#x793A;&#x4F8B;"><a href="#&#x4E8C;&#x8FDB;&#x5236;&#x793A;&#x4F8B;" class="headerlink" title="&#x4E8C;&#x8FDB;&#x5236;&#x793A;&#x4F8B;"></a>&#x4E8C;&#x8FDB;&#x5236;&#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x20               # 0&#x957F;&#x5EA6;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;</div><div class="line"></div><div class="line">x23 x01 x02 x03   # 3&#x4E2A;&#x516B;&#x5B57;&#x8282;&#x6570;&#x636E;</div><div class="line"></div><div class="line">B x10 x00 ....    # 4k &#x7ED3;&#x5C3E;&#x6570;&#x636E;&#x5757;</div><div class="line"></div><div class="line">b x04 x00 ....    # 1k &#x975E;&#x7ED3;&#x5C3E;&#x6570;&#x636E;&#x5757;</div></pre></td></tr></table></figure>
<h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>Boolean&#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">boolean ::= T</div><div class="line">        ::= F</div></pre></td></tr></table></figure></p>
<p>&#x5B57;&#x8282; <code>&apos;F&apos;</code> &#x8868;&#x793A;<code>false</code>&#xFF0C;&#x5B57;&#x8282; <code>&apos;T&apos;</code> &#x8868;&#x793A;<code>true</code></p>
<h3 id="Boolean-&#x793A;&#x4F8B;"><a href="#Boolean-&#x793A;&#x4F8B;" class="headerlink" title="Boolean &#x793A;&#x4F8B;"></a>Boolean &#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">T   # true</div><div class="line">F   # false</div></pre></td></tr></table></figure>
<h2 id="date"><a href="#date" class="headerlink" title="date"></a>date</h2><p>Date &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">date ::= x4a b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">     ::= x4b b4 b3 b2 b1 b0</div></pre></td></tr></table></figure></p>
<p>&#x65E5;&#x671F;&#x7C7B;&#x578B;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;64&#x4F4D;&#x7684;<code>long</code>&#x6570;&#x503C;&#x8868;&#x793A;&#x4ECE;<code>1970-01-01 00:00:00</code>&#x4EE5;&#x6765;&#x7ECF;&#x8FC7;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#x3002;</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x4F7F;&#x7528;&#x5206;&#x949F;&#x8868;&#x793A;&#x65E5;&#x671F;"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x4F7F;&#x7528;&#x5206;&#x949F;&#x8868;&#x793A;&#x65E5;&#x671F;" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x4F7F;&#x7528;&#x5206;&#x949F;&#x8868;&#x793A;&#x65E5;&#x671F;"></a>&#x538B;&#x7F29;&#xFF1A;&#x4F7F;&#x7528;&#x5206;&#x949F;&#x8868;&#x793A;&#x65E5;&#x671F;</h3><p>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;32&#x4F4D;&#x7684;<code>int</code>&#x6570;&#x503C;&#x8868;&#x793A;&#x4ECE;<code>1970-01-01 00:00</code>&#x4EE5;&#x6765;&#x7ECF;&#x8FC7;&#x7684;&#x5206;&#x949F;&#x6570;&#x3002;</p>
<h3 id="&#x65E5;&#x671F;-&#x793A;&#x4F8B;"><a href="#&#x65E5;&#x671F;-&#x793A;&#x4F8B;" class="headerlink" title="&#x65E5;&#x671F; &#x793A;&#x4F8B;"></a>&#x65E5;&#x671F; &#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x4a x00 x00 x00 xd0 x4b x92 x84 xb8   # 09:51:31 1998&#x5E74;5&#x6708;8&#x65E5;UTC</div><div class="line"></div><div class="line">x4b x4b x92 x0b xa0                   # 09:51:00 1998&#x5E74;5&#x6708;8&#x65E5;UTC</div></pre></td></tr></table></figure>
<h2 id="double"><a href="#double" class="headerlink" title="double"></a>double</h2><p>Double &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">double ::= D b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">       ::= x5b</div><div class="line">       ::= x5c</div><div class="line">       ::= x5d b0</div><div class="line">       ::= x5e b1 b0</div><div class="line">       ::= x5f b3 b2 b1 b0</div></pre></td></tr></table></figure></p>
<p>&#x4E00;&#x4E2A;64&#x4F4D;&#x7684;IEEE&#x6807;&#x51C6;&#x7684;&#x6D6E;&#x70B9;&#x6570;&#x3002;</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;double-zero"><a href="#&#x538B;&#x7F29;&#xFF1A;double-zero" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;double zero"></a>&#x538B;&#x7F29;&#xFF1A;double zero</h3><p>double&#x7C7B;&#x578B;&#x7684;<code>0.0</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B57;&#x8282;<code>x5b</code>&#x8868;&#x793A;&#x3002;</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;double-one"><a href="#&#x538B;&#x7F29;&#xFF1A;double-one" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;double one"></a>&#x538B;&#x7F29;&#xFF1A;double one</h3><p>double&#x7C7B;&#x578B;&#x7684;<code>1.0</code>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B57;&#x8282;<code>x5c</code>&#x8868;&#x793A;&#x3002;</p>
<h3 id="&#x538B;&#x7F29;-double-octet"><a href="#&#x538B;&#x7F29;-double-octet" class="headerlink" title="&#x538B;&#x7F29;: double octet"></a>&#x538B;&#x7F29;: double octet</h3><p>&#x4ECB;&#x4E8E;<code>-128.0</code> &#x548C; <code>127.0</code> &#x4E4B;&#x95F4;&#xFF0C;&#x4E14;&#x6CA1;&#x6709;&#x5C0F;&#x6570;&#x90E8;&#x5206;&#x7684;double&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value = (double) b0</div></pre></td></tr></table></figure></p>
<h3 id="&#x538B;&#x7F29;-double-short"><a href="#&#x538B;&#x7F29;-double-short" class="headerlink" title="&#x538B;&#x7F29;: double short"></a>&#x538B;&#x7F29;: double short</h3><p>&#x4ECB;&#x4E8E;<code>-32768.0</code> &#x548C; <code>32767.0</code> &#x4E4B;&#x95F4;&#xFF0C;&#x4E14;&#x6CA1;&#x6709;&#x5C0F;&#x6570;&#x90E8;&#x5206;&#x7684;double&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E09;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value = (double) (256 * b1 + b0)</div></pre></td></tr></table></figure></p>
<h3 id="&#x538B;&#x7F29;-double-float"><a href="#&#x538B;&#x7F29;-double-float" class="headerlink" title="&#x538B;&#x7F29;: double float"></a>&#x538B;&#x7F29;: double float</h3><p>Doubles which are equivalent to their 32-bit float representation can be represented as the 4-octet float and then cast to double.</p>
<h3 id="Double-&#x793A;&#x4F8B;"><a href="#Double-&#x793A;&#x4F8B;" class="headerlink" title="Double &#x793A;&#x4F8B;"></a>Double &#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">x5b          # 0.0</div><div class="line">x5c          # 1.0</div><div class="line"></div><div class="line">x5d x00      # 0.0</div><div class="line">x5d x80      # -128.0</div><div class="line">x5d x7f      # 127.0</div><div class="line"></div><div class="line">x5e x00 x00  # 0.0</div><div class="line">x5e x80 x00  # -32768.0</div><div class="line">x5e x7f xff  # 32767.0</div><div class="line"></div><div class="line">D x40 x28 x80 x00 x00 x00 x00 x00  # 12.25</div></pre></td></tr></table></figure>
<h2 id="int"><a href="#int" class="headerlink" title="int"></a>int</h2><p>Integer &#x8BED;&#x6CD5;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">int ::= &apos;I&apos; b3 b2 b1 b0</div><div class="line">    ::= [x80-xbf]</div><div class="line">    ::= [xc0-xcf] b0</div><div class="line">    ::= [xd0-xd7] b1 b0</div></pre></td></tr></table></figure></p>
<p>A 32-bit signed integer. An integer is represented by the octet x49 (&#x2018;I&#x2019;) followed by the 4 octets of the integer in big-endian order.</p>
<p>value = (b3 &lt;&lt; 24) + (b2 &lt;&lt; 16) + (b1 &lt;&lt; 8) + b0;</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;&#x6574;&#x6570;"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;&#x6574;&#x6570;" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;&#x6574;&#x6570;"></a>&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;&#x6574;&#x6570;</h3><p>&#x4ECB;&#x4E8E;<code>-16</code> &#x548C; <code>47</code> &#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5355;&#x4E2A;&#x4F4D;&#x4E8E;<code>[x80, xbf]</code>&#x8303;&#x56F4;&#x5185;&#x7684;&#x5B57;&#x8282;&#x8868;&#x793A;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value = code - 0x90</div></pre></td></tr></table></figure></p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;&#x6574;&#x6570;"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;&#x6574;&#x6570;" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;&#x6574;&#x6570;"></a>&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;&#x6574;&#x6570;</h3><p>&#x4ECB;&#x4E8E;<code>-2048</code> &#x548C; <code>2047</code> &#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A;&#xFF0C;&#x9996;&#x5B57;&#x8282;&#x4F4D;&#x4E8E;<code>[xc0, xcf]</code>&#x8303;&#x56F4;&#x5185;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value = ((code - 0xc8) &lt;&lt; 8) + b0;</div></pre></td></tr></table></figure></p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;&#x6574;&#x6570;"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;&#x6574;&#x6570;" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;&#x6574;&#x6570;"></a>&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;&#x6574;&#x6570;</h3><p>&#x4ECB;&#x4E8E;<code>-262144</code> &#x548C; <code>262143</code> &#x4E4B;&#x95F4;&#x7684;&#x6574;&#x6570;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E09;&#x4E2A;&#x5B57;&#x8282;&#x8868;&#x793A;&#xFF0C;&#x9996;&#x5B57;&#x8282;&#x4F4D;&#x4E8E;<code>[xd0, xd7]</code>&#x8303;&#x56F4;&#x5185;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">value = ((code - 0xd4) &lt;&lt; 16) + (b1 &lt;&lt; 8) + b0;</div></pre></td></tr></table></figure></p>
<h3 id="Integer-&#x793A;&#x4F8B;"><a href="#Integer-&#x793A;&#x4F8B;" class="headerlink" title="Integer &#x793A;&#x4F8B;"></a>Integer &#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">x90                # 0</div><div class="line">x80                # -16</div><div class="line">xbf                # 47</div><div class="line"></div><div class="line">xc8 x00            # 0</div><div class="line">xc0 x00            # -2048</div><div class="line">xc7 x00            # -256</div><div class="line">xcf xff            # 2047</div><div class="line"></div><div class="line">xd4 x00 x00        # 0</div><div class="line">xd0 x00 x00        # -262144</div><div class="line">xd7 xff xff        # 262143</div><div class="line"></div><div class="line">I x00 x00 x00 x00  # 0</div><div class="line">I x00 x00 x01 x2c  # 300</div></pre></td></tr></table></figure>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>List &#x8BED;&#x6CD5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">list ::= x55 type value* &apos;Z&apos;   # variable-length list</div><div class="line">     ::= &apos;V&apos; type int value*   # fixed-length list</div><div class="line">     ::= x57 value* &apos;Z&apos;        # variable-length untyped list</div><div class="line">     ::= x58 int value*        # fixed-length untyped list</div><div class="line">     ::= [x70-77] type value*  # fixed-length typed list</div><div class="line">     ::= [x78-7f] value*       # fixed-length untyped list</div></pre></td></tr></table></figure>
<p>An ordered list, like an array. The two list productions are a fixed-length list and a variable length list. Both lists have a type. The type string may be an arbitrary UTF-8 string understood by the service.</p>
<p>Each list item is added to the reference list to handle shared and circular elements. See the ref element.</p>
<p>Any parser expecting a list must also accept a null or a shared ref.</p>
<p>The valid values of type are not specified in this document and may depend on the specific application. For example, a server implemented in a language with static typing which exposes an Hessian interface can use the type information to instantiate the specific array type. On the other hand, a server written in a dynamicly-typed language would likely ignore the contents of type entirely and create a generic array.</p>
<h3 id="Compact-fixed-length-list"><a href="#Compact-fixed-length-list" class="headerlink" title="Compact: fixed length list"></a>Compact: fixed length list</h3><p>Hessian 2.0 allows a compact form of the list for successive lists of the same type where the length is known beforehand. The type and length are encoded by integers, where the type is a reference to an earlier specified type.</p>
<h3 id="List-&#x793A;&#x4F8B;"><a href="#List-&#x793A;&#x4F8B;" class="headerlink" title="List &#x793A;&#x4F8B;"></a>List &#x793A;&#x4F8B;</h3><p>&#x5E8F;&#x5217;&#x5316;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6570;&#x7EC4;: int[] = {0, 1}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">V                    # fixed length, typed list</div><div class="line">  x04 [int           # encoding of int[] type</div><div class="line">  x92                # length = 2</div><div class="line">  x90                # integer 0</div><div class="line">  x91                # integer 1</div></pre></td></tr></table></figure></p>
<p>&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#xFF0C;&#x65E0;&#x7C7B;&#x578B;&#xFF1A; list = {0, 1}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x57                  # variable-length, untyped</div><div class="line">  x90                # integer 0</div><div class="line">  x91                # integer 1</div><div class="line">  Z</div></pre></td></tr></table></figure></p>
<p>&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#xFF0C;&#x9650;&#x5236;&#x7C7B;&#x578B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">x72                # typed list length=2</div><div class="line">  x04 [int         # type for int[] (save as type #0)</div><div class="line">  x90              # integer 0</div><div class="line">  x91              # integer 1</div><div class="line"></div><div class="line">x73                # typed list length = 3</div><div class="line">  x90              # type reference to int[] (integer #0)</div><div class="line">  x92              # integer 2</div><div class="line">  x93              # integer 3</div><div class="line">  x94              # integer 4</div></pre></td></tr></table></figure></p>
<h2 id="long"><a href="#long" class="headerlink" title="long"></a>long</h2><p>Long &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">long ::= L b7 b6 b5 b4 b3 b2 b1 b0</div><div class="line">     ::= [xd8-xef]</div><div class="line">     ::= [xf0-xff] b0</div><div class="line">     ::= [x38-x3f] b1 b0</div><div class="line">     ::= x4c b3 b2 b1 b0</div></pre></td></tr></table></figure></p>
<p>A 64-bit signed integer. An long is represented by the octet x4c (&#x2018;L&#x2019; ) followed by the 8-bytes of the integer in big-endian order.</p>
<p>64&#x4F4D;&#x6709;&#x7B26;&#x53F7;&#x7684;&#x6574;&#x6570;&#x3002;&#x4E00;&#x4E2A;long&#x7C7B;&#x578B;&#x6570;&#x503C;&#x4F7F;&#x7528;&#x5B57;&#x8282;<code>0x4c(&apos;L&apos;)</code>&#x5F00;&#x5934;&#xFF0C;&#x540E;&#x9762;&#x8DDF;&#x7740;8&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x5927;&#x7AEF;&#x6574;&#x6570;&#x8868;&#x793A;&#x3002;</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;long"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;long" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;long"></a>&#x538B;&#x7F29;&#xFF1A;&#x5355;&#x5B57;&#x8282;long</h3><p>Longs between -8 and 15 are represented by a single octet in the range xd8 to xef.</p>
<p>&#x4ECB;&#x4E8E;<code>-8</code>&#x5230;<code>15</code>&#x4E4B;&#x95F4;&#x7684;long&#x7C7B;&#x578B;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x5728;<code>[0xd8, 0xef]</code>&#x7684;&#x516B;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>value = (code - 0xe0)</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;long"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;long" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;long"></a>&#x538B;&#x7F29;&#xFF1A;&#x53CC;&#x5B57;&#x8282;long</h3><p>Longs between -2048 and 2047 are encoded in two octets with the leading byte in the range xf0 to xff.</p>
<p>&#x4ECB;&#x4E8E;<code>-2048</code>&#x5230;<code>2047</code>&#x4E4B;&#x95F4;&#x7684;long&#x7C7B;&#x578B;&#xFF0C;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x503C;&#x8868;&#x793A;&#xFF0C;&#x5176;&#x4E2D;&#x9996;&#x5B57;&#x8282;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x5728;<code>[0xf0, 0xff]</code>&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>value = ((code - 0xf8) &lt;&lt; 8) + b0</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;long"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;long" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;long"></a>&#x538B;&#x7F29;&#xFF1A;&#x4E09;&#x5B57;&#x8282;long</h3><p>Longs between -262144 and 262143 are encoded in three octets with the leading byte in the range x38 to x3f.</p>
<p>&#x4ECB;&#x4E8E;<code>-262144</code>&#x5230;<code>262143</code>&#x4E4B;&#x95F4;&#x7684;long&#x7C7B;&#x578B;&#xFF0C;&#x4F7F;&#x7528;&#x4E09;&#x4E2A;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x503C;&#x8868;&#x793A;&#xFF0C;&#x5176;&#x4E2D;&#x9996;&#x5B57;&#x8282;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x5728;<code>[0x38, 0x3f]</code>&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>value = ((code - 0x3c) &lt;&lt; 16) + (b1 &lt;&lt; 8) + b0</p>
<h3 id="&#x538B;&#x7F29;&#xFF1A;&#x56DB;&#x5B57;&#x8282;long"><a href="#&#x538B;&#x7F29;&#xFF1A;&#x56DB;&#x5B57;&#x8282;long" class="headerlink" title="&#x538B;&#x7F29;&#xFF1A;&#x56DB;&#x5B57;&#x8282;long"></a>&#x538B;&#x7F29;&#xFF1A;&#x56DB;&#x5B57;&#x8282;long</h3><p>Longs between which fit into 32-bits are encoded in five octets with the leading byte x4c.</p>
<p>&#x4E0D;&#x8D85;&#x8FC7;32&#x4F4D;&#x7684;long&#x7C7B;&#x578B;&#x6570;&#x503C;&#xFF0C;&#x91C7;&#x7528;5&#x4E2A;&#x5B57;&#x8282;&#x7F16;&#x7801;&#xFF0C;&#x5176;&#x4E2D;&#x9996;&#x5B57;&#x8282;&#x4E3A;<code>0x4c</code>&#x3002;&#x8F6C;&#x6362;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>value = (b3 &lt;&lt; 24) + (b2 &lt;&lt; 16) + (b1 &lt;&lt; 8) + b0</p>
<h3 id="Long-&#x793A;&#x4F8B;"><a href="#Long-&#x793A;&#x4F8B;" class="headerlink" title="Long &#x793A;&#x4F8B;"></a>Long &#x793A;&#x4F8B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">xe0                  # 0</div><div class="line">xd8                  # -8</div><div class="line">xef                  # 15</div><div class="line"></div><div class="line">xf8 x00              # 0</div><div class="line">xf0 x00              # -2048</div><div class="line">xf7 x00              # -256</div><div class="line">xff xff              # 2047</div><div class="line"></div><div class="line">x3c x00 x00          # 0</div><div class="line">x38 x00 x00          # -262144</div><div class="line">x3f xff xff          # 262143</div><div class="line"></div><div class="line">x4c x00 x00 x00 x00  # 0</div><div class="line">x4c x00 x00 x01 x2c  # 300</div><div class="line"></div><div class="line">L x00 x00 x00 x00 x00 x00 x01 x2c  # 300</div></pre></td></tr></table></figure>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>Map &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">map        ::= M type (value value)* Z</div></pre></td></tr></table></figure></p>
<p>Represents serialized maps and can represent objects. The type element describes the type of the map.</p>
<p>&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#x5316;&#x7684;map&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;type&#x5143;&#x7D20;&#x63CF;&#x8FF0;&#x4E86;map&#x7684;&#x7C7B;&#x578B;&#x3002;</p>
<p>The type may be empty, i.e. a zero length. The parser is responsible for choosing a type if one is not specified. For objects, unrecognized keys will be ignored.</p>
<p><code>type</code>&#x5143;&#x7D20;&#x53EF;&#x80FD;&#x4E3A;&#x7A7A;&#xFF0C;&#x5373;&#x96F6;&#x957F;&#x5EA6;&#x3002;&#x5F53;type&#x672A;&#x6307;&#x5B9A;&#x65F6;&#xFF0C;&#x7531;&#x89E3;&#x6790;&#x5668;&#x8D1F;&#x8D23;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x3002;&#x5BF9;&#x4E8E;<code>object</code>&#xFF0C;&#x4E0D;&#x80FD;&#x8BC6;&#x522B;&#x7684;key&#x5C06;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p>Each map is added to the reference list. Any time the parser expects a map, it must also be able to support a null or a ref.</p>
<p>&#x6BCF;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#x90FD;&#x5C06;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x53C2;&#x8003;&#x96C6;&#x5408;&#x4E2D;&#x3002;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#xFF0C;&#x89E3;&#x6790;&#x5668;&#x90FD;&#x671F;&#x671B;&#x6709;&#x4E00;&#x4E2A;&#x6620;&#x5C04;&#xFF0C;&#x5B83;&#x5FC5;&#x987B;&#x652F;&#x6301;<code>null</code>&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x3002;</p>
<p>The type is chosen by the service.</p>
<p>&#x7C7B;&#x578B;&#x7531;service&#x9009;&#x62E9;&#x3002;</p>
<h3 id="Map-&#x793A;&#x4F8B;"><a href="#Map-&#x793A;&#x4F8B;" class="headerlink" title="Map &#x793A;&#x4F8B;"></a>Map &#x793A;&#x4F8B;</h3><p>&#x7A00;&#x758F;&#x6570;&#x7EC4;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">map = <span class="keyword">new</span> HashMap();</div><div class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">1</span>), <span class="string">&quot;fee&quot;</span>);</div><div class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">16</span>), <span class="string">&quot;fie&quot;</span>);</div><div class="line">map.put(<span class="keyword">new</span> Integer(<span class="number">256</span>), <span class="string">&quot;foe&quot;</span>);</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">H           # untyped map (HashMap for Java)</div><div class="line">  x91       # 1</div><div class="line">  x03 fee   # &quot;fee&quot;</div><div class="line"></div><div class="line">  xa0       # 16</div><div class="line">  x03 fie   # &quot;fie&quot;</div><div class="line"></div><div class="line">  xc9 x00   # 256</div><div class="line">  x03 foe   # &quot;foe&quot;</div><div class="line"></div><div class="line">  Z</div></pre></td></tr></table></figure>
<p>Java&#x5BF9;&#x8C61;&#x7684;map&#x8868;&#x793A;&#xFF1A;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</div><div class="line">  String color = <span class="string">&quot;aquamarine&quot;</span>;</div><div class="line">  String model = <span class="string">&quot;Beetle&quot;</span>;</div><div class="line">  <span class="keyword">int</span> mileage = <span class="number">65536</span>;</div><div class="line">}</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">M</div><div class="line">  x13 com.caucho.test.Car  # type</div><div class="line"></div><div class="line">  x05 color                # color field</div><div class="line">  x0a aquamarine</div><div class="line"></div><div class="line">  x05 model                # model field</div><div class="line">  x06 Beetle</div><div class="line"></div><div class="line">  x07 mileage              # mileage field</div><div class="line">  I x00 x01 x00 x00</div><div class="line">  Z</div></pre></td></tr></table></figure>
<h2 id="null"><a href="#null" class="headerlink" title="null"></a>null</h2><p>Null &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">null ::= N</div></pre></td></tr></table></figure></p>
<p>Null &#x8868;&#x793A;&#x7A7A;&#x6307;&#x9488;&#x3002;&#x5B57;&#x8282; <code>&apos;N&apos;</code> &#x8868;&#x793A;<code>null</code>&#x503C;&#x3002;</p>
<h2 id="object"><a href="#object" class="headerlink" title="object"></a>object</h2><p>Object &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class-def  ::= &apos;C&apos; string int string*</div><div class="line"></div><div class="line">object     ::= &apos;O&apos; int value*</div><div class="line">           ::= [x60-x6f] value*</div></pre></td></tr></table></figure></p>
<h3 id="&#x538B;&#x7F29;-class-definition"><a href="#&#x538B;&#x7F29;-class-definition" class="headerlink" title="&#x538B;&#x7F29;: class definition"></a>&#x538B;&#x7F29;: class definition</h3><p>Hessian 2.0 has a compact object form where the field names are only serialized once. </p>
<p>Hessian 2.0&#x5177;&#x6709;&#x7D27;&#x51D1;&#x7684;&#x5BF9;&#x8C61;&#x5F62;&#x5F0F;&#xFF0C;&#x5176;&#x4E2D;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x4EC5;&#x88AB;&#x5E8F;&#x5217;&#x5316;&#x4E00;&#x6B21;&#x3002;</p>
<p>Following objects only need to serialize their values.</p>
<p>&#x4E4B;&#x540E;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5E8F;&#x5217;&#x5316;&#x5B83;&#x4EEC;&#x7684;&#x503C;&#x3002;</p>
<p>The object definition includes a mandatory type string, the number of fields, and the field names. The object definition is stored in the object definition map and will be referenced by object instances with an integer reference.</p>
<h3 id="&#x538B;&#x7F29;-object-instantiation"><a href="#&#x538B;&#x7F29;-object-instantiation" class="headerlink" title="&#x538B;&#x7F29;: object instantiation"></a>&#x538B;&#x7F29;: object instantiation</h3><p>Hessian 2.0 has a compact object form where the field names are only serialized once. Following objects only need to serialize their values.</p>
<p>Hessian 2.0&#x5177;&#x6709;&#x7D27;&#x51D1;&#x7684;&#x5BF9;&#x8C61;&#x5F62;&#x5F0F;&#xFF0C;&#x5176;&#x4E2D;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x4EC5;&#x88AB;&#x5E8F;&#x5217;&#x5316;&#x4E00;&#x6B21;&#x3002;</p>
<p>The object instantiation creates a new object based on a previous definition. The integer value refers to the object definition.</p>
<p>&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x57FA;&#x4E8E;&#x524D;&#x9762;&#x7684;&#x5B9A;&#x4E49;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x5BF9;&#x8C61;&#x3002;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6307;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<h3 id="Object-&#x793A;&#x4F8B;"><a href="#Object-&#x793A;&#x4F8B;" class="headerlink" title="Object &#x793A;&#x4F8B;"></a>Object &#x793A;&#x4F8B;</h3><p>Object &#x5E8F;&#x5217;&#x5316;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>{</div><div class="line">  String color;</div><div class="line">  String model;</div><div class="line">}</div><div class="line"></div><div class="line">out.writeObject(<span class="keyword">new</span> Car(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;corvette&quot;</span>));</div><div class="line">out.writeObject(<span class="keyword">new</span> Car(<span class="string">&quot;green&quot;</span>, <span class="string">&quot;civic&quot;</span>));</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">C                        # object definition (#0)</div><div class="line">  x0b example.Car        # type is example.Car</div><div class="line">  x92                    # two fields</div><div class="line">  x05 color              # color field name</div><div class="line">  x05 model              # model field name</div><div class="line"></div><div class="line">O                        # object def (long form)</div><div class="line">  x90                    # object definition #0</div><div class="line">  x03 red                # color field value</div><div class="line">  x08 corvette           # model field value</div><div class="line"></div><div class="line">x60                      # object def #0 (short form)</div><div class="line">  x05 green              # color field value</div><div class="line">  x05 civic              # model field value</div></pre></td></tr></table></figure>
<p>&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> enum Color {</div><div class="line">  RED,</div><div class="line">  GREEN,</div><div class="line">  BLUE,</div><div class="line">}</div><div class="line"></div><div class="line">out.writeObject(Color.RED);</div><div class="line">out.writeObject(Color.GREEN);</div><div class="line">out.writeObject(Color.BLUE);</div><div class="line">out.writeObject(Color.GREEN);</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">C                         # class definition #0</div><div class="line">  x0b example.Color       # type is example.Color</div><div class="line">  x91                     # one field</div><div class="line">  x04 name                # enumeration field is &quot;name&quot;</div><div class="line"></div><div class="line">x60                       # object #0 (class def #0)</div><div class="line">  x03 RED                 # RED value</div><div class="line"></div><div class="line">x60                       # object #1 (class def #0)</div><div class="line">  x90                     # object definition ref #0</div><div class="line">  x05 GREEN               # GREEN value</div><div class="line"></div><div class="line">x60                       # object #2 (class def #0)</div><div class="line">  x04 BLUE                # BLUE value</div><div class="line"></div><div class="line">x51 x91                   # object ref #1, i.e. Color.GREEN</div></pre></td></tr></table></figure>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>Ref &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ref ::= x51 int</div></pre></td></tr></table></figure></p>
<p>An integer referring to a previous list, map, or object instance. As each list, map or object is read from the input stream, it is assigned the integer position in the stream, i.e. the first list or map is &#x2018;0&#x2019;, the next is &#x2018;1&#x2019;, etc. A later ref can then use the previous object. Writers MAY generate refs. Parsers MUST be able to recognize them.</p>
<p>&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x524D;&#x9762;&#x7684;list&#x3001;map&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x4ECE;&#x8F93;&#x5165;&#x6D41;&#x4E2D;&#x8BFB;&#x5230;&#x7684;list&#x3001;map&#x6216;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x90FD;&#x88AB;&#x6307;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;list&#x6216;map&#x7684;&#x4F4D;&#x7F6E;&#x662F;<code>0</code>&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x662F;<code>1</code>,&#x7B49;&#x7B49;&#x3002;&#x540E;&#x9762;&#x7684;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x6307;&#x5411;&#x524D;&#x9762;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5199;&#x5165;&#x5668;&#x53EF;&#x80FD;&#x4F1A;&#x751F;&#x6210;&#x5F15;&#x7528;&#xFF0C;&#x89E3;&#x6790;&#x5668;&#x4E00;&#x5B9A;&#x8981;&#x80FD;&#x591F;&#x6CE8;&#x518C;&#x5B83;&#x4EEC;&#x3002;</p>
<p>&#x8BD1;&#x8005;&#x6CE8;&#xFF1A;<code>ref</code>&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x6307;&#x9488;&#x3002;</p>
<p>ref can refer to incompletely-read items. For example, a circular linked-list will refer to the first link before the entire list has been read.</p>
<p>ref&#x53EF;&#x4EE5;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x5DF2;&#x7ECF;&#x8BFB;&#x53D6;&#x5B8C;&#x7684;&#x9879;&#x3002;&#x4F8B;&#x5982;&#xFF1A;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x94FE;&#x8868;&#x5728;&#x6574;&#x4E2A;&#x8BFB;&#x53D6;&#x5B8C;&#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6307;&#x5411;&#x7B2C;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;&#x3002;</p>
<p>A possible implementation would add each map, list, and object to an array as it is read. The ref will return the corresponding value from the array. To support circular structures, the implementation would store the map, list or object immediately, before filling in the contents.</p>
<p>Each map or list is stored into an array as it is parsed. ref selects one of the stored objects. The first object is numbered &#x2018;0&#x2019;.</p>
<h3 id="Ref-&#x793A;&#x4F8B;"><a href="#Ref-&#x793A;&#x4F8B;" class="headerlink" title="Ref &#x793A;&#x4F8B;"></a>Ref &#x793A;&#x4F8B;</h3><p>Circular list<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">list = new LinkedList();</div><div class="line">list.data = 1;</div><div class="line">list.tail = list;</div><div class="line"></div><div class="line">---</div><div class="line">C</div><div class="line">  x0a LinkedList</div><div class="line">  x92</div><div class="line">  x04 head</div><div class="line">  x04 tail</div><div class="line"></div><div class="line">o x90      # object stores ref #0</div><div class="line">  x91      # data = 1</div><div class="line">  x51 x90  # next field refers to itself, i.e. ref #0</div></pre></td></tr></table></figure></p>
<p>ref only refers to list, map and objects elements. Strings and binary data, in particular, will only share references if they&#x2019;re wrapped in a list or map.</p>
<h3 id="string"><a href="#string" class="headerlink" title="string"></a>string</h3><p>String &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">string ::= x52 b1 b0 &lt;utf8-data&gt; string</div><div class="line">       ::= S b1 b0 &lt;utf8-data&gt;</div><div class="line">       ::= [x00-x1f] &lt;utf8-data&gt;</div><div class="line">       ::= [x30-x33] b0 &lt;utf8-data&gt;</div></pre></td></tr></table></figure></p>
<p>A 16-bit unicode character string encoded in UTF-8. Strings are encoded in chunks. x53 (&#x2018;S&#x2019;) represents the final chunk and x52 (&#x2018;R&#x2019;) represents any non-final chunk. Each chunk has a 16-bit unsigned integer length value.</p>
<p>String&#x662F;&#x4EE5;UTF-8&#x7F16;&#x7801;&#x7684;16&#x4F4D;&#x7684;unicode&#x5B57;&#x7B26;&#x4E32;&#x3002;String&#x4F7F;&#x7528;&#x5757;&#x7F16;&#x7801;&#x3002;<code>0x53(&apos;S&apos;)</code>&#x8868;&#x793A;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5757;&#xFF0C;<code>0x52(&apos;R&apos;)</code>&#x8868;&#x793A;&#x9664;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5757;&#x4EE5;&#x5916;&#x7684;&#x5757;&#x3002;&#x6BCF;&#x4E2A;&#x5757;&#x90FD;&#x6709;&#x4E00;&#x4E2A;16&#x4F4D;&#x7684;&#x957F;&#x5EA6;&#x503C;&#x3002;</p>
<p>The length is the number of 16-bit characters, which may be different than the number of bytes.</p>
<p>&#x957F;&#x5EA6;&#x662F;&#x6307;16&#x4F4D;&#x5B57;&#x7B26;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x53EF;&#x80FD;&#x548C;&#x5B57;&#x8282;&#x7684;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<p>String chunks may not split surrogate pairs.</p>
<h3 id="&#x538B;&#x7F29;-short-strings"><a href="#&#x538B;&#x7F29;-short-strings" class="headerlink" title="&#x538B;&#x7F29;: short strings"></a>&#x538B;&#x7F29;: short strings</h3><p>Strings with length less than 32 may be encoded with a single octet length [x00-x1f].</p>
<p>&#x957F;&#x5EA6;&#x5C11;&#x4E8E;32&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x5728;<code>[x00-x1f]</code>&#x7684;&#x516B;&#x8FDB;&#x5236;&#x6570;&#x503C;&#x7F16;&#x7801;&#x5B83;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#xFF1A;</p>
<p>value = code</p>
<h2 id="String-&#x793A;&#x4F8B;"><a href="#String-&#x793A;&#x4F8B;" class="headerlink" title="String &#x793A;&#x4F8B;"></a>String &#x793A;&#x4F8B;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">x00                 # &quot;&quot;, empty string</div><div class="line">x05 hello           # &quot;hello&quot;</div><div class="line">x01 xc3 x83         # &quot;\u00c3&quot;</div><div class="line"></div><div class="line">S x00 x05 hello     # &quot;hello&quot; in long form</div><div class="line"></div><div class="line">x52 x00 x07 hello,  # &quot;hello, world&quot; split into two chunks</div><div class="line">x05 world</div></pre></td></tr></table></figure>
<h2 id="type"><a href="#type" class="headerlink" title="type"></a>type</h2><p>Type &#x8BED;&#x6CD5;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">type ::= string</div><div class="line">     ::= int</div></pre></td></tr></table></figure></p>
<p>A <code>map</code> or <code>list</code> includes a type attribute indicating the type name of the map or list for object-oriented languages.</p>
<p>Each type is added to the <code>type map</code> for future reference.</p>
<h2 id="&#x538B;&#x7F29;-type-&#x5F15;&#x7528;"><a href="#&#x538B;&#x7F29;-type-&#x5F15;&#x7528;" class="headerlink" title="&#x538B;&#x7F29;: type &#x5F15;&#x7528;"></a>&#x538B;&#x7F29;: type &#x5F15;&#x7528;</h2><p>Repeated type strings MAY use the <code>type map</code> to refer to a previously used type. The type reference is zero-based over all the types encountered during parsing.</p>
<h1 id="&#x5F15;&#x7528;&#x6620;&#x5C04;"><a href="#&#x5F15;&#x7528;&#x6620;&#x5C04;" class="headerlink" title="&#x5F15;&#x7528;&#x6620;&#x5C04;"></a>&#x5F15;&#x7528;&#x6620;&#x5C04;</h1><p>Hessian 2.0 &#x6709;&#x4E09;&#x79CD;&#x5185;&#x7F6E;&#x5F15;&#x7528;&#x6620;&#x5C04;:</p>
<ul class="ui list">
<li>An map/object/list reference map.</li>
<li>An class definition map.</li>
<li>A type (class name) map.</li>
</ul>
<p>The value reference map lets Hessian support arbitrary graphs, and recursive and circular data structures.</p>
<p>The class and type maps improve Hessian efficiency by avoiding repetition of common string data.</p>
<h2 id="&#x503C;&#x5F15;&#x7528;"><a href="#&#x503C;&#x5F15;&#x7528;" class="headerlink" title="&#x503C;&#x5F15;&#x7528;"></a>&#x503C;&#x5F15;&#x7528;</h2><p>Hessian supports arbitrary graphs by adding <code>list</code>, <code>object</code>, and <code>map</code> as it encounters them in the bytecode stream.</p>
<p>Parsers MUST store each list, object and map in the reference map as they are encountered.</p>
<p>The stored objects can be used with a ref bytecode.</p>
<h2 id="class-&#x5F15;&#x7528;"><a href="#class-&#x5F15;&#x7528;" class="headerlink" title="class &#x5F15;&#x7528;"></a>class &#x5F15;&#x7528;</h2><p>Each <code>object definition</code> is automatically added to the class-map. Parsers MUST add a class definition to the class map as each is encountered. Following object instances will refer to the defined class.</p>
<h2 id="type-&#x5F15;&#x7528;"><a href="#type-&#x5F15;&#x7528;" class="headerlink" title="type &#x5F15;&#x7528;"></a>type &#x5F15;&#x7528;</h2><p>The <code>type</code> strings for <code>map</code> and <code>list</code> values are stored in a type map for reference.</p>
<p>Parsers MUST add a type string to the type map as each is encountered.</p>
<h1 id="&#x5B57;&#x8282;&#x6620;&#x5C04;"><a href="#&#x5B57;&#x8282;&#x6620;&#x5C04;" class="headerlink" title="&#x5B57;&#x8282;&#x6620;&#x5C04;"></a>&#x5B57;&#x8282;&#x6620;&#x5C04;</h1><p>Hessian is organized as a bytecode protocol. A Hessian reader is essentially a switch statement on the initial octet.</p>
<p>&#x5B57;&#x8282;&#x7F16;&#x7801;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">x00 - x1f    # utf-8 string length 0-32</div><div class="line">x20 - x2f    # binary data length 0-16</div><div class="line">x30 - x33    # utf-8 string length 0-1023</div><div class="line">x34 - x37    # binary data length 0-1023</div><div class="line">x38 - x3f    # three-octet compact long (-x40000 to x3ffff)</div><div class="line">x40          # reserved (expansion/escape)</div><div class="line">x41          # 8-bit binary data non-final chunk (&apos;A&apos;)</div><div class="line">x42          # 8-bit binary data final chunk (&apos;B&apos;)</div><div class="line">x43          # object type definition (&apos;C&apos;)</div><div class="line">x44          # 64-bit IEEE encoded double (&apos;D&apos;)</div><div class="line">x45          # reserved</div><div class="line">x46          # boolean false (&apos;F&apos;)</div><div class="line">x47          # reserved</div><div class="line">x48          # untyped map (&apos;H&apos;)</div><div class="line">x49          # 32-bit signed integer (&apos;I&apos;)</div><div class="line">x4a          # 64-bit UTC millisecond date</div><div class="line">x4b          # 32-bit UTC minute date</div><div class="line">x4c          # 64-bit signed long integer (&apos;L&apos;)</div><div class="line">x4d          # map with type (&apos;M&apos;)</div><div class="line">x4e          # null (&apos;N&apos;)</div><div class="line">x4f          # object instance (&apos;O&apos;)</div><div class="line">x50          # reserved</div><div class="line">x51          # reference to map/list/object - integer (&apos;Q&apos;)</div><div class="line">x52          # utf-8 string non-final chunk (&apos;R&apos;)</div><div class="line">x53          # utf-8 string final chunk (&apos;S&apos;)</div><div class="line">x54          # boolean true (&apos;T&apos;)</div><div class="line">x55          # variable-length list/vector (&apos;U&apos;)</div><div class="line">x56          # fixed-length list/vector (&apos;V&apos;)</div><div class="line">x57          # variable-length untyped list/vector (&apos;W&apos;)</div><div class="line">x58          # fixed-length untyped list/vector (&apos;X&apos;)</div><div class="line">x59          # long encoded as 32-bit int (&apos;Y&apos;)</div><div class="line">x5a          # list/map terminator (&apos;Z&apos;)</div><div class="line">x5b          # double 0.0</div><div class="line">x5c          # double 1.0</div><div class="line">x5d          # double represented as byte (-128.0 to 127.0)</div><div class="line">x5e          # double represented as short (-32768.0 to 327676.0)</div><div class="line">x5f          # double represented as float</div><div class="line">x60 - x6f    # object with direct type</div><div class="line">x70 - x77    # fixed list with direct length</div><div class="line">x78 - x7f    # fixed untyped list with direct length</div><div class="line">x80 - xbf    # one-octet compact int (-x10 to x3f, x90 is 0)</div><div class="line">xc0 - xcf    # two-octet compact int (-x800 to x7ff)</div><div class="line">xd0 - xd7    # three-octet compact int (-x40000 to x3ffff)</div><div class="line">xd8 - xef    # one-octet compact long (-x8 to xf, xe0 is 0)</div><div class="line">xf0 - xff    # two-octet compact long (-x800 to x7ff, xf8 is 0)</div></pre></td></tr></table></figure></p>
<h1 id="&#x4F5C;&#x8005;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;"><a href="#&#x4F5C;&#x8005;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;" class="headerlink" title="&#x4F5C;&#x8005;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;"></a>&#x4F5C;&#x8005;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Scott Ferguson</div><div class="line">Caucho Technology Inc.</div><div class="line">P.O. Box 9001</div><div class="line">La Jolla, CA 92038</div><div class="line">USA</div><div class="line">Email: 	ferg@caucho.com</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Emil Ong</div><div class="line">Caucho Technology Inc.</div><div class="line">P.O. Box 9001</div><div class="line">La Jolla, CA 92038</div><div class="line">USA</div><div class="line">Email: 	emil@caucho.com</div></pre></td></tr></table></figure>
<h1 id="Full-Copyright-Statement"><a href="#Full-Copyright-Statement" class="headerlink" title="Full Copyright Statement"></a>Full Copyright Statement</h1><p>Copyright &#xA9; The IETF Trust (2007).</p>
<p>This document is subject to the rights, licenses and restrictions contained in BCP 78, and except as set forth therein, the authors retain all their rights.</p>
<p>This document and the information contained herein are provided on an &#x201C;AS IS&#x201D; basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>
<h1 id="Intellectual-Property"><a href="#Intellectual-Property" class="headerlink" title="Intellectual Property"></a>Intellectual Property</h1><p>The IETF takes no position regarding the validity or scope of any Intellectual Property Rights or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; nor does it represent that it has made any independent effort to identify any such rights. Information on the procedures with respect to rights in RFC documents can be found in BCP 78 and BCP 79.</p>
<p>Copies of IPR disclosures made to the IETF Secretariat and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this specification can be obtained from the IETF on-line IPR repository at <a href="http://www.ietf.org/ipr" target="_blank" rel="external">http://www.ietf.org/ipr</a>.</p>
<p>The IETF invites any interested party to bring to its attention any copyrights, patents or patent applications, or other proprietary rights that may cover technology that may be required to implement this standard. Please address the information to the IETF at ietf-ipr@ietf.org.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hessian 2.0 &amp;#x5E8F;&amp;#x5217;&amp;#x5316;&amp;#x534F;&amp;#x8BAE;&amp;#x7FFB;&amp;#x8BD1;&amp;#xFF0C;&amp;#x539F;&amp;#x6587;&amp;#x94FE;&amp;#x63A5;&lt;a href=&quot;http://hessian.cauch
    
    </summary>
    
      <category term="java" scheme="https://yyhan.github.io/categories/java/"/>
    
    
      <category term="hessian" scheme="https://yyhan.github.io/tags/hessian/"/>
    
      <category term="序列化" scheme="https://yyhan.github.io/tags/%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Spring MVC基本配置</title>
    <link href="https://yyhan.github.io/2017/06/15/Spring-MVC%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"/>
    <id>https://yyhan.github.io/2017/06/15/Spring-MVC基本配置/</id>
    <published>2017-06-15T14:25:45.000Z</published>
    <updated>2017-06-15T14:57:09.491Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="spring" scheme="https://yyhan.github.io/categories/spring/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="spring" scheme="https://yyhan.github.io/tags/spring/"/>
    
  </entry>
  
  <entry>
    <title>hessian 常见问题</title>
    <link href="https://yyhan.github.io/2017/06/15/hessian-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <id>https://yyhan.github.io/2017/06/15/hessian-常见问题/</id>
    <published>2017-06-15T13:22:54.000Z</published>
    <updated>2017-06-15T14:24:28.865Z</updated>
    
    <content type="html"><![CDATA[<h1 id="hessian&#x63A5;&#x53E3;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x81F4;&#x95EE;&#x9898;"><a href="#hessian&#x63A5;&#x53E3;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x81F4;&#x95EE;&#x9898;" class="headerlink" title="hessian&#x63A5;&#x53E3;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x81F4;&#x95EE;&#x9898;"></a>hessian&#x63A5;&#x53E3;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x81F4;&#x95EE;&#x9898;</h1><h2 id="&#x5B57;&#x6BB5;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x81F4;"><a href="#&#x5B57;&#x6BB5;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x81F4;" class="headerlink" title="&#x5B57;&#x6BB5;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x81F4;"></a>&#x5B57;&#x6BB5;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x81F4;</h2><p>hessian&#x5141;&#x8BB8;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x5BF9;&#x8C61;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;&#x5B57;&#x6BB5;&#x90FD;&#x4E0D;&#x5F71;&#x54CD;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x540C;&#x540D;&#x5B57;&#x6BB5;&#xFF0C;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x4E00;&#x81F4;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x5F02;&#x5E38;&#xFF1A;</p>
<ul class="ui list">
<li>&#x4F8B;&#x5982;&#x670D;&#x52A1;&#x7AEF;&#x4E3A;BigDecimal&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E3A;int&#xFF1A;<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">com.caucho.hessian.client.HessianRuntimeException: com.caucho.hessian.io.HessianFieldException: com.demo.entity.DemoBean.number: expected integer at 0x43 java.math.BigDecimal (1233456)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E0D;&#x4E00;&#x81F4;"><a href="#&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E0D;&#x4E00;&#x81F4;" class="headerlink" title="&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E0D;&#x4E00;&#x81F4;"></a>&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E0D;&#x4E00;&#x81F4;</h2><p>&#x5F53;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x671F;&#x671B;&#x83B7;&#x53D6;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x81F4;&#x65F6;&#xFF0C;&#x6BD4;&#x5982;&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A;A&#xFF0C;&#x4F46;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x53D7;&#x7684;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A;B&#xFF0C;&#x6B64;&#x65F6;hessian&#x4F7F;&#x7528;map&#x6620;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#x89E3;&#x6790;&#xFF0C;&#x6839;&#x636E;&#x5B57;&#x6BB5;&#x540D;&#x6620;&#x5C04;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x8BB0;&#x5F55;&#x4E00;&#x4E9B;&#x8B66;&#x544A;&#x65E5;&#x5FD7;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[2017-06-15 22:17:00,267] &#x8B66;&#x544A; com.caucho.hessian.io.SerializerFactory getDeserializer - Hessian/Burlap: &apos;com.demo.entity.DemoBean&apos; is an unknown class in sun.misc.Launcher$AppClassLoader@18b4aac2:</div><div class="line">java.lang.ClassNotFoundException: com.demo.entity.DemoBean </div><div class="line">[2017-06-15 22:17:00,282] &#x8F83;&#x8BE6;&#x7EC6; com.caucho.hessian.io.SerializerFactory getDeserializer - java.lang.ClassNotFoundException: com.demo.entity.DemoBean </div><div class="line">[2017-06-15 22:17:01,194] &#x8B66;&#x544A; com.caucho.hessian.io.SerializerFactory getDeserializer - Hessian/Burlap: &apos;com.demo.entity.DemoBean&apos; is an unknown class in sun.misc.Launcher$AppClassLoader@18b4aac2:</div><div class="line">java.lang.ClassNotFoundException: com.demo.entity.DemoBean </div><div class="line">[2017-06-15 22:17:01,194] &#x8F83;&#x8BE6;&#x7EC6; com.caucho.hessian.io.SerializerFactory getDeserializer - java.lang.ClassNotFoundException: com.demo.entity.DemoBean </div><div class="line">MyHessianServlet.getDeserializer: com.demo.entity.Demo2Bean</div><div class="line">[2017-06-15 22:17:01,196] &#x8BE6;&#x7EC6; com.caucho.hessian.io.SerializerFactory getObjectDeserializer - hessian: expected deserializer &apos;com.demo.entity.Demo2Bean&apos; at &apos;com.demo.entity.DemoBean&apos; (java.util.HashMap)</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;hessian&amp;#x63A5;&amp;#x53E3;&amp;#x670D;&amp;#x52A1;&amp;#x7AEF;&amp;#x548C;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x5BF9;&amp;#x8C61;&amp;#x4E0D;&amp;#x4E00;&amp;#x81F4;&amp;#x95EE;&amp;#x98
    
    </summary>
    
      <category term="hessian" scheme="https://yyhan.github.io/categories/hessian/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="hessian" scheme="https://yyhan.github.io/tags/hessian/"/>
    
  </entry>
  
  <entry>
    <title>hessian 序列化BigDecimal问题</title>
    <link href="https://yyhan.github.io/2017/06/13/hessian-%E5%BA%8F%E5%88%97%E5%8C%96BigDecimal%E9%97%AE%E9%A2%98/"/>
    <id>https://yyhan.github.io/2017/06/13/hessian-序列化BigDecimal问题/</id>
    <published>2017-06-13T14:49:43.000Z</published>
    <updated>2017-06-18T13:16:02.180Z</updated>
    
    <content type="html"><![CDATA[<p>hessian&#x5904;&#x7406;BigDecimal&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C06;BigDecimal&#x4F5C;&#x4E3A;Object&#x5BF9;&#x8C61;&#x5904;&#x7406;&#xFF0C;&#x5C1D;&#x8BD5;&#x5C06;BigDecimal&#x7684;&#x5404;&#x4E2A;&#x5B57;&#x6BB5;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4F20;&#x8F93;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;BigDecimal&#x4F4D;0&#x3002;</p>
<p>&#x76EE;&#x524D;&#x6709;&#x4E09;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<ul class="ui list">
<li>&#x5BF9;hessian&#x91CD;&#x65B0;&#x6253;&#x5305;</li>
<li>&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;</li>
<li>&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>AbstractSerializerFactory</code></li>
</ul>
<h1 id="&#x5BF9;hessian&#x91CD;&#x65B0;&#x6253;&#x5305;"><a href="#&#x5BF9;hessian&#x91CD;&#x65B0;&#x6253;&#x5305;" class="headerlink" title="&#x5BF9;hessian&#x91CD;&#x65B0;&#x6253;&#x5305;"></a>&#x5BF9;hessian&#x91CD;&#x65B0;&#x6253;&#x5305;</h1><p>&#x521B;&#x5EFA;<code>META-INF/hessian/serializers</code>&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java.math.BigDecimal=com.caucho.hessian.io.StringValueSerializer</div></pre></td></tr></table></figure></p>
<p>&#x521B;&#x5EFA;<code>META-INF/hessian/deserializers</code>&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java.math.BigDecimal=com.caucho.hessian.io.BigDecimalDeserializer</div></pre></td></tr></table></figure></p>
<p>&#x6307;&#x5B9A;&#x4F7F;&#x7528;<code>StringValueSerializer</code>&#x5E8F;&#x5217;&#x5316;BigDecimal&#x5BF9;&#x8C61;&#xFF0C;&#x4F7F;&#x7528;<code>BigDecimalDeserializer</code>&#x53CD;&#x5E8F;&#x5217;&#x5316;BigDecimal&#x5BF9;&#x8C61;&#x3002;</p>
<h1 id="&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;"><a href="#&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;" class="headerlink" title="&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;"></a>&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;</h1><p>&#x5B9E;&#x73B0;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#xFF08;<code>com.caucho.hessian.io.Serializer</code>&#xFF09;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x63A5;&#x53E3;&#xFF08;<code>com.caucho.hessian.io.Deserializer</code>&#xFF09;&#x3002;</p>
<ul class="ui list">
<li>&#x5E8F;&#x5217;&#x5316;&#x7684;&#x7C7B;&#x540D;&#x5FC5;&#x987B;&#x4E3A; <code>cl.getName() + &quot;HessianSerializer&quot;</code></li>
<li>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x7C7B;&#x540D;&#x5FC5;&#x987B;&#x4E3A; <code>cl.getName() + &quot;HessianDeserializer&quot;</code></li>
<li>&#x540C;&#x65F6;&#x5FC5;&#x987B;&#x548C;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x5305;&#x8DEF;&#x5F84;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x3002;</li>
</ul>
<h1 id="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;AbstractSerializerFactory"><a href="#&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;AbstractSerializerFactory" class="headerlink" title="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;AbstractSerializerFactory"></a>&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;<code>AbstractSerializerFactory</code></h1><p>&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5230;&#x9ED8;&#x8BA4;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382;&#x4E2D;&#x3002;&#x6709;&#x4E09;&#x5904;&#x6539;&#x52A8;&#xFF1A;</p>
<ul class="ui list">
<li><p>&#x81EA;&#x5B9A;&#x4E49;<code>AbstractSerializerFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cloudin.hessian.support;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.caucho.hessian.io.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by YFHan on 2017/6/15 0015.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAbstractSerializerFactory</span> <span class="keyword">extends</span> <span class="title">AbstractSerializerFactory</span> </span>{</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> Map&lt;String, Serializer&gt; serializerMap = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">private</span> Map&lt;String, Deserializer&gt; deserializerMap = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyAbstractSerializerFactory</span><span class="params">()</span> </span>{</div><div class="line">        serializerMap.put(BigDecimal.class.getName(), <span class="keyword">new</span> StringValueSerializer());</div><div class="line">        deserializerMap.put(BigDecimal.class.getName(), <span class="keyword">new</span> BigDecimalDeserializer());</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Serializer <span class="title">getSerializer</span><span class="params">(Class cl)</span> <span class="keyword">throws</span> HessianProtocolException </span>{</div><div class="line">        <span class="keyword">return</span> serializerMap.get(cl.getName());</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Deserializer <span class="title">getDeserializer</span><span class="params">(Class cl)</span> <span class="keyword">throws</span> HessianProtocolException </span>{</div><div class="line">        <span class="keyword">return</span> deserializerMap.get(cl.getName());</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p>&#x81EA;&#x5B9A;&#x4E49;<code>HessianServlet</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cloudin.hessian.support;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.caucho.hessian.io.*;</div><div class="line"><span class="keyword">import</span> com.caucho.hessian.server.HessianServlet;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * &#x81EA;&#x5B9A;&#x4E49;HessianServlet</div><div class="line"> * Created by YFHan on 2017/6/12 0012.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHessianServlet</span> <span class="keyword">extends</span> <span class="title">HessianServlet</span> </span>{</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> SerializerFactory serializerFactory;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(javax.servlet.ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>{</div><div class="line">        <span class="keyword">super</span>.init(config);</div><div class="line">        serializerFactory = <span class="keyword">super</span>.getSerializerFactory();</div><div class="line">        serializerFactory.addFactory(<span class="keyword">new</span> MyAbstractSerializerFactory());</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> SerializerFactory <span class="title">getSerializerFactory</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">return</span> serializerFactory;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
</li>
<li><p>&#x5411;<code>HessianProxyFactory</code>&#x4E2D;&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382;&#x5B9E;&#x4F8B;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">HessianProxyFactory hessianProxyFactory = <span class="keyword">new</span> HessianProxyFactory();</div><div class="line">hessianProxyFactory.getSerializerFactory().addFactory(<span class="keyword">new</span> MyAbstractSerializerFactory());</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><ul class="ui list">
<li>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5199;&#x4EFB;&#x4F55;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x7EF4;&#x62A4;hessian&#x7684;&#x6253;&#x5305;</li>
<li>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x7A0B;&#x5EA6;&#x5F88;&#x9AD8;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x5BF9;hessian&#x7684;&#x5E8F;&#x5217;&#x5316;&#x534F;&#x8BAE;&#x975E;&#x5E38;&#x4E86;&#x89E3;&#xFF0C;&#x4F46;&#x662F;&#x5DE5;&#x4F5C;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x7528;</li>
<li>&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x6848;&#x548C;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6848;&#x539F;&#x7406;&#x4E00;&#x81F4;&#xFF0C;&#x867D;&#x7136;&#x9700;&#x8981;&#x4E9B;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E9B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x62BD;&#x51FA;&#x4F5C;&#x4E3A;&#x56E2;&#x961F;&#x516C;&#x5171;&#x4EE3;&#x7801;&#xFF0C;&#x57FA;&#x672C;&#x4E0D;&#x9700;&#x8981;&#x8DDF;&#x968F;hessian&#x7248;&#x672C;&#x5347;&#x7EA7;&#x800C;&#x505A;&#x51FA;&#x6539;&#x52A8;&#xFF0C;&#x540C;&#x65F6;&#x5982;&#x679C;&#x6709;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x968F;&#x65F6;&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;&#x3002;  </li>
</ul>
<p>&#x4E2A;&#x4EBA;&#x6BD4;&#x8F83;&#x63A8;&#x8350;&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;&#x3002;</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hessian&amp;#x5904;&amp;#x7406;BigDecimal&amp;#x65F6;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x5C06;BigDecimal&amp;#x4F5C;&amp;#x4E3A;Object&amp;#x5BF9;&amp;#x8C61;&amp;#x5904;&amp;#x7406;
    
    </summary>
    
      <category term="hessian" scheme="https://yyhan.github.io/categories/hessian/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="hessian" scheme="https://yyhan.github.io/tags/hessian/"/>
    
      <category term="BigDecimal" scheme="https://yyhan.github.io/tags/BigDecimal/"/>
    
  </entry>
  
  <entry>
    <title>hessian 序列化和反序列化</title>
    <link href="https://yyhan.github.io/2017/06/11/hessian-%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    <id>https://yyhan.github.io/2017/06/11/hessian-序列化和反序列化/</id>
    <published>2017-06-10T17:29:48.000Z</published>
    <updated>2017-06-18T13:21:23.446Z</updated>
    
    <content type="html"><![CDATA[<h1 id="hessian&#x8BF7;&#x6C42;&#x4EE3;&#x7406;"><a href="#hessian&#x8BF7;&#x6C42;&#x4EE3;&#x7406;" class="headerlink" title="hessian&#x8BF7;&#x6C42;&#x4EE3;&#x7406;"></a>hessian&#x8BF7;&#x6C42;&#x4EE3;&#x7406;</h1><p>com.caucho.hessian.client.HessianProxy.invoke(Object proxy, Method method, Object []args); // &#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x65B9;&#x5F0F;&#x8C03;&#x7528;&#x8FDC;&#x7A0B;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;</p>
<p>com.caucho.hessian.io.Hessian2Input.readReply(Class expectedClass); // &#x8BFB;&#x53D6;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;<br>  readObject(Class cl); // &#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x7C7B;&#x5BF9;&#x8C61;</p>
<h1 id="&#x5E8F;&#x5217;&#x5316;&#x5668;&#x67E5;&#x627E;&#x6D41;&#x7A0B;"><a href="#&#x5E8F;&#x5217;&#x5316;&#x5668;&#x67E5;&#x627E;&#x6D41;&#x7A0B;" class="headerlink" title="&#x5E8F;&#x5217;&#x5316;&#x5668;&#x67E5;&#x627E;&#x6D41;&#x7A0B;"></a>&#x5E8F;&#x5217;&#x5316;&#x5668;&#x67E5;&#x627E;&#x6D41;&#x7A0B;</h1><ul class="ui list">
<li>1&#x3001;&#x901A;&#x8FC7; <code>SerializerFactory.getObjectSerializer(object.getClass())</code> &#xFF0C;&#x83B7;&#x53D6;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;<ul>
<li>1.1&#x3001;&#x8C03;&#x7528; <code>SerializerFactory.getSerializer(Class cl)</code> &#x83B7;&#x53D6;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
<li>1.2&#x3001;&#x5982;&#x679C; <code>_cachedSerializerMap</code> &#x7F13;&#x5B58;&#x4E2D;&#x6709;&#xFF0C;&#x5219;&#x53D6;&#x7F13;&#x5B58;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
<li>1.3&#x3001;&#x5982;&#x679C;&#x7F13;&#x5B58;&#x6CA1;&#x6709;&#xFF0C;&#x8C03;&#x7528; <code>SerializerFactory.loadSerializer(Class&lt;?&gt; cl)</code> &#x83B7;&#x53D6;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
<li>1.4&#x3001;&#x904D;&#x5386; <code>SerializerFactory._factories</code>&#xFF08;&#x81EA;&#x884C;&#x6DFB;&#x52A0;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x5DE5;&#x5382;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x63D0;&#x4F9B;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5C31;&#x91C7;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x63D0;&#x4F9B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
<li>1.5&#x3001;&#x5426;&#x5219;&#xFF08;1.4&#xFF09;&#xFF0C;&#x8C03;&#x7528; <code>SerializerFactory</code> &#x521D;&#x59CB;&#x5316;&#x65F6;&#x6784;&#x9020;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382; <code>ContextSerializerFactory.getSerializer(Class cl)</code> &#x67E5;&#x8BE2;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5C31;&#x91C7;&#x7528;</li>
<li>1.6&#x3001;&#x5426;&#x5219;&#xFF08;1.5&#xFF09;&#xFF0C;&#x5C31;&#x4F7F;&#x7528;<code>&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;</code>&#x6784;&#x9020; <code>ContextSerializerFactory</code>&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x8BE5;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382;&#x7684;<code>getCustomSerializer()</code>&#x67E5;&#x8BE2;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5C31;&#x91C7;&#x7528;<ul>
<li>1.6.1&#x3001;<code>Class.forName(cl.getName() + &quot;HessianSerializer&quot;, false, cl.getClassLoader())</code>&#x83B7;&#x53D6;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
</ul>
</li>
<li>1.7&#x3001;&#x5426;&#x5219;&#xFF08;1.6&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x662F;<code>com.caucho.hessian.io.HessianRemoteObject</code>&#x7C7B;&#x578B;&#x6216;&#x5176;&#x5B50;&#x7C7B;&#xFF0C;&#x8FD4;&#x56DE;<code>com.caucho.hessian.io.RemoteSerializer</code></li>
<li>1.8&#x3001;&#x5426;&#x5219;&#xFF08;1.7&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x662F;<code>com.caucho.burlap.io.BurlapRemoteObject</code>&#x7C7B;&#x578B;&#x6216;&#x5176;&#x5B50;&#x7C7B;&#xFF0C;&#x8FD4;&#x56DE;<code>com.caucho.hessian.io.RemoteSerializer</code></li>
<li>1.9&#x3001;&#x5426;&#x5219;&#xFF08;1.8&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x62E5;&#x6709;&#x540D;&#x4E3A;<code>writeReplace</code>&#x7684;&#x65E0;&#x53C2;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x6839;&#x636E;&#x8BE5;&#x65B9;&#x6CD5;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>WriteReplaceSerializer</code>&#x8FD4;&#x56DE;</li>
<li>1.10&#x3001;&#x5426;&#x5219;&#xFF08;1.9&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x662F;<code>Map</code>&#xFF0C;&#x8FD4;&#x56DE;<code>MapSerializer</code>&#xFF08;&#x61D2;&#x52A0;&#x8F7D;&#xFF09;</li>
<li>1.11&#x3001;&#x5426;&#x5219;&#xFF08;1.10&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x662F;<code>Collection</code>&#xFF0C;&#x8FD4;&#x56DE;<code>CollectionSerializer</code>* &#xFF08;&#x61D2;&#x52A0;&#x8F7D;&#xFF09;</li>
<li>1.12&#x3001;&#x5426;&#x5219;&#xFF08;1.11&#xFF09;&#xFF0C;<code>Array&#x3001;InputStream&#x3001;Iterator&#x3001;Calendar&#x3001;* Enumeration&#x3001;Enum&#x3001;Annotation</code>&#x5206;&#x522B;&#x8FD4;&#x56DE;&#x5BF9;&#x5E94;&#x7684;&#x5185;&#x7F6E;&#x5E8F;&#x5217;&#x5316;&#x5668;</li>
<li>1.13&#x3001;&#x5426;&#x5219;&#xFF08;1.12&#xFF09;&#xFF0C;&#x8C03;&#x7528;<code>SerializerFactory.getDefaultSerializer(Class cl)</code>&#x8FD4;&#x56DE;&#x9ED8;&#x8BA4;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;<ul>
<li>1.13.1&#x3001;&#x5982;&#x679C; <code>_defaultSerializer</code> &#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C31;&#x91C7;&#x7528;</li>
<li>1.13.2&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x578B;&#x672A;&#x5B9E;&#x73B0;<code>Serializable</code>&#x63A5;&#x53E3;&#xFF0C;&#x4E14;&#x8BBE;&#x7F6E;&#x4E86;&#x7981;&#x6B62;&#x2018;&#x4E0D;&#x652F;&#x6301;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x7C7B;&#x2019;&#x7684;&#x72B6;&#x6001;<code>_isAllowNonSerializable</code>&#xFF0C;&#x5C06;&#x8DD1;&#x51FA;&#x5F02;&#x5E38;<code>IllegalStateException</code></li>
<li>1.13.3&#x3001;&#x5982;&#x679C;&#x542F;&#x7528;&#x4E86;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x76EE;&#x6807;&#x7C7B;&#x6CA1;&#x6709;&#x540D;&#x4E3A;<code>writeReplace</code>&#x7684;&#x65E0;&#x53C2;&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>UnsafeSerializer</code>&#x5E76;&#x8FD4;&#x56DE;<ul>
<li>1.13.3.1&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x8BBE;&#x7F6E;&#x4E86;&#x6CE8;&#x89E3;<code>HessianUnshared</code>&#xFF08;&#x4E0D;&#x68C0;&#x6D4B;&#x91CD;&#x590D;&#x6216;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#xFF09;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>UnsafeUnsharedSerializer</code>&#x5E76;&#x8FD4;&#x56DE;</li>
<li>1.13.3.2&#x3001;&#x5426;&#x5219;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>UnsafeSerializer</code>&#x5E76;&#x8FD4;&#x56DE;</li>
</ul>
</li>
<li>1.13.4&#x3001;&#x5426;&#x5219;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>JavaSerializer</code>&#x5E76;&#x8FD4;&#x56DE;<ul>
<li>1.13.4.1&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x8BBE;&#x7F6E;&#x4E86;&#x6CE8;&#x89E3;<code>HessianUnshared</code>&#xFF08;&#x4E0D;&#x68C0;&#x6D4B;&#x91CD;&#x590D;&#x6216;&#x5FAA;&#x73AF;&#x5F15;&#x7528;&#xFF09;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>JavaUnsharedSerializer</code>&#x5E76;&#x8FD4;&#x56DE;</li>
<li>1.13.4.2&#x3001;&#x5426;&#x5219;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;<code>JavaSerializer</code>&#x5E76;&#x8FD4;&#x56DE;</li>
</ul>
</li>
</ul>
</li>
<li>1.4&#x3001;&#x5C06;&#x5F97;&#x5230;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x653E;&#x5165;&#x7F13;&#x5B58;</li>
</ul>
</li>
</ul>
<p>JavaSerializer &#x548C; UnsafeSerializer &#x7684;&#x533A;&#x522B;&#xFF1A;<br>  JavaSerializer&#xFF1A;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x83B7;&#x53D6;&#x5B57;&#x6BB5;&#x503C;<br>  UnsafeSerializer&#xFF1A;&#x901A;&#x8FC7;<code>sun.misc.Unsafe</code>&#x83B7;&#x53D6;&#x5B57;&#x6BB5;&#x7684;&#x503C;</p>
<h1 id="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"><a href="#&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"></a>&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</h1><p>1&#x3001;&#x4F7F;&#x7528;InputStream&#x6784;&#x9020;<code>AbstractHessianInput</code>&#x5BF9;&#x8C61;<br>2&#x3001;&#x8C03;&#x7528;<code>AbstractHessianInput.readReply(Class expectedClass)</code>&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;<br>3&#x3001;&#x5982;&#x679C;tag=&#x2019;R&#x2019;&#xFF0C;&#x8C03;&#x7528;<code>readObject(Class cl)</code>&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;<br>4&#x3001;<code>readObjectDefinition(Class&lt;?&gt; cl)</code>&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B9A;&#x4E49;<br>  4.1&#x3001;<code>SerializerFactory.getObjectDeserializer(String type, Class cl)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5982;&#x679C;cl&#x4E3A;null &#x6216; cl&#x548C;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x652F;&#x6301;&#x7684;&#x7C7B;&#x578B;&#x4E00;&#x81F4; &#x7B49;&#x60C5;&#x51B5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8BE5;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>    4.1.1&#x3001;<code>SerializerFactory.getObjectDeserializer(String type)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>      4.1.1.1&#x3001;<code>SerializerFactory.getDeserializer(String type)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>        4.1.1.1.1&#x3001;&#x5982;&#x679C;type&#x4E3A;<code>[</code>&#x5F00;&#x5934;&#xFF0C;&#x5C31;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x6570;&#x7EC4;&#x5185;&#x5BB9;&#xFF0C;&#x4F7F;&#x7528;type.substring(1)&#xFF0C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x8C03;&#x7528;&#x672C;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x3002;<br>        4.1.1.1.2&#x3001;&#x5426;&#x5219;&#x901A;&#x8FC7;&#x53CD;&#x5C04;<code>Class.forName</code>&#x5F97;&#x5230;type&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x5F97;&#x5230;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;&#x8C03;&#x7528;<code>SerializerFactory.getDeserializer(Class cl)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>  4.2&#x3001;&#x5982;&#x679C;4.1.1&#x5F97;&#x5230;&#x7684;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x4E0D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x5C31;&#x8C03;&#x7528;<code>SerializerFactory.getDeserializer(Class cl)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>    4.2.1&#x3001;&#x8C03;&#x7528;<code>SerializerFactory.loadDeserializer(Class cl)</code>&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>      4.2.1.1&#x3001;&#x904D;&#x5386; <code>SerializerFactory._factories</code>&#xFF08;&#x81EA;&#x884C;&#x6DFB;&#x52A0;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#x5DE5;&#x5382;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x63D0;&#x4F9B;&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5C31;&#x91C7;&#x7528;&#x8BE5;&#x5DE5;&#x5382;&#x63D0;&#x4F9B;&#x7684;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>      4.2.1.2&#x3001;&#x8C03;&#x7528; <code>SerializerFactory</code> &#x521D;&#x59CB;&#x5316;&#x65F6;&#x6784;&#x9020;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382; <code>ContextSerializerFactory.getDeserializer(String className)</code> &#x67E5;&#x8BE2;&#x5E8F;&#x53CD;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5C31;&#x91C7;&#x7528;<br>      4.2.1.3&#x3001;&#x4F7F;&#x7528;<code>&#x76EE;&#x6807;&#x7C7B;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;</code>&#x6784;&#x9020; <code>ContextSerializerFactory</code>&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x8BE5;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5382;&#x7684;<code>getCustomDeserializer()</code>&#x67E5;&#x8BE2;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5C31;&#x91C7;&#x7528;<br>      4.2.1.4&#x3001;Collection&#x3001;Map&#x3001;Iterator&#x3001;Annotation&#x3001;Interface&#xFF08;&#x4F7F;&#x7528;ObjectDeserializer&#xFF09;&#x3001;Array&#x3001;Enumeration&#x3001;Enum&#x3001;Class&#x90FD;&#x6709;&#x5185;&#x7F6E;&#x5BF9;&#x5E94;&#x7684;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>      4.2.1.5&#x3001;&#x8C03;&#x7528;<code>SerializerFactory.getDefaultDeserializer(Class cl)</code>&#x8FD4;&#x56DE;&#x9ED8;&#x8BA4;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>        4.2.1.5.1&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x578B;&#x4E3A;<code>InputStream</code>&#xFF0C;&#x4F7F;&#x7528;<code>InputStreamDeserializer.DESER</code>&#x4F5C;&#x4E3A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5668;<br>        4.2.1.5.2&#x3001;&#x5982;&#x679C;&#x542F;&#x7528;&#x4E86;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5668;&#xFF0C;&#x4F7F;&#x7528;<code>UnsafeDeserializer(cl)</code><br>          4.2.1.5.2.1&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x578B;&#x6709;&#x540D;&#x4E3A;<code>readResolve</code>&#x7684;&#x65E0;&#x53C2;&#x65B9;&#x6CD5;&#xFF0C;&#x6807;&#x8BB0;<code>_readResolve.setAccessible(true)</code><br>        4.2.1.5.3&#x3001;&#x5426;&#x5219;&#xFF0C;&#x4F7F;&#x7528;<code>JavaDeserializer(cl)</code><br>          4.2.1.5.3.1&#x3001;&#x5982;&#x679C;&#x76EE;&#x6807;&#x7C7B;&#x578B;&#x6709;&#x540D;&#x4E3A;<code>readResolve</code>&#x7684;&#x65E0;&#x53C2;&#x65B9;&#x6CD5;&#xFF0C;&#x6807;&#x8BB0;<code>_readResolve.setAccessible(true)</code><br>5&#x3001;<code>readObjectInstance(Class&lt;?&gt; cl, ObjectDefinition def)</code>&#x6839;&#x636E;&#x4E0A;&#x4E00;&#x6B65;&#x7684;&#x7ED3;&#x679C;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;</p>
<h1 id="&#x7279;&#x6B8A;&#x95EE;&#x9898;"><a href="#&#x7279;&#x6B8A;&#x95EE;&#x9898;" class="headerlink" title="&#x7279;&#x6B8A;&#x95EE;&#x9898;"></a>&#x7279;&#x6B8A;&#x95EE;&#x9898;</h1><h2 id="&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x81F4;"><a href="#&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x81F4;" class="headerlink" title="&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x81F4;"></a>&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5B57;&#x6BB5;&#x4E0D;&#x4E00;&#x81F4;</h2><p>1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x591A;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x8BE5;&#x5B57;&#x6BB5;&#x53D6;JVM&#x9ED8;&#x8BA4;&#x503C;<br>2&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x7F3A;&#x5931;&#x5B57;&#x6BB5;&#xFF0C;&#x8BE5;&#x5B57;&#x6BB5;&#x4E0D;&#x89E3;&#x6790;<br>3&#x3001;&#x89E3;&#x6790;&#x65F6;&#x8BFB;&#x53D6;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#xFF0C;&#x4EE5;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x7C7B;&#x578B;&#x4E3A;&#x51C6;</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;hessian&amp;#x8BF7;&amp;#x6C42;&amp;#x4EE3;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#hessian&amp;#x8BF7;&amp;#x6C42;&amp;#x4EE3;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;hessian&amp;#x8BF7
    
    </summary>
    
      <category term="hessian" scheme="https://yyhan.github.io/categories/hessian/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="hessian" scheme="https://yyhan.github.io/tags/hessian/"/>
    
  </entry>
  
  <entry>
    <title>Spring @Value注解</title>
    <link href="https://yyhan.github.io/2017/05/16/Spring-Value/"/>
    <id>https://yyhan.github.io/2017/05/16/Spring-Value/</id>
    <published>2017-05-16T15:45:22.000Z</published>
    <updated>2017-06-18T13:21:21.384Z</updated>
    
    <content type="html"><![CDATA[<p>Spring @Value&#x6CE8;&#x89E3;&#x7684;&#x7528;&#x6CD5;&#x3002;</p>
<h1 id="&#x57FA;&#x672C;&#x4F7F;&#x7528;"><a href="#&#x57FA;&#x672C;&#x4F7F;&#x7528;" class="headerlink" title="&#x57FA;&#x672C;&#x4F7F;&#x7528;"></a>&#x57FA;&#x672C;&#x4F7F;&#x7528;</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;${user.name}&quot;</span>)</div></pre></td></tr></table></figure>
<h1 id="SpELl&#x65B9;&#x5F0F;"><a href="#SpELl&#x65B9;&#x5F0F;" class="headerlink" title="SpELl&#x65B9;&#x5F0F;"></a>SpELl&#x65B9;&#x5F0F;</h1><p><code>systemProperties</code>&#x662F;spring&#x81EA;&#x52A8;&#x6CE8;&#x5165;&#x7684;&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#x96C6;&#x5408;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;&#x6CE8;&#x5165;&#x7684;&#x53D8;&#x91CF;&#x96C6;&#x5408;&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;#{systemProperties[&apos;user.name&apos;]}&quot;</span>)</div></pre></td></tr></table></figure></p>
<h1 id="&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;"><a href="#&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;" class="headerlink" title="&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;"></a>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;${user.name:root}&quot;</span>)</div></pre></td></tr></table></figure>
<h1 id="SpEl&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;"><a href="#SpEl&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;" class="headerlink" title="SpEl&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;"></a>SpEl&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;#{systemProperties[&apos;user.name&apos;] ?: &apos;root&apos;}&quot;</span>) <span class="comment">//&#x6CE8;&#x610F;&#x5B57;&#x7B26;&#x4E32;&#x8981;&#x52A0;&#x5355;&#x5F15;&#x53F7;</span></div></pre></td></tr></table></figure>
<h1 id="&#x8BBE;&#x7F6E;null&#x503C;"><a href="#&#x8BBE;&#x7F6E;null&#x503C;" class="headerlink" title="&#x8BBE;&#x7F6E;null&#x503C;"></a>&#x8BBE;&#x7F6E;null&#x503C;</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;${user.name:#{null}}&quot;</span>) <span class="comment">//&#x6DF7;&#x5408;&#x65B9;&#x5F0F;</span></div><div class="line"></div><div class="line"><span class="meta">@Value</span>(<span class="string">&quot;#{systemProperties[&apos;user.name&apos;] ?: null}&quot;</span>) <span class="comment">//&#x7EAF;SpEl&#x65B9;&#x5F0F;</span></div></pre></td></tr></table></figure>
<h1 id="&#x68C0;&#x67E5;&#x662F;&#x5426;&#x4E3A;null&#x6216;&#x8005;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;"><a href="#&#x68C0;&#x67E5;&#x662F;&#x5426;&#x4E3A;null&#x6216;&#x8005;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;" class="headerlink" title="&#x68C0;&#x67E5;&#x662F;&#x5426;&#x4E3A;null&#x6216;&#x8005;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;"></a>&#x68C0;&#x67E5;&#x662F;&#x5426;&#x4E3A;null&#x6216;&#x8005;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Value</span>(value = <span class="string">&quot;#{systemProperties[&apos;user.name&apos;] == null ? null : &apos;&apos;.equals(systemProperties[&apos;user.name&apos;]) ? null : systemProperties[&apos;user.name&apos;]}&quot;</span>)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Spring @Value&amp;#x6CE8;&amp;#x89E3;&amp;#x7684;&amp;#x7528;&amp;#x6CD5;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x57FA;&amp;#x672C;&amp;#x4F7F;&amp;#x7528;&quot;&gt;&lt;a href=&quot;#&amp;#x57FA;&amp;#x672C;&amp;#x
    
    </summary>
    
      <category term="spring" scheme="https://yyhan.github.io/categories/spring/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="spring" scheme="https://yyhan.github.io/tags/spring/"/>
    
      <category term="value" scheme="https://yyhan.github.io/tags/value/"/>
    
      <category term="注解" scheme="https://yyhan.github.io/tags/%E6%B3%A8%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>Log4j2配置</title>
    <link href="https://yyhan.github.io/2017/05/16/Log4j2%E9%85%8D%E7%BD%AE/"/>
    <id>https://yyhan.github.io/2017/05/16/Log4j2配置/</id>
    <published>2017-05-16T15:25:40.000Z</published>
    <updated>2017-05-16T15:33:48.398Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x4F7F;&#x7528;xml&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2"><a href="#&#x4F7F;&#x7528;xml&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2" class="headerlink" title="&#x4F7F;&#x7528;xml&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2"></a>&#x4F7F;&#x7528;xml&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">status</span>=<span class="string">&quot;WARN&quot;</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x63A7;&#x5236;&#x53F0;appender --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">&quot;Console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">&quot;appFileLog&quot;</span> <span class="attr">fileName</span>=<span class="string">&quot;${log.dir}/logs/app.log&quot;</span></span></div><div class="line">              <span class="attr">filePattern</span>=<span class="string">&quot;${log.dir}/logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;</span>&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg %throwable{none}%n<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">PatternLayout</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">&quot;250 MB&quot;</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">&quot;appErrorFileLog&quot;</span> <span class="attr">fileName</span>=<span class="string">&quot;${log.dir}/logs/app-error.log&quot;</span></span></div><div class="line">              <span class="attr">filePattern</span>=<span class="string">&quot;${log.dir}/logs/$${date:yyyy-MM}/app-error-%d{MM-dd-yyyy}-%i.log.gz&quot;</span>&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg %throwable{none}%n<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">PatternLayout</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">&quot;250 MB&quot;</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">&quot;ERROR&quot;</span> <span class="attr">onMatch</span>=<span class="string">&quot;ACCEPT&quot;</span> <span class="attr">onMismatch</span>=<span class="string">&quot;DENY&quot;</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">&quot;dbFileLogAppender&quot;</span> <span class="attr">fileName</span>=<span class="string">&quot;${log.dir}/logs/db.log&quot;</span></span></div><div class="line">              <span class="attr">filePattern</span>=<span class="string">&quot;${log.dir}/logs/$${date:yyyy-MM}/db-%d{MM-dd-yyyy}-%i.log.gz&quot;</span>&gt;</div><div class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg %throwable{none}%n<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">PatternLayout</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">&quot;250 MB&quot;</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x9ED8;&#x8BA4;&#x65E5;&#x5FD7;&#x7EA7;&#x522B; debug --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- &#x9ED8;&#x8BA4;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x5230; &#x63A7;&#x5236;&#x53F0; --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;Console&quot;</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;appFileLog&quot;</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;appErrorFileLog&quot;</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x6253;&#x5370;spring info&#x65E5;&#x5FD7; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x6253;&#x5370;mybati info&#x65E5;&#x5FD7; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.springframework.jdbc&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> &gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;dbFileLogAppender&quot;</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;dbFileLogAppender&quot;</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.yfhan.dao&quot;</span> <span class="attr">level</span>=<span class="string">&quot;debug&quot;</span> &gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;dbFileLogAppender&quot;</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="&#x4F7F;&#x7528;java&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2"><a href="#&#x4F7F;&#x7528;java&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2" class="headerlink" title="&#x4F7F;&#x7528;java&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2"></a>&#x4F7F;&#x7528;java&#x65B9;&#x5F0F;&#x521D;&#x59CB;&#x5316;Log4j2</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.demo.utils.log;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.Level;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.LoggerContext;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.appender.ConsoleAppender;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.Configurator;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.builder.api.ConfigurationBuilder;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.builder.api.ConfigurationBuilderFactory;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.core.config.builder.impl.BuiltConfiguration;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* Created by YFHan on 2016/9/21.</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log4JHelper</span> </span>{</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>{</div><div class="line">        ConfigurationBuilder&lt;BuiltConfiguration&gt; builder = ConfigurationBuilderFactory.newConfigurationBuilder();</div><div class="line">        builder.setStatusLevel(Level.ERROR);</div><div class="line">        builder.setConfigurationName(<span class="string">&quot;Log4JHelper&quot;</span>);</div><div class="line">        builder.add(</div><div class="line">                builder.newAppender(<span class="string">&quot;STDOUT&quot;</span>, <span class="string">&quot;CONSOLE&quot;</span>)</div><div class="line">                        .addAttribute(<span class="string">&quot;target&quot;</span>, ConsoleAppender.Target.SYSTEM_OUT)</div><div class="line">                        .add(</div><div class="line">                                builder.newLayout(<span class="string">&quot;PatternLayout&quot;</span>)</div><div class="line">                                        .addAttribute(<span class="string">&quot;pattern&quot;</span>, <span class="string">&quot;%d [%t] %-5level: %msg%n%throwable&quot;</span>)</div><div class="line">                        ))</div><div class="line">                .add(builder.newLogger(<span class="string">&quot;org.apache.logging.log4j&quot;</span>, Level.DEBUG)</div><div class="line">                        .add(builder.newAppenderRef(<span class="string">&quot;STDOUT&quot;</span>)))</div><div class="line">                .add(builder.newRootLogger(Level.DEBUG).add(builder.newAppenderRef(<span class="string">&quot;STDOUT&quot;</span>)));</div><div class="line">        LoggerContext ctx = Configurator.initialize(builder.build());</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x4F7F;&amp;#x7528;xml&amp;#x65B9;&amp;#x5F0F;&amp;#x521D;&amp;#x59CB;&amp;#x5316;Log4j2&quot;&gt;&lt;a href=&quot;#&amp;#x4F7F;&amp;#x7528;xml&amp;#x65B9;&amp;#x5F0F;&amp;#x521D;&amp;#x59CB;&amp;#x5
    
    </summary>
    
      <category term="log4j2" scheme="https://yyhan.github.io/categories/log4j2/"/>
    
    
      <category term="log4j2" scheme="https://yyhan.github.io/tags/log4j2/"/>
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SSH配置和使用</title>
    <link href="https://yyhan.github.io/2017/05/16/ssh%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <id>https://yyhan.github.io/2017/05/16/ssh配置和使用/</id>
    <published>2017-05-16T13:18:47.000Z</published>
    <updated>2017-06-26T15:33:01.472Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;"><a href="#&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;" class="headerlink" title="&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;"></a>&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;</h1><h2 id="&#x5728;linux&#x4E0A;&#x751F;&#x6210;"><a href="#&#x5728;linux&#x4E0A;&#x751F;&#x6210;" class="headerlink" title="&#x5728;linux&#x4E0A;&#x751F;&#x6210;"></a>&#x5728;linux&#x4E0A;&#x751F;&#x6210;</h2><p>&#x5728;linux&#x4E0A;&#xFF0C;&#x4F7F;&#x7528;<code>ssh-keygen</code>&#x547D;&#x4EE4;&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa</div></pre></td></tr></table></figure></p>
<h2 id="&#x4F7F;&#x7528;xshell&#x751F;&#x6210;"><a href="#&#x4F7F;&#x7528;xshell&#x751F;&#x6210;" class="headerlink" title="&#x4F7F;&#x7528;xshell&#x751F;&#x6210;"></a>&#x4F7F;&#x7528;xshell&#x751F;&#x6210;</h2><p>&#x5DE5;&#x5177; &gt; &#x65B0;&#x5EFA;&#x7528;&#x6237;&#x5BC6;&#x94A5;&#x751F;&#x6210;&#x5411;&#x5BFC;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x5411;&#x5BFC;&#x751F;&#x6210;&#x5BC6;&#x94A5;&#x3002;</p>
<h1 id="&#x90E8;&#x7F72;ssh&#x516C;&#x94A5;&#x548C;&#x79C1;&#x94A5;"><a href="#&#x90E8;&#x7F72;ssh&#x516C;&#x94A5;&#x548C;&#x79C1;&#x94A5;" class="headerlink" title="&#x90E8;&#x7F72;ssh&#x516C;&#x94A5;&#x548C;&#x79C1;&#x94A5;"></a>&#x90E8;&#x7F72;ssh&#x516C;&#x94A5;&#x548C;&#x79C1;&#x94A5;</h1><p>&#x5C06;ssh&#x516C;&#x94A5;&#x8FFD;&#x52A0;&#x5230;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x5668;&#x7684;<code>${remote_user_home}/.ssh/authorized_keys</code>&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x6743;&#x9650;&#xFF1A; </p>
<table>
<thead>
<tr>
<th>&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;</th>
<th>&#x6743;&#x9650;</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.ssh/</code></td>
<td><code>700</code></td>
</tr>
<tr>
<td><code>.ssh/authorized_keys</code></td>
<td><code>600</code></td>
</tr>
</tbody>
</table>
<p>&#x66F4;&#x591A;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x8BBE;&#x7F6E;&#x53C2;&#x8003;&#xFF1A;<a href="http://man.openbsd.org/ssh.1" target="_blank" rel="external">http://man.openbsd.org/ssh.1</a><br>&#x539F;&#x6587;&#x6458;&#x8981;&#x5982;&#x4E0B;&#xFF1A;<br><a class="magnific-img" href="/img/ssh/ssh.png"><img src="/img/ssh/ssh.png" alt="Image of Yaktocat" class="ui centered image"></a></p>
<h1 id="&#x4F7F;&#x7528;ssh&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;"><a href="#&#x4F7F;&#x7528;ssh&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x4F7F;&#x7528;ssh&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;"></a>&#x4F7F;&#x7528;ssh&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;</h1><h2 id="&#x4ECE;&#x4E00;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;"><a href="#&#x4ECE;&#x4E00;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x4ECE;&#x4E00;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;"></a>&#x4ECE;&#x4E00;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;</h2><p>&#x4F7F;&#x7528;ssh&#x4ECE;&#x4E00;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x5C06;&#x672C;&#x673A;&#x7684;ssh&#x516C;&#x94A5;&#x8FFD;&#x52A0;&#x5230;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x5668;&#x7684;<code>${remote_user_home}/.ssh/authorized_keys</code>&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x540C;&#x65F6;&#x5C06;&#x79C1;&#x94A5;&#x653E;&#x7F6E;&#x5728;<code>${local_user_home}/.ssh/id_rsa</code>&#x6587;&#x4EF6;&#x4E2D;&#x3002;<br>&#x5C06;&#x516C;&#x94A5;&#x53D1;&#x9001;&#x5230;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-copy-id remote_user@remote_host</div></pre></td></tr></table></figure></p>
<p>&#x4F7F;&#x7528;ssh&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh remote_user@remote_host</div></pre></td></tr></table></figure></p>
<h2 id="&#x4ECE;&#x4E00;&#x53F0;windows&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;"><a href="#&#x4ECE;&#x4E00;&#x53F0;windows&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x4ECE;&#x4E00;&#x53F0;windows&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;"></a>&#x4ECE;&#x4E00;&#x53F0;windows&#x670D;&#x52A1;&#x5668;&#x767B;&#x5F55;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;</h2><p>&#x4F7F;&#x7528;xshell</p>
<h1 id="ssh&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"><a href="#ssh&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;" class="headerlink" title="ssh&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"></a>ssh&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;</h1><p>&#x5F53;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x516C;&#x94A5;&#x8BBF;&#x95EE;&#x4E0D;&#x901A;&#x7684;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5728;<code>${local_user_home}/.ssh/config</code>&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="string">Host</span> <span class="string">github.com</span> </div><div class="line">    <span class="string">HostName</span> <span class="string">github.com</span></div><div class="line">    <span class="string">IdentityFile</span> <span class="attr">D:/ssh/yyhan_github.ppk</span></div><div class="line">    <span class="string">User</span> <span class="string">git</span></div><div class="line"><span class="string">Host</span> <span class="string">git.coding.net</span></div><div class="line">    <span class="string">HostName</span> <span class="string">git.coding.net</span></div><div class="line">    <span class="string">IdentityFile</span> <span class="attr">D:/ssh/coding_net.ppk</span></div><div class="line">    <span class="string">User</span> <span class="string">git</span></div><div class="line"><span class="string">Host</span> <span class="number">192.168</span><span class="number">.1</span><span class="string">.*</span></div><div class="line">    <span class="string">HostName</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></div><div class="line">    <span class="string">IdentityFile</span> <span class="attr">D:/ssh/root_192_168_1_1.ppk</span></div><div class="line">    <span class="string">User</span> <span class="string">root</span></div></pre></td></tr></table></figure></p>
<p>&#x914D;&#x7F6E;&#x9879;&#x63CF;&#x8FF0;&#x5982;&#x4E0B;&#xFF1A;    </p>
<table>
<thead>
<tr>
<th>&#x914D;&#x7F6E;&#x9879;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Host</td>
<td>&#x4E3B;&#x673A;&#x522B;&#x540D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x5339;&#x914D;</td>
</tr>
<tr>
<td>HostName</td>
<td>&#x4E3B;&#x673A;&#x771F;&#x5B9E;&#x540D;&#x79F0;&#x6216;&#x5730;&#x5740;</td>
</tr>
<tr>
<td>IdentityFile</td>
<td>&#x5BC6;&#x94A5;&#x6587;&#x4EF6;&#x5730;&#x5740;</td>
</tr>
<tr>
<td>User</td>
<td>&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7528;&#x6237;&#x540D;</td>
</tr>
</tbody>
</table>
<p>&#x66F4;&#x591A;&#x914D;&#x7F6E;&#x53C2;&#x8003;&#xFF1A;<a href="http://man.openbsd.org/ssh_config.5" target="_blank" rel="external">http://man.openbsd.org/ssh_config.5</a></p>
<h1 id="&#x9644;&#x5F55;"><a href="#&#x9644;&#x5F55;" class="headerlink" title="&#x9644;&#x5F55;"></a>&#x9644;&#x5F55;</h1><h2 id="SSH&#x5DE5;&#x5177;"><a href="#SSH&#x5DE5;&#x5177;" class="headerlink" title="SSH&#x5DE5;&#x5177;"></a>SSH&#x5DE5;&#x5177;</h2><ul class="ui list">
<li>openSSH&#xFF08;linux&#xFF09;</li>
<li>xShell&#xFF08;windows&#xFF09;</li>
<li>secureCRT&#xFF08;windows&#xFF09;</li>
<li>FileZilla&#xFF08;windows&#x548C;linux&#xFF09;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ssh&#x7684;FTP&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;</li>
</ul>
<h2 id="&#x53C2;&#x8003;&#x6587;&#x6863;"><a href="#&#x53C2;&#x8003;&#x6587;&#x6863;" class="headerlink" title="&#x53C2;&#x8003;&#x6587;&#x6863;"></a>&#x53C2;&#x8003;&#x6587;&#x6863;</h2><p>&#x962E;&#x4E00;&#x5CF0;&#xFF1A;&#x300A;<a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="external">SSH&#x539F;&#x7406;&#x4E0E;&#x8FD0;&#x7528;&#xFF08;&#x4E00;&#xFF09;&#xFF1A;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;</a>&#x300B;<br>&#x962E;&#x4E00;&#x5CF0;&#xFF1A;&#x300A;<a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html" target="_blank" rel="external">SSH&#x539F;&#x7406;&#x4E0E;&#x8FD0;&#x7528;&#xFF08;&#x4E8C;&#xFF09;&#xFF1A;&#x8FDC;&#x7A0B;&#x64CD;&#x4F5C;&#x4E0E;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</a>&#x300B;<br>OpenSSh&#x5B98;&#x7F51;&#xFF1A;<a href="https://www.openssh.com/" target="_blank" rel="external">OpenSSH</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x751F;&amp;#x6210;ssh&amp;#x5BC6;&amp;#x94A5;&quot;&gt;&lt;a href=&quot;#&amp;#x751F;&amp;#x6210;ssh&amp;#x5BC6;&amp;#x94A5;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x751F;&amp;#x6210;ssh&amp;#x
    
    </summary>
    
      <category term="ssh" scheme="https://yyhan.github.io/categories/ssh/"/>
    
    
      <category term="ssh" scheme="https://yyhan.github.io/tags/ssh/"/>
    
      <category term="linux" scheme="https://yyhan.github.io/tags/linux/"/>
    
      <category term="多个远程主机" scheme="https://yyhan.github.io/tags/%E5%A4%9A%E4%B8%AA%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>tomcat setenv脚本</title>
    <link href="https://yyhan.github.io/2016/12/25/tomcat-setenv%E8%84%9A%E6%9C%AC/"/>
    <id>https://yyhan.github.io/2016/12/25/tomcat-setenv脚本/</id>
    <published>2016-12-25T15:18:56.000Z</published>
    <updated>2016-12-27T06:52:52.680Z</updated>
    
    <content type="html"><![CDATA[<p>setenv.bat(linux&#x4E0B;&#x662F;setenv.sh)&#x6587;&#x4EF6;&#x662F;tomcat&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x8BE5;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x5728;<code>CATALINA_HOME\bin\</code>&#x6216;<code>CATALINA_BASE\bin\</code>&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x9700;&#x8981;&#x7528;&#x6237;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x3002;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;java&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3001;jvm&#x53C2;&#x6570;&#x3001;catalina&#x53C2;&#x6570;&#x7B49;&#x3002;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x7684;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x53D8;&#x91CF;&#x540D;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody>
<tr>
<td>CATALINA_HOME</td>
<td>tomcat&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;</td>
</tr>
<tr>
<td>CATALINA_BASE</td>
<td>tomcat&#x5B9E;&#x4F8B;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</td>
</tr>
<tr>
<td>CATALINA_OPTS</td>
<td><code>start</code>&#x3001;<code>run</code>&#x6216;&#x8005;<code>debug</code>&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x7684;Java&#x865A;&#x62DF;&#x673A;&#x53C2;&#x6570;&#x3002;&#x53EA;&#x80FD;&#x88AB;tomcat&#x81EA;&#x8EAB;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5728;<code>stop</code>&#x548C;<code>version</code>&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x4E0D;&#x4F7F;&#x7528;&#x3002;&#x6CE8;&#x610F;&#x533A;&#x5206;<code>JAVA_OPTS</code></td>
</tr>
<tr>
<td>JAVA_HOME</td>
<td>Java&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF0C;&#x4EC5;&#x5728;&#x4F7F;&#x7528;<code>debug</code>&#x53C2;&#x6570;&#x542F;&#x52A8;&#x65F6;&#x6709;&#x7528;</td>
</tr>
<tr>
<td>JRE_HOME</td>
<td>Java&#x8FD0;&#x884C;&#x65F6;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x53C2;&#x6570;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C06;&#x4F7F;&#x7528;<code>JAVA_HOME</code>&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;<code>JAVA_HOME</code>&#x548C;<code>JRE_HOME</code>&#x90FD;&#x8BBE;&#x7F6E;&#x4E86;&#xFF0C;&#x5C06;&#x4F7F;&#x7528;<code>JRE_HOME</code></td>
</tr>
<tr>
<td>JAVA_OPTS</td>
<td>&#x7528;&#x4E8E;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x547D;&#x4EE4;&#x65F6;&#x7684;Java&#x865A;&#x62DF;&#x673A;&#x53C2;&#x6570;&#xFF0C;&#x65E2;&#x80FD;&#x88AB;tomcat&#x81EA;&#x8EAB;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x5728;<code>stop</code>&#x548C;<code>version</code>&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x4F7F;&#x7528;&#x3002;&#x6CE8;&#x610F;&#x533A;&#x5206;<code>CATALINA_OPTS</code></td>
</tr>
<tr>
<td>LOGGING_CONFIG</td>
<td>tomcat&#x65E5;&#x5FD7;&#x914D;&#x7F6E;&#x53D8;&#x91CF;&#x3002;&#x4F8B;&#x5982;&#xFF1A; <code>set LOGGING_CONFIG=&quot;-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties&quot;</code></td>
</tr>
<tr>
<td>LOGGING_MANAGER</td>
<td>tomcat&#x65E5;&#x5FD7;&#x7BA1;&#x7406;&#x53D8;&#x91CF;&#x3002;&#x4F8B;&#x5982;&#xFF1A; <code>set LOGGING_MANAGER=&quot;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&quot;</code></td>
</tr>
</tbody>
</table>
<p>&#x4EE5;&#x4E0A;&#x53EA;&#x662F;&#x5E38;&#x7528;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5173;&#x4E8E;setenv&#x811A;&#x672C;&#x7684;&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x5185;&#x5BB9;&#x8BF7;&#x53C2;&#x8003;<code>CATALINA_HOME\bin\</code>&#x76EE;&#x5F55;&#x4E0B;&#x7684;<code>catalina.bat</code>&#x6216;<code>catalina.sh</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x4ECB;&#x7ECD;&#x3002;<br><a id="more"></a></p>
<h3 id="setenv-bat&#x6587;&#x4EF6;&#x793A;&#x4F8B;"><a href="#setenv-bat&#x6587;&#x4EF6;&#x793A;&#x4F8B;" class="headerlink" title="setenv.bat&#x6587;&#x4EF6;&#x793A;&#x4F8B;"></a>setenv.bat&#x6587;&#x4EF6;&#x793A;&#x4F8B;</h3><figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">@<span class="built_in">echo</span> off</div><div class="line"><span class="built_in">echo</span> ========  setenv <span class="built_in">start</span>  ========</div><div class="line"><span class="comment">rem &#x8BBE;&#x7F6E;JRE&#x6839;&#x76EE;&#x5F55;</span></div><div class="line"><span class="built_in">set</span> JRE_HOME=D:\Program Files\Java\jdk1.<span class="number">8</span>.<span class="number">0</span>_102\jre</div><div class="line"><span class="comment">rem &#x8BBE;&#x7F6E;JAVA&#x6839;&#x76EE;&#x5F55;</span></div><div class="line"><span class="built_in">set</span> JAVA_HOME=D:\Program Files\Java\jdk1.<span class="number">8</span>.<span class="number">0</span>_102</div><div class="line"><span class="comment">rem &#x8BBE;&#x7F6E;JAVA_OPTS</span></div><div class="line"><span class="built_in">set</span> JAVA_OPTS=<span class="variable">%JAVA_OPTS%</span></div><div class="line"><span class="comment">rem &#x8BBE;&#x7F6E;CATALINA_OPTS</span></div><div class="line"><span class="built_in">set</span> CATALINA_OPTS=-Dfile.encoding=UTF-<span class="number">8</span> -Duser.timezone=GMT+<span class="number">8</span></div><div class="line"><span class="built_in">echo</span> Using JRE_HOME:             <span class="variable">%JRE_HOME%</span></div><div class="line"><span class="built_in">echo</span> Using JAVA_HOME:            <span class="variable">%JAVA_HOME%</span></div><div class="line"><span class="built_in">echo</span> Using JAVA_OPTS:            <span class="variable">%JAVA_OPTS%</span></div><div class="line"><span class="built_in">echo</span> Using CATALINA_OPTS:        <span class="variable">%CATALINA_OPTS%</span></div><div class="line"><span class="built_in">echo</span> ======== setenv over ========</div></pre></td></tr></table></figure>
<h3 id="&#x5173;&#x4E8E;CATALINA-HOME-&#x548C;-CATALINA-BASE"><a href="#&#x5173;&#x4E8E;CATALINA-HOME-&#x548C;-CATALINA-BASE" class="headerlink" title="&#x5173;&#x4E8E;CATALINA_HOME &#x548C; CATALINA_BASE"></a>&#x5173;&#x4E8E;CATALINA_HOME &#x548C; CATALINA_BASE</h3><p><code>CATALINA_HOME</code>&#x662F;tomcat&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF0C;<code>CATALINA_BASE</code>&#x662F;tomcat&#x5B9E;&#x4F8B;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x3002;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x4F8B;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x3002;</p>
<p><code>CATALINA_BASE</code>&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#xFF1A;</p>
<ul class="ui list">
<li><p>bin  - &#x53EA;&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x6587;&#x4EF6;:</p>
<pre><code> * setenv.sh (*nix) or setenv.bat (Windows),
 * tomcat-juli.jar

The setenv scripts were described above. The tomcat-juli library
is documented in the Logging chapter in the User Guide.
</code></pre></li>
<li><p>conf - &#x670D;&#x52A1;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x76EE;&#x5F55; (including server.xml)</p>
</li>
<li><p>lib  - &#x5E93;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x3002;&#x5EFA;&#x8BAE;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x548C;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x5E93;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x5728;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;</p>
</li>
<li><p>logs - &#x65E5;&#x5FD7;&#x548C;&#x8F93;&#x51FA;&#x76EE;&#x5F55;</p>
</li>
<li><p>webapps - &#x81EA;&#x52A8;&#x52A0;&#x8F7D;&#x7684;web&#x5E94;&#x7528;&#x76EE;&#x5F55;</p>
</li>
<li><p>work - web&#x5E94;&#x7528;&#x7684;&#x4E34;&#x65F6;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</p>
</li>
<li><p>temp - JVM&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x76EE;&#x5F55;(java.io.tmpdir)</p>
</li>
</ul>
<p><code>CATALINA_HOME</code>&#x5305;&#x542B;&#x4EE5;&#x4E0B;&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#xFF1A;</p>
<ul class="ui list">
<li><p>bin  - &#x542F;&#x52A8;&#x548C;&#x5173;&#x95ED;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x76EE;&#x5F55;</p>
<pre><code>&#x5F53;&#x4EE5;&#x4E0B;&#x6587;&#x4EF6;&#x4E0D;&#x5728;`CATALINA_BASE/bin`&#x76EE;&#x5F55;&#x65F6;&#x5C06;&#x4F1A;&#x88AB;&#x4F7F;&#x7528;:

setenv.sh (*nix), setenv.bat (Windows), tomcat-juli.jar
</code></pre></li>
<li><p>lib  - &#x5E93;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x3002;&#x5EFA;&#x8BAE;&#x53EA;&#x653E;&#x7F6E;&#x6807;&#x51C6;tomcat&#x5E93;&#x6587;&#x4EF6;</p>
</li>
</ul>
<p>&#x5173;&#x4E8E;CATALINA_HOME &#x548C; CATALINA_BASE&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="https://github.com/apache/tomcat/blob/trunk/RUNNING.txt" target="_blank" rel="external">RUNNING.txt</a><br>&#x5176;&#x4E2D;&#x5173;&#x4E8E;&#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x539F;&#x6587;&#x63CF;&#x8FF0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">==================================================</div><div class="line">Advanced Configuration - Multiple Tomcat Instances</div><div class="line">==================================================</div><div class="line"></div><div class="line">In many circumstances, it is desirable to have a single copy of a Tomcat</div><div class="line">binary distribution shared among multiple users on the same server.  To make</div><div class="line">this possible, you can set the CATALINA_BASE environment variable to the</div><div class="line">directory that contains the files for your &apos;personal&apos; Tomcat instance.</div><div class="line"></div><div class="line">When running with a separate CATALINA_HOME and CATALINA_BASE, the files</div><div class="line">and directories are split as following:</div><div class="line"></div><div class="line">In CATALINA_BASE:</div><div class="line"></div><div class="line"> * bin  - Only the following files:</div><div class="line"></div><div class="line">           * setenv.sh (*nix) or setenv.bat (Windows),</div><div class="line">           * tomcat-juli.jar</div><div class="line"></div><div class="line">          The setenv scripts were described above. The tomcat-juli library</div><div class="line">          is documented in the Logging chapter in the User Guide.</div><div class="line"></div><div class="line"> * conf - Server configuration files (including server.xml)</div><div class="line"></div><div class="line"> * lib  - Libraries and classes, as explained below</div><div class="line"></div><div class="line"> * logs - Log and output files</div><div class="line"></div><div class="line"> * webapps - Automatically loaded web applications</div><div class="line"></div><div class="line"> * work - Temporary working directories for web applications</div><div class="line"></div><div class="line"> * temp - Directory used by the JVM for temporary files (java.io.tmpdir)</div><div class="line"></div><div class="line"></div><div class="line">In CATALINA_HOME:</div><div class="line"></div><div class="line"> * bin  - Startup and shutdown scripts</div><div class="line"></div><div class="line">          The following files will be used only if they are absent in</div><div class="line">          CATALINA_BASE/bin:</div><div class="line"></div><div class="line">          setenv.sh (*nix), setenv.bat (Windows), tomcat-juli.jar</div><div class="line"></div><div class="line"> * lib  - Libraries and classes, as explained below</div><div class="line"></div><div class="line">In the default configuration the JAR libraries and classes both in</div><div class="line">CATALINA_BASE/lib and in CATALINA_HOME/lib will be added to the common</div><div class="line">classpath, but the ones in CATALINA_BASE will be added first and thus will</div><div class="line">be searched first.</div><div class="line"></div><div class="line">The idea is that you may leave the standard Tomcat libraries in</div><div class="line">CATALINA_HOME/lib and add other ones such as database drivers into</div><div class="line">CATALINA_BASE/lib.</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;setenv.bat(linux下是setenv.sh)文件是tomcat的自定义变量脚本文件，该脚本文件放置在&lt;code&gt;CATALINA_HOME\bin\&lt;/code&gt;或&lt;code&gt;CATALINA_BASE\bin\&lt;/code&gt;目录下，该文件需要用户自己创建。在该文件中可以指定java环境变量、jvm参数、catalina参数等。可以设置的参数如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;变量名&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CATALINA_HOME&lt;/td&gt;
&lt;td&gt;tomcat的安装目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CATALINA_BASE&lt;/td&gt;
&lt;td&gt;tomcat实例的工作目录&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CATALINA_OPTS&lt;/td&gt;
&lt;td&gt;&lt;code&gt;start&lt;/code&gt;、&lt;code&gt;run&lt;/code&gt;或者&lt;code&gt;debug&lt;/code&gt;命令执行时的Java虚拟机参数。只能被tomcat自身使用，但在&lt;code&gt;stop&lt;/code&gt;和&lt;code&gt;version&lt;/code&gt;命令执行时不使用。注意区分&lt;code&gt;JAVA_OPTS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JAVA_HOME&lt;/td&gt;
&lt;td&gt;Java开发工具安装路径，仅在使用&lt;code&gt;debug&lt;/code&gt;参数启动时有用&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JRE_HOME&lt;/td&gt;
&lt;td&gt;Java运行时安装路径，如果该参数为空，将使用&lt;code&gt;JAVA_HOME&lt;/code&gt;的值，如果&lt;code&gt;JAVA_HOME&lt;/code&gt;和&lt;code&gt;JRE_HOME&lt;/code&gt;都设置了，将使用&lt;code&gt;JRE_HOME&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;JAVA_OPTS&lt;/td&gt;
&lt;td&gt;用于执行任何命令时的Java虚拟机参数，既能被tomcat自身使用，也在&lt;code&gt;stop&lt;/code&gt;和&lt;code&gt;version&lt;/code&gt;命令执行时使用。注意区分&lt;code&gt;CATALINA_OPTS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOGGING_CONFIG&lt;/td&gt;
&lt;td&gt;tomcat日志配置变量。例如： &lt;code&gt;set LOGGING_CONFIG=&amp;quot;-Djava.util.logging.config.file=%CATALINA_BASE%\conf\logging.properties&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LOGGING_MANAGER&lt;/td&gt;
&lt;td&gt;tomcat日志管理变量。例如： &lt;code&gt;set LOGGING_MANAGER=&amp;quot;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;以上只是常用的变量，关于setenv脚本的更多详细内容请参考&lt;code&gt;CATALINA_HOME\bin\&lt;/code&gt;目录下的&lt;code&gt;catalina.bat&lt;/code&gt;或&lt;code&gt;catalina.sh&lt;/code&gt;文件中的介绍。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="tomcat" scheme="https://yyhan.github.io/tags/tomcat/"/>
    
      <category term="setenv" scheme="https://yyhan.github.io/tags/setenv/"/>
    
  </entry>
  
  <entry>
    <title>hadoop集群搭建</title>
    <link href="https://yyhan.github.io/2016/12/22/hadoop%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    <id>https://yyhan.github.io/2016/12/22/hadoop集群搭建/</id>
    <published>2016-12-22T03:29:20.000Z</published>
    <updated>2017-06-18T13:19:00.469Z</updated>
    
    <content type="html"><![CDATA[<h1 id="&#x7CFB;&#x7EDF;&#x53CA;&#x8F6F;&#x4EF6;&#x7248;&#x672C;"><a href="#&#x7CFB;&#x7EDF;&#x53CA;&#x8F6F;&#x4EF6;&#x7248;&#x672C;" class="headerlink" title="&#x7CFB;&#x7EDF;&#x53CA;&#x8F6F;&#x4EF6;&#x7248;&#x672C;"></a>&#x7CFB;&#x7EDF;&#x53CA;&#x8F6F;&#x4EF6;&#x7248;&#x672C;</h1><ul class="ui list">
<li>ubuntu server 16.10</li>
<li>jdk 1.8.0_111</li>
<li>hadoop 2.7.3</li>
</ul>
<h1 id="&#x96C6;&#x7FA4;&#x914D;&#x7F6E;"><a href="#&#x96C6;&#x7FA4;&#x914D;&#x7F6E;" class="headerlink" title="&#x96C6;&#x7FA4;&#x914D;&#x7F6E;"></a>&#x96C6;&#x7FA4;&#x914D;&#x7F6E;</h1><h2 id="IP&#x53CA;&#x57DF;&#x540D;&#x5206;&#x914D;"><a href="#IP&#x53CA;&#x57DF;&#x540D;&#x5206;&#x914D;" class="headerlink" title="IP&#x53CA;&#x57DF;&#x540D;&#x5206;&#x914D;"></a>IP&#x53CA;&#x57DF;&#x540D;&#x5206;&#x914D;</h2><table>
<thead>
<tr>
<th>&#x4E3B;&#x673A;&#x540D;</th>
<th>ip</th>
</tr>
</thead>
<tbody>
<tr>
<td>master</td>
<td>192.168.2.100</td>
</tr>
<tr>
<td>slave1</td>
<td>192.168.2.101</td>
</tr>
<tr>
<td>slave2</td>
<td>192.168.2.102</td>
</tr>
</tbody>
</table>
<p>&#x96C6;&#x7FA4;&#x642D;&#x5EFA;&#x5728;VM&#x865A;&#x62DF;&#x673A;&#x4E0A;&#xFF0C;&#x5404;&#x865A;&#x62DF;&#x673A;&#x91C7;&#x7528;nat&#x65B9;&#x5F0F;&#x8FDE;&#x63A5;&#xFF0C;&#x5B50;&#x7F51;ip&#xFF1A;<code>192.168.2.0</code>&#xFF0C;&#x4E3B;&#x673A;&#x540D;&#x914D;&#x7F6E;&#x5728;&#x5404;&#x865A;&#x62DF;&#x673A;host&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#xFF08;&#x63D0;&#x793A;&#xFF1A;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x914D;&#x7F6E;&#x597D;&#x540E;&#xFF0C;&#x590D;&#x5236;&#x4E09;&#x4EFD;&#x5373;&#x53EF;&#xFF09;<br>&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6CE8;&#x610F;&#x8981;&#x5C06;&#x865A;&#x62DF;&#x673A;&#x6539;&#x4E3A;&#x9759;&#x6001;ip&#xFF0C;&#x907F;&#x514D;&#x91CD;&#x542F;&#x540E;ip&#x6539;&#x53D8;&#xFF0C;&#x5BFC;&#x81F4;host&#x914D;&#x7F6E;&#x5931;&#x6548;&#x3002;</p>
<h2 id="&#x7528;&#x6237;"><a href="#&#x7528;&#x6237;" class="headerlink" title="&#x7528;&#x6237;"></a>&#x7528;&#x6237;</h2><p>&#x5355;&#x72EC;&#x5EFA;&#x7ACB;hadoop&#x7528;&#x6237;&#xFF0C;&#x7528;&#x4E8E;&#x8FD0;&#x884C;hadoop&#x8FDB;&#x7A0B;</p>
<h2 id="&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;"><a href="#&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;" class="headerlink" title="&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;"></a>&#x8F6F;&#x4EF6;&#x5B89;&#x88C5;</h2><h3 id="jdk-&#x548C;-Hadoop&#x5B89;&#x88C5;"><a href="#jdk-&#x548C;-Hadoop&#x5B89;&#x88C5;" class="headerlink" title="jdk &#x548C; Hadoop&#x5B89;&#x88C5;"></a>jdk &#x548C; Hadoop&#x5B89;&#x88C5;</h3><p>jdk&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF1A;<code>/usr/bin/java/jdk1.8.0_111</code><br>Hadoop&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF1A;<code>/home/hadoop/hadoop/hadoop-2.7.3</code>(hadoop&#x7528;&#x6237;&#x7684;&#x4E3B;&#x76EE;&#x5F55;&#x5373;&#x53EF;)<br>&#x5728;<code>/etc/profile</code>&#x6587;&#x4EF6;&#x4E2D;&#x8FFD;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/bin/java/jdk1.8.0_111</div><div class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</div><div class="line"><span class="built_in">export</span> HADOOP_HOME=/home/hadoop/hadoop/hadoop-2.7.3</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/bin</div></pre></td></tr></table></figure></p>
<h2 id="Hadoop&#x914D;&#x7F6E;"><a href="#Hadoop&#x914D;&#x7F6E;" class="headerlink" title="Hadoop&#x914D;&#x7F6E;"></a>Hadoop&#x914D;&#x7F6E;</h2><p>Hadoop&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x90FD;&#x5728;<code>$HADOOP_HOME/etc/hadoop</code> &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#x5747;&#x5728;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;&#x3002;  </p>
<h3 id="hadoop-env-sh"><a href="#hadoop-env-sh" class="headerlink" title="hadoop-env.sh"></a>hadoop-env.sh</h3><p>&#x627E;&#x5230;&#x8BE5;&#x6587;&#x4EF6;&#x91CC;&#x7684;JAVA_HOME&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x5E76;&#x6307;&#x5B9A;jdk&#x7684;<code>&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</code>&#xFF08;&#x5FC5;&#x987B;&#x662F;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF09;:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/bin/java/jdk1.8.0_111</div></pre></td></tr></table></figure></p>
<h3 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/home/hadoop/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>slave1:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/home/hadoop/hadoop/tmp/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/home/hadoop/hadoop/tmp/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="mapred-site-xml"><a href="#mapred-site-xml" class="headerlink" title="mapred-site.xml"></a>mapred-site.xml</h3><p>&#x8BE5;&#x6587;&#x4EF6;&#x5728;&#x539F;&#x59CB;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x91CC;&#x6CA1;&#x6709;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>mv mapred-site.xml.template mapred-site.xml</code>&#x521B;&#x5EFA;&#x3002;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="yarn-site-xml"><a href="#yarn-site-xml" class="headerlink" title="yarn-site.xml"></a>yarn-site.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-service<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-service.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="masters"><a href="#masters" class="headerlink" title="masters"></a>masters</h3><p>&#x8BE5;&#x6587;&#x4EF6;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x4E3B;&#x8282;&#x70B9;&#x4FE1;&#x606F;&#xFF0C;&#x6BCF;&#x884C;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3002;&#x8BE5;&#x6587;&#x4EF6;&#x5728;&#x539F;&#x59CB;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x91CC;&#x6CA1;&#x6709;&#xFF0C;&#x9700;&#x8981;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">slave1</div></pre></td></tr></table></figure></p>
<h3 id="slaves"><a href="#slaves" class="headerlink" title="slaves"></a>slaves</h3><p>&#x8BE5;&#x6587;&#x4EF6;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x4ECE;&#x8282;&#x70B9;&#x4FE1;&#x606F;&#xFF0C;&#x6BCF;&#x884C;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">slave1</div><div class="line">slave2</div></pre></td></tr></table></figure></p>
<blockquote>
<p>&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x865A;&#x62DF;&#x673A;&#x590D;&#x5236;&#x4E24;&#x4EFD;&#xFF0C;&#x5E76;&#x5C06;ip&#xFF0C;&#x5206;&#x522B;&#x6307;&#x5B9A;&#x4E3A;<code>192.168.2.101</code>&#x548C;<code>192.168.2.102</code>&#x3002;</p>
</blockquote>
<h2 id="ssh&#x914D;&#x7F6E;"><a href="#ssh&#x914D;&#x7F6E;" class="headerlink" title="ssh&#x914D;&#x7F6E;"></a>ssh&#x914D;&#x7F6E;</h2><p>&#x751F;&#x6210;ssh&#x5BC6;&#x94A5;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;&#x4E00;&#x8DEF;&#x56DE;&#x8F66;&#x5373;&#x53EF;&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa</div></pre></td></tr></table></figure></p>
<p>&#x5C06;&#x516C;&#x94A5;&#x62F7;&#x8D1D;&#x5230;&#x5176;&#x5B83;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x5B9E;&#x73B0;&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ssh-copy-id master</div><div class="line">ssh-copy-id slave1</div><div class="line">ssh-copy-id slave2</div></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x6837;&#x4F1A;&#x5728;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x7684;hadoop&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;&#x4E0B;&#x7684;.ssh&#x76EE;&#x5F55;&#x4E0B;&#x751F;&#x6210;&#x4E00;&#x4E2A;authorized_keys&#x6587;&#x4EF6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x5C31;&#x8BB0;&#x5F55;&#x4E86;&#x521A;&#x624D;&#x751F;&#x6210;&#x7684;&#x516C;&#x94A5;&#x5185;&#x5BB9;&#x3002;</p>
<h1 id="&#x542F;&#x52A8;"><a href="#&#x542F;&#x52A8;" class="headerlink" title="&#x542F;&#x52A8;"></a>&#x542F;&#x52A8;</h1><p>&#x4F7F;&#x7528;hadoop&#x7528;&#x6237;&#x767B;&#x5F55;&#x3002;<br>&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;&#xFF0C;&#x5728;<code>$HADOOP_HOME</code>&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./bin/hdfs namenode -format</div></pre></td></tr></table></figure></p>
<p>&#x542F;&#x52A8;hdfs&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./sbin/start-dfs.sh</div></pre></td></tr></table></figure></p>
<p>&#x542F;&#x52A8;hdfs&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x663E;&#x793A;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Starting namenodes on [master]</div><div class="line">master: starting namenode, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/hadoop-hadoop-namenode-ubuntu.out</div><div class="line">slave1: starting datanode, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/hadoop-hadoop-datanode-ubuntu.out</div><div class="line">slave2: starting datanode, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/hadoop-hadoop-datanode-ubuntu.out</div><div class="line">Starting secondary namenodes [slave1]</div><div class="line">slave1: starting secondarynamenode, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/hadoop-hadoop-secondarynamenode-ubuntu.out</div></pre></td></tr></table></figure></p>
<p>&#x542F;&#x52A8;yarn&#xFF1A;<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./sbin/start-yarn.sh</div></pre></td></tr></table></figure></p>
<p>&#x542F;&#x52A8;yarn&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x663E;&#x793A;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">starting yarn daemons</div><div class="line">starting resourcemanager, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/yarn-hadoop-resourcemanager-ubuntu.out</div><div class="line">slave1: starting nodemanager, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/yarn-hadoop-nodemanager-ubuntu.out</div><div class="line">slave2: starting nodemanager, logging to /home/hadoop/hadoop/hadoop-2.7.3/logs/yarn-hadoop-nodemanager-ubuntu.out</div></pre></td></tr></table></figure></p>
<p>&#x4F7F;&#x7528;<code>jps</code>&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x542F;&#x52A8;&#xFF0C;&#x663E;&#x793A;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x8868;&#x793A;&#x542F;&#x52A8;&#x6210;&#x529F;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1257 NameNode</div><div class="line">1530 ResourceManager</div><div class="line">1787 Jps</div></pre></td></tr></table></figure></p>
<p>&#x901A;&#x8FC7;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;hdfs&#xFF1A;<code>192.168.2.100:50070</code><br><a class="magnific-img" href="/img/hadoop/hadoop-hdfs.png"><img src="/img/hadoop/hadoop-hdfs.png" alt="Image of Yaktocat" class="ui centered image"></a></p>
<p>&#x901A;&#x8FC7;&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;yarn&#xFF1A;<code>192.168.2.100:8088</code><br><a class="magnific-img" href="/img/hadoop/hadoop-yarn.png"><img src="/img/hadoop/hadoop-yarn.png" alt="Image of Yaktocat" class="ui centered image"></a></p>
<p>&#x7ED3;&#x675F;&#x3002;</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x7CFB;&amp;#x7EDF;&amp;#x53CA;&amp;#x8F6F;&amp;#x4EF6;&amp;#x7248;&amp;#x672C;&quot;&gt;&lt;a href=&quot;#&amp;#x7CFB;&amp;#x7EDF;&amp;#x53CA;&amp;#x8F6F;&amp;#x4EF6;&amp;#x7248;&amp;#x672C;&quot; class=
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="hadoop" scheme="https://yyhan.github.io/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>HttpClient库使用示例</title>
    <link href="https://yyhan.github.io/2016/12/12/HttpClient%E5%BA%93%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    <id>https://yyhan.github.io/2016/12/12/HttpClient库使用示例/</id>
    <published>2016-12-12T14:42:31.000Z</published>
    <updated>2016-12-12T15:08:10.980Z</updated>
    
    <content type="html"><![CDATA[<p>HttpClient&#x662F;apache common&#x4E0B;&#x7684;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x7528;&#x6765;&#x63D0;&#x4F9B;&#x9AD8;&#x6548;&#x7684;&#x3001;&#x529F;&#x80FD;&#x4E30;&#x5BCC;&#x7684;&#x652F;&#x6301;Http&#x534F;&#x8BAE;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7F16;&#x7A0B;&#x5DE5;&#x5177;&#x5305;&#x3002;</p>
<p><a href="http://hc.apache.org/" target="_blank" rel="external">&#x5B98;&#x7F51;</a></p>
<p>&#x4F9D;&#x8D56;&#x7248;&#x672C;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>&#x4EE3;&#x7801;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.demo.utils.lang;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.commons.lang3.CharEncoding;</div><div class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</div><div class="line"><span class="keyword">import</span> org.apache.http.HttpException;</div><div class="line"><span class="keyword">import</span> org.apache.http.HttpStatus;</div><div class="line"><span class="keyword">import</span> org.apache.http.StatusLine;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.ClientProtocolException;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</div><div class="line"><span class="keyword">import</span> org.apache.http.client.methods.RequestBuilder;</div><div class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</div><div class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</div><div class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</div><div class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* Created by hyf on 2016/8/31.</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>{</div><div class="line"></div><div class="line">    <span class="keyword">private</span> CloseableHttpClient httpClient;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HttpUtil ourInstance = <span class="keyword">new</span> HttpUtil();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpUtil <span class="title">getInstance</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">return</span> ourInstance;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HttpUtil</span><span class="params">()</span> </span>{</div><div class="line">        httpClient = HttpClients.createDefault();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> CloseableHttpClient <span class="title">getHttpClient</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.httpClient;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x53D1;&#x9001;get&#x8BF7;&#x6C42;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> IOException</div><div class="line">    * <span class="doctag">@throws</span> ClientProtocolException</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String uri)</span> <span class="keyword">throws</span> HttpException, IOException </span>{</div><div class="line">        CloseableHttpResponse response = <span class="keyword">null</span>;</div><div class="line">        HttpEntity entity = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            response = getHttpClient().execute(<span class="keyword">new</span> HttpGet(uri));</div><div class="line">            StatusLine statusLine = response.getStatusLine();</div><div class="line">            <span class="keyword">if</span> (statusLine.getStatusCode() == HttpStatus.SC_OK) {</div><div class="line">                <span class="keyword">return</span> EntityUtils.toString(response.getEntity());</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> HttpException(statusLine.toString());</div><div class="line">            }</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (entity != <span class="keyword">null</span>) {</div><div class="line">                    EntityUtils.consume(entity);</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (response != <span class="keyword">null</span>) {</div><div class="line">                    response.close();</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * get&#x65B9;&#x5F0F;&#x53D1;&#x9001;form&#x8868;&#x5355;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri        &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@param</span> parameters &#x8868;&#x5355;&#x53C2;&#x6570;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> Exception</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String uri, Map&lt;String, ?&gt; parameters)</span> <span class="keyword">throws</span> HttpException, IOException </span>{</div><div class="line">        <span class="keyword">return</span> send(uri, parameters, HttpGet.METHOD_NAME);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * post&#x65B9;&#x5F0F;&#x53D1;&#x9001;form&#x8868;&#x5355;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri        &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@param</span> parameters &#x8868;&#x5355;&#x53C2;&#x6570;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> Exception</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">post</span><span class="params">(String uri, Map&lt;String, ?&gt; parameters)</span> <span class="keyword">throws</span> HttpException, IOException </span>{</div><div class="line">        <span class="keyword">return</span> send(uri, parameters, HttpPost.METHOD_NAME);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * post&#x65B9;&#x5F0F;&#x53D1;&#x9001;form&#x8868;&#x5355;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri        &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@param</span> parameters &#x8868;&#x5355;&#x53C2;&#x6570;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> Exception</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">send</span><span class="params">(String uri, Map&lt;String, ?&gt; parameters, <span class="keyword">final</span> String method)</span> <span class="keyword">throws</span> HttpException, IOException </span>{</div><div class="line">        CloseableHttpResponse response = <span class="keyword">null</span>;</div><div class="line">        HttpEntity entity = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            RequestBuilder builder = RequestBuilder.create(method).setUri(uri);</div><div class="line">            <span class="keyword">for</span> (String k : parameters.keySet()) {</div><div class="line">                Object v = parameters.get(k);</div><div class="line">                <span class="keyword">if</span> (v == <span class="keyword">null</span>) {</div><div class="line">                    builder.addParameter(k, <span class="string">&quot;&quot;</span>);</div><div class="line">                } <span class="keyword">else</span> {</div><div class="line">                    builder.addParameter(k, v.toString());</div><div class="line">                }</div><div class="line">            }</div><div class="line">            response = getHttpClient().execute(builder.build());</div><div class="line">            StatusLine statusLine = response.getStatusLine();</div><div class="line">            <span class="keyword">if</span> (statusLine.getStatusCode() == HttpStatus.SC_OK) {</div><div class="line">                <span class="keyword">return</span> EntityUtils.toString(response.getEntity());</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> HttpException(statusLine.toString());</div><div class="line">            }</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (entity != <span class="keyword">null</span>) {</div><div class="line">                    EntityUtils.consume(entity);</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (response != <span class="keyword">null</span>) {</div><div class="line">                    response.close();</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x6839;&#x636E;request&#x548C;uri&#x83B7;&#x5F97;&#x54CD;&#x5E94;&#x4FE1;&#x606F;,&#x4F7F;&#x7528;post&#x65B9;&#x5F0F;&#x83B7;&#x53D6;,&#x4F7F;&#x7528;UTF-8&#x7F16;&#x7801;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri    &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@param</span> bodyTxt http&#x8BF7;&#x6C42;body&#x5185;&#x5BB9;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> IOException</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">post</span><span class="params">(String uri, String bodyTxt)</span> <span class="keyword">throws</span> IOException, HttpException </span>{</div><div class="line">        <span class="keyword">return</span> post(uri, bodyTxt, CharEncoding.UTF_8);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x53D1;&#x9001;post&#x8BF7;&#x6C42;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> uri      &#x8BF7;&#x6C42;&#x5730;&#x5740;</div><div class="line">    * <span class="doctag">@param</span> bodyTxt  http&#x8BF7;&#x6C42;body&#x5185;&#x5BB9;</div><div class="line">    * <span class="doctag">@param</span> encoding &#x7F16;&#x7801;&#x7C7B;&#x578B;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> IOException</div><div class="line">    * <span class="doctag">@throws</span> HttpException</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">post</span><span class="params">(String uri, String bodyTxt, String encoding)</span> <span class="keyword">throws</span> IOException, HttpException </span>{</div><div class="line">        CloseableHttpResponse response = <span class="keyword">null</span>;</div><div class="line">        HttpEntity entity = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            response = getHttpClient().execute(</div><div class="line">                    RequestBuilder.post(uri)</div><div class="line">                            .setEntity(<span class="keyword">new</span> StringEntity(bodyTxt, encoding))</div><div class="line">                            .build());</div><div class="line">            StatusLine statusLine = response.getStatusLine();</div><div class="line">            <span class="keyword">if</span> (statusLine.getStatusCode() == HttpStatus.SC_OK) {</div><div class="line">                entity = response.getEntity();</div><div class="line">                <span class="keyword">return</span> EntityUtils.toString(entity);</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> HttpException(statusLine.toString());</div><div class="line">            }</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (entity != <span class="keyword">null</span>) {</div><div class="line">                    EntityUtils.consume(entity);</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">            <span class="keyword">try</span> {</div><div class="line">                <span class="keyword">if</span> (response != <span class="keyword">null</span>) {</div><div class="line">                    response.close();</div><div class="line">                }</div><div class="line">            } <span class="keyword">catch</span> (IOException e) {</div><div class="line">                e.printStackTrace();</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;HttpClient&amp;#x662F;apache common&amp;#x4E0B;&amp;#x7684;&amp;#x5B50;&amp;#x9879;&amp;#x76EE;&amp;#xFF0C;&amp;#x7528;&amp;#x6765;&amp;#x63D0;&amp;#x4F9B;&amp;#x9AD8;&amp;#x6548;&amp;#x7684;&amp;#
    
    </summary>
    
      <category term="代码示例" scheme="https://yyhan.github.io/categories/%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/"/>
    
    
      <category term="HttpClient" scheme="https://yyhan.github.io/tags/HttpClient/"/>
    
      <category term="http" scheme="https://yyhan.github.io/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>idea乱码问题</title>
    <link href="https://yyhan.github.io/2016/12/12/idea%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/"/>
    <id>https://yyhan.github.io/2016/12/12/idea乱码问题/</id>
    <published>2016-12-12T13:02:58.000Z</published>
    <updated>2017-06-18T13:19:54.358Z</updated>
    
    <content type="html"><![CDATA[<p>idea&#x4E71;&#x7801;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;</p>
<ul class="ui list">
<li>idea&#x542F;&#x52A8;&#x65F6;&#x7684;java&#x865A;&#x62DF;&#x673A;&#x7F16;&#x7801;</li>
<li>java&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x7F16;&#x7801;</li>
<li>maven&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x7B49;&#xFF09;&#x7F16;&#x7801;</li>
<li>java&#x9879;&#x76EE;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x5728;idea&#x4E2D;&#x8FD0;&#x884C;&#xFF09;&#x7F16;&#x7801;</li>
</ul>
<p>&#x8FD9;&#x51E0;&#x4E2A;&#x70B9;&#x4E5F;&#x4F1A;&#x4E92;&#x76F8;&#x5F71;&#x54CD;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x8BF4;&#x5355;&#x72EC;&#x6539;&#x4E86;&#x54EA;&#x4E2A;&#x914D;&#x7F6E;&#x80FD;&#x89E3;&#x51B3;&#x4E71;&#x7801;&#x95EE;&#x9898;&#xFF0C;&#x6700;&#x597D;&#x662F;&#x7EDF;&#x4E00;&#x6240;&#x6709;&#x7F16;&#x7801;&#x4E3A;<code>UTF-8</code>&#x3002;</p>
<blockquote>
<p>&#x5728;windows&#x4E0B;&#xFF0C;<code>git</code>&#x548C;<code>kdiff3</code>(git&#x9ED8;&#x8BA4;&#x7684;&#x5BF9;&#x6BD4;&#x5DE5;&#x5177;)&#x7684;&#x9ED8;&#x8BA4;&#x7F16;&#x7801;&#x4E3A;<code>&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7F16;&#x7801;</code>&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;git&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x7684;&#x8BDD;&#xFF0C;&#x6587;&#x4EF6;&#x7F16;&#x7801;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x6539;&#x6389;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#x4FEE;&#x6539;git&#x548C;kdiff3&#x7684;&#x7F16;&#x7801;&#x4E3A;<code>UTF-8</code></p>
</blockquote>
<h1 id="idea&#x542F;&#x52A8;&#x65F6;&#x7684;java&#x865A;&#x62DF;&#x673A;&#x7F16;&#x7801;"><a href="#idea&#x542F;&#x52A8;&#x65F6;&#x7684;java&#x865A;&#x62DF;&#x673A;&#x7F16;&#x7801;" class="headerlink" title="idea&#x542F;&#x52A8;&#x65F6;&#x7684;java&#x865A;&#x62DF;&#x673A;&#x7F16;&#x7801;"></a>idea&#x542F;&#x52A8;&#x65F6;&#x7684;java&#x865A;&#x62DF;&#x673A;&#x7F16;&#x7801;</h1><p><strong>&#x73B0;&#x8C61;:</strong>  </p>
<ul class="ui list">
<li>&#x63A7;&#x5236;&#x53F0;&#x4E71;&#x7801;</li>
</ul>
<p><strong>&#x89E3;&#x51B3;&#xFF1A;</strong><br>&#x627E;&#x5230;<code>IDEA_HOME\bin\idea.exe.vmoptions</code>&#x6216;<code>IDEA_HOME\bin\idea64.exe.vmoptions</code>&#xFF0C;&#x8FFD;&#x52A0;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-Dfile.encoding=UTF-8</div></pre></td></tr></table></figure></p>
<h1 id="java&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x7F16;&#x7801;"><a href="#java&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x7F16;&#x7801;" class="headerlink" title="java&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x7F16;&#x7801;"></a>java&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x7F16;&#x7801;</h1><p><strong>&#x73B0;&#x8C61;:</strong>  </p>
<ul class="ui list">
<li>java&#x6E90;&#x4EE3;&#x7801;&#x5408;&#x5E76;&#x3001;&#x6216;&#x7528;&#x5176;&#x5B83;&#x7F16;&#x8F91;&#x5668;&#x6253;&#x5F00;&#x65F6;&#x51FA;&#x73B0;&#x4E71;&#x7801;</li>
</ul>
<p><strong>&#x89E3;&#x51B3;&#xFF1A;</strong></p>
<ul class="ui list">
<li>&#x5C06;&#x5DF2;&#x6709;&#x7684;java&#x6E90;&#x7801;&#x6587;&#x4EF6;&#x5168;&#x90E8;&#x6539;&#x6210;<code>UTF-8</code>&#x7F16;&#x7801;</li>
<li>File -&gt; Settings -&gt; Editor -&gt; File Encodings &#x8FDB;&#x884C;&#x4EE5;&#x4E0B;&#x8BBE;&#x7F6E;&#xFF08;&#x4FDD;&#x8BC1;&#x4EE5;&#x540E;&#x65B0;&#x6DFB;&#x52A0;&#x7684;&#x6587;&#x4EF6;&#x7F16;&#x7801;&#x90FD;&#x662F;<code>UTF-8</code>&#x7F16;&#x7801;&#xFF09;&#xFF1A;<ul>
<li>IDE Encoding : UTF-8</li>
<li>Project Encoding : UTF-8</li>
<li>Default encoding for properties files : UTF-8</li>
</ul>
</li>
</ul>
<h1 id="maven&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x7B49;&#xFF09;&#x7F16;&#x7801;"><a href="#maven&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x7B49;&#xFF09;&#x7F16;&#x7801;" class="headerlink" title="maven&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x7B49;&#xFF09;&#x7F16;&#x7801;"></a>maven&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x6253;&#x5305;&#x7B49;&#xFF09;&#x7F16;&#x7801;</h1><p><strong>&#x73B0;&#x8C61;:</strong>  </p>
<ul class="ui list">
<li>&#x6267;&#x884C;maven&#x547D;&#x4EE4;&#x65F6;&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#x4E71;&#x7801;</li>
</ul>
<p><strong>&#x89E3;&#x51B3;&#xFF1A;</strong><br>&#x5728;<code>pom.xml</code>&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x6307;&#x5B9A;maven&#x7F16;&#x8BD1;&#x65F6;&#x7684;java&#x7248;&#x672C; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${maven-compiler-plugin.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x6307;&#x5B9A;maven&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7F16;&#x7801; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x89E3;&#x51B3;maven test&#x547D;&#x4EE4;&#x65F6;console&#x51FA;&#x73B0;&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x4E71;&#x7801; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.1 <span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.surefire<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>surefire-junit47<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">argLine</span>&gt;</span>-Dfile.encoding=UTF-8<span class="tag">&lt;/<span class="name">argLine</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">forkMode</span>&gt;</span>never<span class="tag">&lt;/<span class="name">forkMode</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- &#x6307;&#x5B9A;maven&#x6253;war&#x5305;&#x65F6;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7F16;&#x7801; --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">resourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">resourceEncoding</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="4-java&#x9879;&#x76EE;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x5728;idea&#x4E2D;&#x8FD0;&#x884C;&#xFF09;&#x7F16;&#x7801;"><a href="#4-java&#x9879;&#x76EE;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x5728;idea&#x4E2D;&#x8FD0;&#x884C;&#xFF09;&#x7F16;&#x7801;" class="headerlink" title="4. java&#x9879;&#x76EE;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x5728;idea&#x4E2D;&#x8FD0;&#x884C;&#xFF09;&#x7F16;&#x7801;"></a>4. java&#x9879;&#x76EE;&#x8FD0;&#x884C;&#x65F6;&#xFF08;&#x5728;idea&#x4E2D;&#x8FD0;&#x884C;&#xFF09;&#x7F16;&#x7801;</h1><p><strong>&#x73B0;&#x8C61;:</strong>  </p>
<ul class="ui list">
<li>&#x8FD0;&#x884C;java&#x9879;&#x76EE;&#x65F6;&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#x4E71;&#x7801;&#xFF08;&#x4F7F;&#x7528;tomcat&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x9875;&#x9762;&#x4E71;&#x7801;&#xFF09;</li>
</ul>
<p><strong>&#x89E3;&#x51B3;&#xFF1A;</strong><br>&#x5728;java&#x9879;&#x76EE;&#x7684;<code>Run/Debug Configurations</code>&#x7684;<code>VM options</code>&#x4E2D;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x6307;&#x4EE4;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-Dfile.encoding=UTF-8</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;idea&amp;#x4E71;&amp;#x7801;&amp;#x95EE;&amp;#x9898;&amp;#x4E3B;&amp;#x8981;&amp;#x6D89;&amp;#x53CA;&amp;#x51E0;&amp;#x4E2A;&amp;#x65B9;&amp;#x9762;&amp;#xFF1A;&lt;/p&gt;
&lt;ul class=&quot;ui list&quot;&gt;
&lt;li
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="idea" scheme="https://yyhan.github.io/tags/idea/"/>
    
      <category term="乱码" scheme="https://yyhan.github.io/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>hexo搭建博客教程汇总</title>
    <link href="https://yyhan.github.io/2016/12/12/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B%E6%B1%87%E6%80%BB/"/>
    <id>https://yyhan.github.io/2016/12/12/hexo搭建博客教程汇总/</id>
    <published>2016-12-12T12:39:23.000Z</published>
    <updated>2016-12-12T12:59:24.461Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4E00;&#x76F4;&#x60F3;&#x505A;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x4F46;&#x662F;&#x81EA;&#x5DF1;&#x8D70;&#x7684;&#x662F;java&#x8DEF;&#x7EBF;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x4F1A;&#x7528;php&#x653E;&#x5F03;&#x4E86;WordPress&#xFF0C;&#x56E0;&#x4E3A;&#x89C9;&#x5F97;jekyll&#x73AF;&#x5883;&#x642D;&#x5EFA;&#x9EBB;&#x70E6;&#x800C;&#x653E;&#x5F03;&#x4E86;jekyll&#x3002;&#x4E2D;&#x95F4;&#x5C1D;&#x8BD5;&#x8FC7;&#x81EA;&#x5DF1;&#x5199;&#x9759;&#x6001;&#x7AD9;&#x70B9;&#xFF0C;&#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;markdown&#x6587;&#x6863;&#xFF0C;&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x6E32;&#x67D3;&#x7684;&#x65B9;&#x5F0F;&#x5448;&#x73B0;&#x535A;&#x5BA2;&#x3002;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x9700;&#x8981;&#x7EAF;&#x624B;&#x5DE5;&#x5199;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x5206;&#x9875;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x6458;&#x8981;&#xFF0C;&#x800C;&#x4E2D;&#x9014;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x3002;&#x540E;&#x6765;&#x770B;&#x5230;&#x4E86;hexo&#x535A;&#x5BA2;&#x7CFB;&#x7EDF;&#xFF08;&#x53EA;&#x9700;&#x8981;&#x4F9D;&#x8D56;nodejs&#xFF0C;&#x5F3A;&#x8FEB;&#x60A3;&#x8005;&#x53EA;&#x559C;&#x6B22;&#x4F9D;&#x8D56;&#x5C11;&#x7684;&#x4EA7;&#x54C1;^_^&#xFF09;&#xFF0C;&#x8FD9;&#x4E24;&#x5929;&#x5C31;&#x5F00;&#x59CB;&#x6298;&#x817E;hexo&#x3002;&#x672C;&#x60F3;&#x5199;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#xFF0C;&#x5206;&#x4EAB;&#x4E0B;&#x6298;&#x817E;&#x7ECF;&#x9A8C;&#xFF0C;&#x7136;&#x800C;&#x53D1;&#x73B0;&#x7F51;&#x4E0A;&#x5DF2;&#x6709;&#x5F88;&#x591A;&#x540C;&#x5B66;&#x5206;&#x4EAB;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#x7684;&#x6559;&#x7A0B;&#xFF0C;&#x5C31;&#x4E0D;&#x518D;&#x91CD;&#x590D;&#x9020;&#x8F6E;&#x5B50;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x5217;&#x51FA;&#xFF0C;&#x6298;&#x817E;&#x8FC7;&#x7A0B;&#x4E2D;&#x53C2;&#x8003;&#x7684;&#x6559;&#x7A0B;&#x6216;&#x7F51;&#x7AD9;&#xFF0C;&#x4F9B;&#x5404;&#x4F4D;&#x53C2;&#x8003;&#x3002;</p>
<ul class="ui list">
<li>Xuanwo&#x2019;s Blog<a href="https://xuanwo.org/2015/03/26/hexo-intor/" target="_blank" rel="external">&#x53F2;&#x4E0A;&#x6700;&#x8BE6;&#x7EC6;&#x7684;Hexo&#x535A;&#x5BA2;&#x642D;&#x5EFA;&#x56FE;&#x6587;&#x6559;&#x7A0B;</a></li>
<li>&#x5C60;&#x592B;9441&#x7684;&#x535A;&#x5BA2;<a href="https://www.haomwei.com/technology/maupassant-hexo.html" target="_blank" rel="external">&#x5927;&#x9053;&#x81F3;&#x7B80;&#x2014;&#x2014;Hexo&#x7B80;&#x6D01;&#x4E3B;&#x9898;&#x63A8;&#x8350;</a></li>
<li><a href="https://hexo.io/docs/index.html" target="_blank" rel="external">hexo&#x5B98;&#x7F51;&#x6587;&#x6863;</a></li>
<li><a href="https://npm.taobao.org/" target="_blank" rel="external">&#x6DD8;&#x5B9D;NPM&#x955C;&#x50CF;</a></li>
<li><a href="https://docs.npmjs.com/" target="_blank" rel="external">npm&#x5B98;&#x65B9;&#x6587;&#x6863;</a></li>
<li><a href="https://git-scm.com/" target="_blank" rel="external">git</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4E00;&amp;#x76F4;&amp;#x60F3;&amp;#x505A;&amp;#x4E2A;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;&amp;#x535A;&amp;#x5BA2;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x81EA;&amp;#x5DF1;&amp;#x8D70;&amp;#x7684;&amp;
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="hexo" scheme="https://yyhan.github.io/tags/hexo/"/>
    
      <category term="博客系统" scheme="https://yyhan.github.io/tags/%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>maven常用命令</title>
    <link href="https://yyhan.github.io/2016/12/12/maven%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://yyhan.github.io/2016/12/12/maven常用命令/</id>
    <published>2016-12-12T12:26:51.000Z</published>
    <updated>2016-12-12T12:36:50.471Z</updated>
    
    <content type="html"><![CDATA[<p><code>mvn package -DskipTests</code> &#x8DF3;&#x8FC7;&#x6D4B;&#x8BD5;&#x6B65;&#x9AA4;&#x6253;&#x5305;&#x3002;</p>
<p><code>mvn package -Dmaven.test.skip=true</code> &#x8DF3;&#x8FC7;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x548C;&#x6267;&#x884C;&#x6B65;&#x9AA4;&#x6253;&#x5305;&#x3002;</p>
<p><code>mvn compile</code> &#x7F16;&#x8BD1;java&#x4EE3;&#x7801;&#xFF0C;&#x62F7;&#x8D1D;&#x7F16;&#x8BD1;&#x7ED3;&#x679C;&#x548C;<code>resources</code>&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x5230;<code>target/classes</code>&#x76EE;&#x5F55;&#x4E0B;&#x3002;</p>
<p><code>mvn clean</code> &#x6E05;&#x7406;&#x7F16;&#x8BD1;&#x548C;&#x6253;&#x5305;&#x7ED3;&#x679C;&#xFF0C;&#x5220;&#x9664;<code>target</code>&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x3002;</p>
<p><code>mvn clean package</code> &#x6E05;&#x7406;&#x7F16;&#x8BD1;&#x548C;&#x6253;&#x5305;&#x7ED3;&#x679C;&#x5E76;&#x6253;&#x5305;&#x3002;</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;mvn package -DskipTests&lt;/code&gt; &amp;#x8DF3;&amp;#x8FC7;&amp;#x6D4B;&amp;#x8BD5;&amp;#x6B65;&amp;#x9AA4;&amp;#x6253;&amp;#x5305;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;mvn package -D
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="maven" scheme="https://yyhan.github.io/tags/maven/"/>
    
      <category term="mvn" scheme="https://yyhan.github.io/tags/mvn/"/>
    
  </entry>
  
  <entry>
    <title>maven常用配置</title>
    <link href="https://yyhan.github.io/2016/12/12/maven%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
    <id>https://yyhan.github.io/2016/12/12/maven常用配置/</id>
    <published>2016-12-12T12:14:31.000Z</published>
    <updated>2017-06-06T15:16:44.467Z</updated>
    
    <content type="html"><![CDATA[<p>&#x4ECB;&#x7ECD;maven&#x5E38;&#x7528;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4E71;&#x7801;&#x95EE;&#x9898;&#x5904;&#x7406;&#xFF0C;&#x5E38;&#x7528;&#x6307;&#x4EE4;&#x4ECB;&#x7ECD;&#x7B49;&#x3002;<br><a id="more"></a></p>
<h2 id="maven-scope&#x8BF4;&#x660E;"><a href="#maven-scope&#x8BF4;&#x660E;" class="headerlink" title="maven scope&#x8BF4;&#x660E;"></a>maven scope&#x8BF4;&#x660E;</h2><ul class="ui list">
<li>compile&#xFF0C;&#x7F3A;&#x7701;&#x503C;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x9636;&#x6BB5;&#xFF0C;&#x4F1A;&#x968F;&#x7740;&#x9879;&#x76EE;&#x4E00;&#x8D77;&#x53D1;&#x5E03;&#x3002;</li>
<li>provided&#xFF0C;&#x7C7B;&#x4F3C;compile&#xFF0C;&#x671F;&#x671B;JDK&#x3001;&#x5BB9;&#x5668;&#x6216;&#x4F7F;&#x7528;&#x8005;&#x4F1A;&#x63D0;&#x4F9B;&#x8FD9;&#x4E2A;&#x4F9D;&#x8D56;&#x3002;&#x5982;servlet.jar&#x3002;</li>
<li>runtime&#xFF0C;&#x53EA;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x5982;JDBC&#x9A71;&#x52A8;&#xFF0C;&#x9002;&#x7528;&#x8FD0;&#x884C;&#x548C;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x3002;</li>
<li>test&#xFF0C;&#x53EA;&#x5728;&#x6D4B;&#x8BD5;&#x65F6;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x4E8E;&#x7F16;&#x8BD1;&#x548C;&#x8FD0;&#x884C;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x3002;&#x4E0D;&#x4F1A;&#x968F;&#x9879;&#x76EE;&#x53D1;&#x5E03;&#x3002;</li>
<li>system&#xFF0C;&#x7C7B;&#x4F3C;provided&#xFF0C;&#x9700;&#x8981;&#x663E;&#x5F0F;&#x63D0;&#x4F9B;&#x5305;&#x542B;&#x4F9D;&#x8D56;&#x7684;jar&#xFF0C;Maven&#x4E0D;&#x4F1A;&#x5728;Repository&#x4E2D;&#x67E5;&#x627E;&#x5B83;&#x3002;</li>
</ul>
<h2 id="war&#x5305;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x548C;&#x4E2D;&#x6587;&#x7F16;&#x7801;"><a href="#war&#x5305;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x548C;&#x4E2D;&#x6587;&#x7F16;&#x7801;" class="headerlink" title="war&#x5305;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x548C;&#x4E2D;&#x6587;&#x7F16;&#x7801;"></a>war&#x5305;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x548C;&#x4E2D;&#x6587;&#x7F16;&#x7801;</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">resourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">resourceEncoding</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>${war.outputDirectory}<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="&#x4E71;&#x7801;&#x95EE;&#x9898;&#x5904;&#x7406;"><a href="#&#x4E71;&#x7801;&#x95EE;&#x9898;&#x5904;&#x7406;" class="headerlink" title="&#x4E71;&#x7801;&#x95EE;&#x9898;&#x5904;&#x7406;"></a>&#x4E71;&#x7801;&#x95EE;&#x9898;&#x5904;&#x7406;</h2><p>&#x5728;pom.xml&#x4E2D;&#x7EDF;&#x4E00;&#x6307;&#x5B9A;UTF-8&#x7F16;&#x7801;&#x3002;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-site-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- &#x6307;&#x5B9A;&#x7F16;&#x8BD1;&#x65F6;java&#x6E90;&#x6587;&#x4EF6;&#x7F16;&#x7801; --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- &#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7F16;&#x7801; --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- &#x89E3;&#x51B3;maven test&#x547D;&#x4EE4;&#x65F6;console&#x51FA;&#x73B0;&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x4E71;&#x7801; --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.19.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">argLine</span>&gt;</span>-Dfile.encoding=UTF-8<span class="tag">&lt;/<span class="name">argLine</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">skipTests</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skipTests</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">forkMode</span>&gt;</span>never<span class="tag">&lt;/<span class="name">forkMode</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="comment">&lt;!-- &#x6307;&#x5B9A;web&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7F16;&#x7801; --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">resourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">resourceEncoding</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="&#x6DFB;&#x52A0;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;maven&#x955C;&#x50CF;"><a href="#&#x6DFB;&#x52A0;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;maven&#x955C;&#x50CF;" class="headerlink" title="&#x6DFB;&#x52A0;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;maven&#x955C;&#x50CF;"></a>&#x6DFB;&#x52A0;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;maven&#x955C;&#x50CF;</h2><p>&#x7B2C;&#x4E00;&#x79CD;&#x529E;&#x6CD5;&#xFF0C;&#x5728;<code>setting.xml</code>&#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x5168;&#x5C40;&#x6709;&#x6548;&#xFF0C;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>       </div><div class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x529E;&#x6CD5;&#xFF0C;&#x5728;<code>pom.xml</code>&#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x5F53;&#x524D;&#x9879;&#x76EE;&#x6709;&#x6548;&#xFF0C;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;介绍maven常用的配置，乱码问题处理，常用指令介绍等。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="https://yyhan.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="maven" scheme="https://yyhan.github.io/tags/maven/"/>
    
      <category term="pom" scheme="https://yyhan.github.io/tags/pom/"/>
    
  </entry>
  
  <entry>
    <title>java操作mongodb示例</title>
    <link href="https://yyhan.github.io/2016/12/11/java%E6%93%8D%E4%BD%9Cmongodb%E7%A4%BA%E4%BE%8B/"/>
    <id>https://yyhan.github.io/2016/12/11/java操作mongodb示例/</id>
    <published>2016-12-11T14:57:48.000Z</published>
    <updated>2016-12-12T11:57:17.379Z</updated>
    
    <content type="html"><![CDATA[<p>java&#x64CD;&#x4F5C;mongodb&#x57FA;&#x672C;&#x5B9E;&#x73B0;&#x3002;<br><a id="more"></a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.demo.utils.db;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.mongodb.Block;</div><div class="line"><span class="keyword">import</span> com.mongodb.MongoClient;</div><div class="line"><span class="keyword">import</span> com.mongodb.MongoClientURI;</div><div class="line"><span class="keyword">import</span> com.mongodb.ReadPreference;</div><div class="line"><span class="keyword">import</span> com.mongodb.bulk.BulkWriteResult;</div><div class="line"><span class="keyword">import</span> com.mongodb.client.*;</div><div class="line"><span class="keyword">import</span> com.mongodb.client.model.*;</div><div class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager;</div><div class="line"><span class="keyword">import</span> org.apache.logging.log4j.Logger;</div><div class="line"><span class="keyword">import</span> org.bson.Document;</div><div class="line"><span class="keyword">import</span> org.bson.conversions.Bson;</div><div class="line"><span class="keyword">import</span> org.bson.types.ObjectId;</div><div class="line"><span class="keyword">import</span> org.joda.time.DateTime;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MongoHelper</span> </span>{</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Logger logger = LogManager.getLogger(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String AUTO_ID = <span class="string">&quot;_id&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String UpdateDate = <span class="string">&quot;_UpdateDate&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MaxSize = <span class="number">1000</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String hosts;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String databaseName;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> MongoClient masterClusterClient;</div><div class="line">    <span class="keyword">private</span> MongoDatabase masterClusterDB;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> MongoClient readClusterClient;</div><div class="line">    <span class="keyword">private</span> MongoDatabase readClusterDB;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MongoHelper</span><span class="params">(String hosts, String databaseName)</span> </span>{</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.hosts = hosts;</div><div class="line">        <span class="keyword">this</span>.databaseName = databaseName;</div><div class="line"></div><div class="line">        masterClusterClient = <span class="keyword">new</span> MongoClient(<span class="keyword">new</span> MongoClientURI(<span class="keyword">this</span>.hosts));</div><div class="line">        masterClusterClient.setReadPreference(ReadPreference.secondaryPreferred());</div><div class="line">        masterClusterDB = masterClusterClient.getDatabase(<span class="keyword">this</span>.databaseName);</div><div class="line">        <span class="keyword">this</span>.readClusterClient = <span class="keyword">this</span>.masterClusterClient;</div><div class="line">        <span class="keyword">this</span>.readClusterDB = <span class="keyword">this</span>.masterClusterDB;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MongoHelper</span><span class="params">(String masterClusterHosts, String masterClusterDatabaseName, String readClusterHosts, String readClusterDatabaseName)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(masterClusterHosts)) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;masterClusterHosts&apos; is null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(masterClusterDatabaseName)) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;masterClusterDatabaseName&apos; is null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (logger.isDebugEnabled()) {</div><div class="line">            logger.debug(<span class="string">&quot;masterClusterHosts:{}&quot;</span>, masterClusterHosts);</div><div class="line">            logger.debug(<span class="string">&quot;masterClusterDatabaseName:{}&quot;</span>, masterClusterDatabaseName);</div><div class="line">        }</div><div class="line">        masterClusterClient = <span class="keyword">new</span> MongoClient(<span class="keyword">new</span> MongoClientURI(masterClusterHosts));</div><div class="line">        masterClusterClient.setReadPreference(ReadPreference.secondaryPreferred());</div><div class="line">        masterClusterDB = masterClusterClient.getDatabase(masterClusterDatabaseName);</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(readClusterHosts) || StringUtils.isEmpty(readClusterDatabaseName)) {</div><div class="line">            <span class="keyword">this</span>.readClusterClient = <span class="keyword">this</span>.masterClusterClient;</div><div class="line">            <span class="keyword">this</span>.readClusterDB = <span class="keyword">this</span>.masterClusterDB;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">if</span> (logger.isDebugEnabled()) {</div><div class="line">                logger.debug(<span class="string">&quot;readClusterHosts:{}&quot;</span>, readClusterHosts);</div><div class="line">                logger.debug(<span class="string">&quot;readClusterDatabaseName:{}&quot;</span>, readClusterDatabaseName);</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span> (masterClusterHosts.equals(readClusterHosts) &amp;&amp; masterClusterDatabaseName.equals(readClusterDatabaseName)) {</div><div class="line">                <span class="keyword">this</span>.readClusterClient = <span class="keyword">this</span>.masterClusterClient;</div><div class="line">                <span class="keyword">this</span>.readClusterDB = <span class="keyword">this</span>.masterClusterDB;</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                readClusterClient = <span class="keyword">new</span> MongoClient(<span class="keyword">new</span> MongoClientURI(readClusterHosts));</div><div class="line">                readClusterDB = readClusterClient.getDatabase(readClusterDatabaseName);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x6267;&#x884C;mongo&#x547D;&#x4EE4;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> document</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">runCommand</span><span class="params">(Document document)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (document == <span class="keyword">null</span> || document.isEmpty()) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;document&apos; can not be null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (document.containsKey(<span class="string">&quot;insert&quot;</span>) || document.containsKey(<span class="string">&quot;update&quot;</span>) || document.containsKey(<span class="string">&quot;delete&quot;</span>)) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.masterClusterDB.runCommand(document, ReadPreference.primary());</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.readClusterDB.runCommand(document, ReadPreference.secondaryPreferred());</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#x5217;&#x8868;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@return</span> &#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x540D;&#x79F0;&#x5217;&#x8868; &#x9700;&#x8981;&#x6743;&#x9650;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getAllDBNames</span><span class="params">()</span> </span>{</div><div class="line">        MongoIterable&lt;String&gt; dbnames = masterClusterClient.listDatabaseNames();</div><div class="line">        <span class="keyword">if</span> (dbnames == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        }</div><div class="line">        List&lt;String&gt; _list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        <span class="keyword">for</span> (String s : dbnames) {</div><div class="line">            _list.add(s);</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> _list;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;mongo&#x96C6;&#x7FA4;DB&#x5B9E;&#x4F8B;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> MongoDatabase <span class="title">getDB</span><span class="params">()</span> </span>{</div><div class="line">        <span class="keyword">return</span> getDB(databaseName, <span class="keyword">false</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;mongo&#x96C6;&#x7FA4;DB&#x5B9E;&#x4F8B;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> dbName &#x6570;&#x636E;&#x5E93;&#x540D;&#x5927;&#x5C0F;&#x5199;</div><div class="line">    * <span class="doctag">@param</span> isRead &#x662F;&#x5426;&#x8BFB;&#x5E93;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> MongoDatabase <span class="title">getDB</span><span class="params">(String dbName, Boolean isRead)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (dbName != <span class="keyword">null</span> &amp;&amp; !<span class="string">&quot;&quot;</span>.equals(dbName)) {</div><div class="line">            MongoDatabase database = isRead ? masterClusterClient.getDatabase(dbName) : masterClusterClient.getDatabase(dbName);</div><div class="line">            <span class="keyword">return</span> database;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * <span class="doctag">@return</span> &#x67E5;&#x8BE2;&#x9ED8;&#x8BA4;DB&#x4E0B;&#x7684;&#x6240;&#x6709;&#x96C6;&#x5408;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getAllCollectionNames</span><span class="params">()</span> </span>{</div><div class="line">        MongoIterable&lt;String&gt; colls = masterClusterDB.listCollectionNames();</div><div class="line">        <span class="keyword">if</span> (colls == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        }</div><div class="line">        List&lt;String&gt; _list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        <span class="keyword">for</span> (String s : colls) {</div><div class="line">            _list.add(s);</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> _list;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6307;&#x5B9A;DB&#x4E0B;&#x7684;&#x6240;&#x6709;&#x96C6;&#x5408;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> dbName &#x6307;&#x5B9A;DB</div><div class="line">    * <span class="doctag">@return</span> &#x6307;&#x5B9A;DB&#x4E0B;&#x7684;&#x6240;&#x6709;&#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getAllCollectionNames</span><span class="params">(String dbName)</span> </span>{</div><div class="line">        MongoDatabase db = masterClusterClient.getDatabase(dbName);</div><div class="line">        <span class="keyword">if</span> (db == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        }</div><div class="line">        MongoIterable&lt;String&gt; colls = db.listCollectionNames();</div><div class="line">        <span class="keyword">if</span> (colls == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        }</div><div class="line">        List&lt;String&gt; _list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">        <span class="keyword">for</span> (String s : colls) {</div><div class="line">            _list.add(s);</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> _list;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x4ECE;&#x9ED8;&#x8BA4;&#x8BFB;&#x5E93;&#x83B7;&#x53D6;collection&#x96C6;&#x5408;&#x5BF9;&#x8C61;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x5B57;&#x5927;&#x5C0F;&#x5199;</div><div class="line">    * <span class="doctag">@return</span> &#x96C6;&#x5408;&#x5BF9;&#x8C61;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">private</span> MongoCollection&lt;Document&gt; <span class="title">getCollection</span><span class="params">(String collName)</span> </span>{</div><div class="line">        <span class="keyword">return</span> getCollection(collName, ReadPreference.secondaryPreferred());</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;Mongodb&#x96C6;&#x5408;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName      &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> readPreference &#x8BFB;&#x64CD;&#x4F5C;&#x4F18;&#x5148;&#x987A;&#x5E8F;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">private</span> MongoCollection&lt;Document&gt; <span class="title">getCollection</span><span class="params">(String collName, ReadPreference readPreference)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(collName)) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;collName&apos; is null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        MongoCollection&lt;Document&gt; collection = <span class="keyword">this</span>.masterClusterDB.getCollection(collName).withReadPreference(readPreference);</div><div class="line">        <span class="keyword">return</span> collection;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;&#x7528;&#x4E8E;&#x8BFB;&#x7684;&#x96C6;&#x5408;&#x3002;readClusterDB</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">private</span> MongoCollection&lt;Document&gt; <span class="title">getCollectionOfRead</span><span class="params">(String collName)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(collName)) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;collName&apos; is null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        MongoCollection&lt;Document&gt; collection = <span class="keyword">this</span>.readClusterDB.getCollection(collName);</div><div class="line">        <span class="keyword">return</span> collection;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x83B7;&#x53D6;&#x7528;&#x4E8E;&#x5199;&#x7684;&#x96C6;&#x5408;&#x3002;ReadPreference.primary</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">private</span> MongoCollection&lt;Document&gt; <span class="title">getCollectionOfWrite</span><span class="params">(String collName)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(collName)) {</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;the &apos;collName&apos; is null or empty&quot;</span>);</div><div class="line">        }</div><div class="line">        MongoCollection&lt;Document&gt; collection = <span class="keyword">this</span>.masterClusterDB.getCollection(collName).withReadPreference(ReadPreference.primary());</div><div class="line">        <span class="keyword">return</span> collection;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x4ECE;&#x9ED8;&#x8BA4;&#x8BFB;&#x5E93;&#x83B7;&#x53D6;collection&#x96C6;&#x5408;&#x5BF9;&#x8C61;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x5B57;&#x5927;&#x5C0F;&#x5199;</div><div class="line">    * <span class="doctag">@return</span> &#x96C6;&#x5408;&#x5BF9;&#x8C61;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">getDocuments</span><span class="params">(String collName, Document condition)</span> </span>{</div><div class="line">        <span class="keyword">final</span> List&lt;Document&gt; docs = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(collName)) {</div><div class="line">            <span class="keyword">return</span> docs;</div><div class="line">        }</div><div class="line"></div><div class="line">        FindIterable&lt;Document&gt; iterable = <span class="keyword">this</span>.getCollectionOfRead(collName).find(condition);</div><div class="line">        iterable.forEach(<span class="keyword">new</span> Block&lt;Document&gt;() {</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">apply</span><span class="params">(<span class="keyword">final</span> Document doc)</span> </span>{</div><div class="line">                docs.add(doc);</div><div class="line">            }</div><div class="line">        });</div><div class="line">        <span class="keyword">return</span> docs;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x5411;&#x6307;&#x5B9A;&#x96C6;&#x5408;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6570;&#x636E;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> doc      &#x8981;&#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;</div><div class="line">    * <span class="doctag">@return</span> &#x662F;&#x5426;&#x63D2;&#x5165;&#x6210;&#x529F;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">insertOne</span><span class="params">(String collName, Document doc)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; collection = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">        <span class="keyword">if</span> (collection == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        doc.append(UpdateDate, DateTime.now().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>));</div><div class="line">        collection.insertOne(doc);</div><div class="line">        <span class="keyword">if</span> (doc.containsKey(MongoHelper.AUTO_ID)) {</div><div class="line">            <span class="keyword">return</span> doc.get(MongoHelper.AUTO_ID).toString();</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x5411;&#x6307;&#x5B9A;&#x96C6;&#x5408;&#x4E2D;&#x63D2;&#x5165;&#x591A;&#x6761;&#x6570;&#x636E;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> docs    &#x8981;&#x63D2;&#x5165;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5408;</div><div class="line">    * <span class="doctag">@return</span> &#x63D2;&#x5165;&#x662F;&#x5426;&#x6210;&#x529F;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">insertMany</span><span class="params">(String collName, List&lt;Document&gt; docs)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; collection = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">        <span class="keyword">if</span> (collection == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line">        String dateStr = DateTime.now().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>);</div><div class="line">        <span class="keyword">for</span> (Document doc : docs) {</div><div class="line">            doc.append(UpdateDate, dateStr);</div><div class="line">        }</div><div class="line">        collection.insertMany(docs);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x96C6;&#x5408;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@return</span> &#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x6587;&#x6863;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findOne</span><span class="params">(String collName)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = coll.find().limit(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> iterable.first();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName</div><div class="line">    * <span class="doctag">@param</span> filter</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findOne</span><span class="params">(String collName, Bson filter)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = coll.find(filter).limit(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> iterable.first();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter  &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> fields  &#x8F93;&#x51FA;&#x5B57;&#x6BB5;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findOne</span><span class="params">(String collName, Bson filter, String... fields)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = coll.find(filter).limit(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> iterable.projection(Projections.include(fields)).first();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName  &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter    &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projection &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findOne</span><span class="params">(String collName, Bson filter, Bson projection)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = coll.find(filter).limit(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> iterable.projection(projection).first();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName    &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter      &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projections &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@param</span> orderField  &#x6392;&#x5E8F;&#x5B57;&#x6BB5;</div><div class="line">    * <span class="doctag">@param</span> ascding    &#x662F;&#x5426;&#x5347;&#x5E8F;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findOne</span><span class="params">(String collName, Bson filter, Bson projections, String orderField, <span class="keyword">boolean</span> ascding)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = coll</div><div class="line">                .find(filter)</div><div class="line">                .sort(ascding ? Sorts.ascending(orderField) : Sorts.descending(orderField))</div><div class="line">                .limit(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> iterable.projection(projections).first();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6307;&#x5B9A;id&#x7684;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> id      &#x6587;&#x6863;&#x4E3B;&#x952E;id</div><div class="line">    * <span class="doctag">@return</span> </div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">findRowById</span><span class="params">(String collName, String id)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (ObjectId.isValid(id)) {</div><div class="line">            MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">            <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            }</div><div class="line">            FindIterable&lt;Document&gt; iterable = coll.find(Filters.eq(<span class="string">&quot;_id&quot;</span>, <span class="keyword">new</span> ObjectId(id))).limit(<span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> iterable.first();</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;&#x96C6;&#x5408;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName    &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter      &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projections &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@return</span> &#x6700;&#x591A;&#x8FD4;&#x56DE; <span class="doctag">@MaxSize</span> &#x4E2A;&#x6587;&#x6863;&#xFF0C;&#x907F;&#x514D;&#x5185;&#x5B58;&#x5360;&#x7528;&#x8FC7;&#x5927;&#x3002;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x6309;&#x7167;_id&#x5B57;&#x6BB5;&#x964D;&#x5E8F;&#x6392;&#x5217;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">findRows</span><span class="params">(String collName, Bson filter, Bson projections)</span> </span>{</div><div class="line">        <span class="keyword">return</span> findRows(collName, filter, projections, <span class="keyword">null</span>, <span class="keyword">false</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x6587;&#x6863;&#x96C6;&#x5408;&#xFF0C;&#x5E76;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x6392;&#x5E8F;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName    &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter      &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projections &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@param</span> orderField  &#x6392;&#x5E8F;&#x5B57;&#x6BB5;</div><div class="line">    * <span class="doctag">@param</span> ascding    &#x662F;&#x5426;&#x5347;&#x5E8F;</div><div class="line">    * <span class="doctag">@return</span> &#x6700;&#x591A;&#x8FD4;&#x56DE;  <span class="doctag">@MaxSize</span> &#x4E2A;&#x6587;&#x6863;&#xFF0C;&#x907F;&#x514D;&#x5185;&#x5B58;&#x5360;&#x7528;&#x8FC7;&#x5927;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">findRows</span><span class="params">(String collName, Bson filter, Bson projections, String orderField, <span class="keyword">boolean</span> ascding)</span> </span>{</div><div class="line">        List&lt;Document&gt; list = <span class="keyword">new</span> ArrayList&lt;Document&gt;();</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span> (filter == <span class="keyword">null</span>) {</div><div class="line">            iterable = coll.find();</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            iterable = coll.find(filter);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        }</div><div class="line">        MongoCursor&lt;Document&gt; cursor = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(orderField)) {</div><div class="line">                <span class="keyword">if</span> (projections == <span class="keyword">null</span>) {</div><div class="line">                    cursor = iterable</div><div class="line">                            .sort(ascding ? Sorts.ascending(<span class="string">&quot;_id&quot;</span>) : Sorts.descending(<span class="string">&quot;_id&quot;</span>))</div><div class="line">                            .limit(MaxSize)</div><div class="line">                            .iterator();</div><div class="line">                } <span class="keyword">else</span> {</div><div class="line">                    cursor = iterable.projection(projections)</div><div class="line">                            .sort(ascding ? Sorts.ascending(<span class="string">&quot;_id&quot;</span>) : Sorts.descending(<span class="string">&quot;_id&quot;</span>))</div><div class="line">                            .limit(MaxSize)</div><div class="line">                            .iterator();</div><div class="line">                }</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">if</span> (projections == <span class="keyword">null</span>) {</div><div class="line">                    cursor = iterable</div><div class="line">                            .sort(ascding ? Sorts.ascending(orderField) : Sorts.descending(orderField))</div><div class="line">                            .limit(MaxSize)</div><div class="line">                            .iterator();</div><div class="line">                } <span class="keyword">else</span> {</div><div class="line">                    cursor = iterable.projection(projections)</div><div class="line">                            .sort(ascding ? Sorts.ascending(orderField) : Sorts.descending(orderField))</div><div class="line">                            .limit(MaxSize)</div><div class="line">                            .iterator();</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span> &amp;&amp; cursor.hasNext()) {</div><div class="line">                <span class="keyword">while</span> (cursor.hasNext()) {</div><div class="line">                    list.add(cursor.next());</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span>)</div><div class="line">                cursor.close();</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter  &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getRowsCount</span><span class="params">(String collName, Bson filter)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (filter == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> coll.count();</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> coll.count(filter);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x5206;&#x9875;&#x6587;&#x6863;&#x96C6;&#x5408;,&#x6309;&#x7167;_id&#x5B57;&#x6BB5;&#x964D;&#x5E8F;&#x6392;&#x5217;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName    &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter      &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projections &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@param</span> pageNo      &#x5F53;&#x524D;&#x9875;&#x7F16;&#x53F7;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;</div><div class="line">    * <span class="doctag">@param</span> pageSize    &#x6BCF;&#x9875;&#x5BB9;&#x91CF;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    * <span class="doctag">@throws</span> Exception</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">findPagedRows</span><span class="params">(String collName, Bson filter, Bson projections, <span class="keyword">int</span> pageNo, <span class="keyword">int</span> pageSize)</span> </span>{</div><div class="line">        <span class="keyword">return</span> findPagedRows(collName, filter, projections, <span class="keyword">null</span>, <span class="keyword">false</span>, pageNo, pageSize);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x67E5;&#x8BE2;&#x5206;&#x9875;&#x6587;&#x6863;&#x96C6;&#x5408;,&#x9ED8;&#x8BA4;&#x6309;&#x7167;_id&#x5B57;&#x6BB5;&#x6392;&#x5E8F;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName    &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter      &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> projections &#x5B57;&#x6BB5;&#x6295;&#x5F71;</div><div class="line">    * <span class="doctag">@param</span> orderField  &#x6392;&#x5E8F;&#x5B57;&#x6BB5;</div><div class="line">    * <span class="doctag">@param</span> ascding    &#x662F;&#x5426;&#x5347;&#x5E8F;</div><div class="line">    * <span class="doctag">@param</span> pageNo      &#x5F53;&#x524D;&#x9875;&#x7F16;&#x53F7;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;</div><div class="line">    * <span class="doctag">@param</span> pageSize    &#x6BCF;&#x9875;&#x5BB9;&#x91CF;</div><div class="line">    * <span class="doctag">@return</span></div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">findPagedRows</span><span class="params">(String collName, Bson filter, Bson projections, String orderField, <span class="keyword">boolean</span> ascding, <span class="keyword">int</span> pageNo, <span class="keyword">int</span> pageSize)</span> </span>{</div><div class="line">        List&lt;Document&gt; list = <span class="keyword">new</span> ArrayList&lt;Document&gt;(pageSize);</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        }</div><div class="line">        FindIterable&lt;Document&gt; iterable = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span> (filter == <span class="keyword">null</span>) {</div><div class="line">            iterable = coll.find();</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            iterable = coll.find(filter);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (iterable == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        }</div><div class="line">        MongoCursor&lt;Document&gt; cursor = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(orderField)) {</div><div class="line">                cursor = iterable.projection(projections)</div><div class="line">                        .sort(ascding ? Sorts.ascending(<span class="string">&quot;_id&quot;</span>) : Sorts.descending(<span class="string">&quot;_id&quot;</span>))</div><div class="line">                        .skip((pageNo - <span class="number">1</span>) * pageSize)</div><div class="line">                        .limit(pageSize)</div><div class="line">                        .iterator();</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                cursor = iterable.projection(projections)</div><div class="line">                        .sort(Sorts.ascending(orderField))</div><div class="line">                        .sort(ascding ? Sorts.ascending(orderField) : Sorts.descending(orderField))</div><div class="line">                        .skip((pageNo - <span class="number">1</span>) * pageSize)</div><div class="line">                        .limit(pageSize)</div><div class="line">                        .iterator();</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span> &amp;&amp; cursor.hasNext()) {</div><div class="line">                <span class="keyword">while</span> (cursor.hasNext()) {</div><div class="line">                    list.add(cursor.next());</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> list;</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span>)</div><div class="line">                cursor.close();</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x6839;&#x636E;&#x4E3B;&#x952E;id&#x5220;&#x9664;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> id      &#x6587;&#x6863;id</div><div class="line">    * <span class="doctag">@return</span> &#x88AB;&#x5220;&#x9664;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">deleteById</span><span class="params">(String collName, String id)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (ObjectId.isValid(id)) {</div><div class="line">            MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">            <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> coll.deleteOne(Filters.eq(<span class="string">&quot;_id&quot;</span>, <span class="keyword">new</span> ObjectId(id)))</div><div class="line">                    .getDeletedCount();</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x6839;&#x636E;&#x6307;&#x5B9A;filter&#x5220;&#x9664;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName</div><div class="line">    * <span class="doctag">@param</span> filter</div><div class="line">    * <span class="doctag">@return</span> &#x88AB;&#x5220;&#x9664;&#x6587;&#x6863;&#x7684;&#x6570;&#x91CF;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">delete</span><span class="params">(String collName, Bson filter)</span> </span>{</div><div class="line">        <span class="keyword">if</span> (filter == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">            <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> coll.deleteOne(filter)</div><div class="line">                    .getDeletedCount();</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x66F4;&#x65B0;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter  &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> update  &#x66F4;&#x65B0;&#x8BED;&#x53E5;</div><div class="line">    * <span class="doctag">@return</span> &#x66F4;&#x65B0;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">update</span><span class="params">(String collName, Bson filter, Bson update)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> coll.updateOne(filter, Updates.combine(</div><div class="line">                update,</div><div class="line">                Updates.set(UpdateDate, DateTime.now().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>)))</div><div class="line">        ).getModifiedCount();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x66F4;&#x65B0;&#x6587;&#x6863;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> updates  &#x66F4;&#x65B0;&#x8BED;&#x53E5;</div><div class="line">    * <span class="doctag">@return</span> &#x66F4;&#x65B0;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">updateMany</span><span class="params">(String collName, List&lt;WriteModel&lt;Document&gt;&gt; updates)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span> || updates == <span class="keyword">null</span> || updates.size() == <span class="number">0</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        BulkWriteResult bulkWriteResult = coll.bulkWrite(updates);</div><div class="line">        <span class="keyword">return</span> bulkWriteResult.getModifiedCount();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">    * &#x66F4;&#x65B0;&#x6587;&#x6863;&#xFF0C;&#x6307;&#x5B9A;&#x6587;&#x6863;&#x5B58;&#x5728;&#x5219;&#x66F4;&#x65B0;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x63D2;&#x5165;</div><div class="line">    *</div><div class="line">    * <span class="doctag">@param</span> collName &#x96C6;&#x5408;&#x540D;&#x79F0;</div><div class="line">    * <span class="doctag">@param</span> filter  &#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</div><div class="line">    * <span class="doctag">@param</span> update  &#x66F4;&#x65B0;&#x8BED;&#x53E5;</div><div class="line">    * <span class="doctag">@return</span> &#x66F4;&#x65B0;&#x7684;&#x6587;&#x6863;&#x6570;&#x91CF;</div><div class="line">    */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">upsert</span><span class="params">(String collName, Bson filter, Bson update)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfWrite(collName);</div><div class="line">        <span class="keyword">if</span> (coll == <span class="keyword">null</span>) {</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        ;</div><div class="line">        <span class="keyword">return</span> coll.updateOne(filter, Updates.combine(</div><div class="line">                update,</div><div class="line">                Updates.set(UpdateDate, DateTime.now().toString(<span class="string">&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;</span>))</div><div class="line">                ),</div><div class="line">                <span class="keyword">new</span> UpdateOptions().upsert(<span class="keyword">true</span>)</div><div class="line">        ).getModifiedCount();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Document&gt; <span class="title">aggregate</span><span class="params">(String collName, List&lt;Bson&gt; pipelines)</span> </span>{</div><div class="line">        MongoCollection&lt;Document&gt; coll = <span class="keyword">this</span>.getCollectionOfRead(collName);</div><div class="line">        MongoCursor&lt;Document&gt; cursor = <span class="keyword">null</span>;</div><div class="line">        List&lt;Document&gt; documents = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            cursor = coll.aggregate(pipelines).iterator();</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span> &amp;&amp; cursor.hasNext()) {</div><div class="line">                <span class="keyword">while</span> (cursor.hasNext()) {</div><div class="line">                    documents.add(cursor.next());</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> documents;</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            <span class="keyword">if</span> (cursor != <span class="keyword">null</span>)</div><div class="line">                cursor.close();</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;java操作mongodb基本实现。&lt;br&gt;
    
    </summary>
    
      <category term="代码示例" scheme="https://yyhan.github.io/categories/%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B/"/>
    
    
      <category term="java" scheme="https://yyhan.github.io/tags/java/"/>
    
      <category term="mongodb" scheme="https://yyhan.github.io/tags/mongodb/"/>
    
  </entry>
  
</feed>
